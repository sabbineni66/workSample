<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE chapter PUBLIC "-//Samba-Team//DTD DocBook V4.2-Based Variant V1.0//EN" "http://www.samba.org/samba/DTD/samba-doc">
<chapter id="ProfileMgmt">
<chapterinfo>
	&author.jht;
    <pubdate>3 ?????? 2003 ?.</pubdate>
</chapterinfo>

<title>?????????? ????????? ???????? ?????</title>

<sect1>
<title>??????????? ? ??????? ???????</title>

<para><indexterm><primary>???????????? ???????</primary></indexterm> ???-?? ?????? ???????????? ????????, ???-?? ?? ?????????, ???-?? - ?????, ? ??? ????????? ??????????????? - ??? ?????? ??????? ?? ????.</para>

<para><indexterm><primary>?????????? ????????????? ?????????</primary></indexterm> ???????????? ??????? ????????? ?????????????? ??????? ????????? ?????? "??????? ????" ??? ??????????? ???????????? ? ????? ?????? ?? ??????. ??? ????? ????????????? ????? ??????????, ?????????? ????????? ? ?????????? ???????????? ????????.</para>

<para><indexterm><primary>????????? ???????</primary></indexterm> ? ?? ????? ??? ????????????? ??????? ????? ??? ????? ??????? ??? ???????, ??? ?????? ??? ????? ???? ????????? ?????????. ? ?????????, ???????????? ????????? ???????????, ? ??????? ???????? ??? ??????????? ???????? ??????????, ????? ????? ????????????? ????? ?????????? ?????????. ??? ????? ????????????? ??????????, ??????? ??????? ?????????????? Samba ?????????? ? ?????? ??????????.</para>

</sect1>

<sect1>
<title>???????????? ???????</title>

<warning>
<para>????????? ???????????? ???????? ???????? ? Windows 9x/Me ? Windows NT4/200x.</para>
</warning>

<para>????? ??????????? ????, ??? ??????????? ???????????? ???????, ??????? ????????? ?? ??, ??? ??????? Windows 9x/Me ? Windows NT4/200x ????????? ????????? ???????.</para>

<para><indexterm><primary>NetUserGetInfo</primary></indexterm> ??????? Windows 9x/Me ???????? ??????? ?????? NetUserGetInfo, ????? ???????? ???????????? ??????? ???????????. ?????? ????? ?? ????? ????? ??? ?????????? ???? ???????????? ???????, ?????? ??? "?????????" ?????? ??????? ????????????. ??? ??????, ??? ???????? ???????? Windows 9x/Me ?????????????? ???????? ????????? ????????????.</para>


<para><indexterm><primary>NetSAMLogon</primary></indexterm><indexterm><primary>RPC</primary></indexterm> ??????? Windows NT4/200x ???????? ?????? RPC NetSAMLogon, ??????? ???????? ????? ?????, ??????? ????????? ???? ??? ???????????? ????????????????? ???????.</para>

<sect2>
<title>????????? Samba ??? ?????? ? ?????????</title>

<para>???? ?????? ????????? ????????? Samba ??? ????????? ???????? ???????? MS Windows.</para>

<sect3>
<title>??????? ????????????? NT4/200x</title>

<para>????????, ??? ????????? ???????? NT4/200x ?????????? ????????? ? ?????? [global] ????? &smb.conf;:</para>

<smbconfblock>
	<smbconfoption name="logon path">\\??????_????????\??????_?_?????????\????_?_????????\%U\???_????_?_???????</smbconfoption>
</smbconfblock>

<para>??? ?????? ??????????? ???: <smbconfblock><smbconfoption name="logon path">\\%L\Profiles\%U</smbconfoption></smbconfblock>, ??? <quote>%L</quote> ????????????? ? ??? ??????? Samba, ? <quote>%U</quote> ????????????? ? ??? ????????????.</para>

<para>???????? ?? ????????? ??? ????? ????????? - <filename>\\%N\%U\profile</filename>, ? ?????? <filename>\\??????_samba\???_????????????\profile</filename>. ????? ?????? <filename>\\%N\%U</filename> ????????? ????????????? ????? ???????? [homes]. ???? ??? ???????? ???????? ?? ??????????? ?????? Samba, ??????????????, ??? ????? ??????, ????????? ? logon path, ???????? ???????????????. ??????????, ?????????? ? ???????? ??????????? ?? &smb.conf; ?????????? ??????? ????? <quote>%L</quote> ? <quote>%N</quote>, ??? ??, ??? ? ????? <quote>%U</quote> ? <quote>%u</quote>.</para>

<note><para><indexterm><primary>logons</primary></indexterm><indexterm><primary>disconnect a connection</primary></indexterm> ? ?? ?? ????? ??????? MS Windows NT/200x ?? ????????????? ?? ??????? ????? ?????????????. ????????????? ?? ???????????? ??? ??????????? <smbconfsection name="homes"/> ? ???????? ????? ???? ? ?????? ??????? ? ?????????.</para></note>
</sect3>

<sect3>
<title>??????? ????????????? Windows 9x/Me</title>

<para><indexterm><primary>net use /home</primary></indexterm><indexterm><primary>logon home</primary></indexterm> ??? ????????? ???????? Windows 9x/Me ??? ?????????? ???????????? ???????? <smbconfoption name="logon home"/> parameter. Samba ???? ?????????? ???, ??? <userinput>net use /home</userinput> ?????? ???? ????????, ? ?????? ??? ????? ??????? ?? ????????? <parameter>logon home</parameter>.</para>

<para><indexterm><primary>logon home</primary></indexterm><indexterm><primary>\\%L\%U\.profiles</primary></indexterm><indexterm><primary>.profiles</primary></indexterm> ????????? ???????? <parameter>logon home</parameter>, ?? ????????????? ???? ????????????? ???????? Windows 9x/Me ? ???????? ???????? ????????????. ?? ????????! ?????????? ????, ??????? ?? ?????? ????????????. ???? ?? ?????????? ????????? ????????? ? ?????? <smbconfsection name="[global]"/> ?????? ????? &smb.conf;: <smbconfblock><smbconfoption name="logon home">\\%L\%U\.profiles</smbconfoption></smbconfblock>, ?? ????? ???? ??????? Windows 9x/Me ??????????? ???????? ??????? ? ?????????? ????????? ????????, ?????????? <filename>.profiles</filename> (????? ???????, ??? ????? ????????).</para>

<para><indexterm><primary>net use /home</primary></indexterm> ????? ????, ? <userinput>net use /home</userinput> ????? ????? ???????? ??-?? ??????????? Windows 9x/Me. ??? ??????? ????? ???????? ???????? ?? ???????? ????????? "???????? ???????", ? ?????????? ?????? ????? ???, ???????????? ?????? ? ????? ??????.????? ???????, ???????, ????? ?? ??????? <filename>\\%L\%U</filename> ??? <smbconfoption name="logon home"/>.</para>
</sect3>

<sect3>
<title>????????? ??????? ????????????? Windows 9x/Me ? NT4/200x</title>

<para>?? ?????? ???????????? ??????? ??? ???????? Windows 9x ? Windows NT ?????????? ????? ????? ?????????? - <smbconfoption name="logon home"/> and <smbconfoption name="logon path"/>. ????????,</para>

<para><smbconfblock>
<smbconfoption name="logon home">\\%L\%U\.profiles</smbconfoption>
<smbconfoption name="logon path">\\%L\profiles\%U</smbconfoption>
</smbconfblock></para>

<para><indexterm><primary>mixed profile</primary></indexterm> ??????? Windows 9x/Me ? NT4 (? ????? ??????? ??????) ?? ?????? ????????? ? ????? ? ??? ?? ?????, ?????????  NT4 ? ????? ??????? ?????? ????? ???????????? ? ?????????? ? ????????? ?? ?????????? ?????????.</para>

</sect3>
<sect3>
<title>?????????? ????????? ???????????? ????????</title>

<para><indexterm><primary>?????????? ???????????? ????????</primary></indexterm> ????? ?????????? ?????? <quote>??? ? ???? ?????? ????????????? ????????? ?????????</quote> ??? <quote>??? ? ???? ????????? ???????????? ????????</quote></para>

<para><indexterm><primary>???????????? ???????</primary></indexterm> ?????????? ??? ??????? ??????? ???:</para>

<indexterm><primary>????????? ??????? Windows</primary><secondary>???????????? ???????</secondary></indexterm>

<variablelist>
	<varlistentry>
		<term>? &smb.conf;</term>:
		<listitem><para>???????? ????????? ?????????, ? ??? ??????? ????? ??????????? ?? ????????????? ?????????? ???????: <smbconfoption name="logon home"> </smbconfoption> ? <smbconfoption name="logon path"> </smbconfoption></para>

		<para>????????? ???? ?????????? ?????? ???? ???????. ?????????? ???????????? ???? ????????? <constant>=</constant>, ????? ????? ??????? ?? ?????? ????????.</para></listitem>
	</varlistentry>

	<varlistentry>
		<term>?????? MS Windows:</term>
		<listitem><para><indexterm><primary>MMC</primary></indexterm><indexterm><primary>????????? ???????</primary></indexterm> ??????????? Microsoft Management Console (MMC) <command>gpedit.msc</command>, ????? ????????? ???? ?????? ? MS Windows XP ???????????? ?????? ????????? ???????. ???, ???????, ???????? ????????? ? ???????. ?????? ???? ? ?????????: <screen>
Local Computer Policy\
	Computer Configuration\
		Administrative Templates\
			System\
				User Profiles\

?????????: ????????? ?????? ????????? ??????? 
?????????: ????????????? ??????? ????????? ????????????? ??????? ?? ??????
</screen></para></listitem>
	</varlistentry>

	<varlistentry>
		<term>????????? ???? ???????</term>
<indexterm><primary>???? ????????</primary></indexterm>
		<listitem><para>? ???? '????' ???????? ?????? ??????? ?? <guiicon>??? ?????????</guiicon>, ???????? <guimenuitem>????????</guimenuitem>, ???????? ?? ???????? <guilabel>??????? ?????????????</guilabel>, ???????? ???????, ??? ???????? ?? ?????? ???????? ? <guimenu>????????????</guimenu> ?? <guimenu>?????????</guimenu>, ? ???????? ?? <guibutton>???????? ???</guibutton>.</para></listitem>
	</varlistentry>
</variablelist>

<para>?????????? ? ??????????? ?? ??????? MS Windows ????? ?????????? ?????? ?? ?????????? ???????????, ?????????? ????, ????? ????? ??????? ??????? ????????, ????? ????????????? ???????????? ?????? ????????? ????????. </para>

<note><para><indexterm><primary>Windows Resource Kit</primary></indexterm> ????????? ?????????????? ?????????? ??????? ? ???????????? ? ???????? ???????????, ? ??????????? ?? ????, ????? ?????? MS Windows ?? ???????????. ??????????????????? ?  Microsoft MS Windows Resource Kit ????? ?????? Windows ??? ?????????? ??????????.</para></note>

</sect3>
</sect2>

<sect2>
<title>?????????? ? ????????? ???????? ??????? Windows</title>

<sect3>
<title>????????? ???????? Windows 9x/Me</title>

<para>????? ???????????? ?????? ? ???? ?? Windows 9x, ????????? ???? user.DAT, ??? ??, ??? ? ????? <filename>??????? ????</filename>, <filename>??????? ????</filename>, <filename>?????????</filename> ? <filename>??? ????</filename>. ??? ???????? ? ?? ?????????? ????? ?????????? ? ?????????? ????????, ??????????? ? <filename>c:\windows\profiles\username</filename>, ??? ??????????? ??????, ??????? ????? ?????? ??????. ??? ?????????? ???????????? ????? ?????? <smbconfsection name="[global]"/> <smbconfoption name="preserve case">yes</smbconfoption>, <smbconfoption name="short preserve case">yes</smbconfoption> ? <smbconfoption name="case sensitive">no</smbconfoption> ??? ????, ????? ????????? ????????? ????? ? ??????? ? ????? ?????? ???????.</para>

<para><indexterm><primary>user.DAT</primary></indexterm><indexterm><primary>user.MAN</primary></indexterm> ???? <filename>user.DAT</filename> ???????? ??? ???????????? ????????????. ???? ?? ?????? ????????????? ???????????? ????? ????????????, ???????????? ???? <filename>user.DAT</filename> ? <filename>user.MAN</filename>, ? ????????? ?????? ?? ?????? ? ????? ?????.</para>

<orderedlist>
	<listitem> <para>?? ?????? Windows 9x/Me ????????? ? <guimenu>?????? ??????????</guimenu> -&gt; <guimenuitem>??????</guimenuitem> ? ???????? ???????? <guilabel>??????? ?????????????</guilabel>. ???????? ??????????? ??????? ???????? ???????????. ??????? <guibutton>OK</guibutton>, ?? ?? ?????????? ?????????? ???????????????.</para> </listitem>

	<listitem> <para>?? ?????? ? Windows 9x/Me ????????? ? <guimenu>?????? ??????????</guimenu> -&gt; <guimenuitem>????</guimenuitem> -&gt; <guimenuitem>?????? ??? ????? Microsoft</guimenuitem> -&gt; <guilabel>?????????</guilabel>. ???????? <guilabel>??????? ? ????? Windows NT</guilabel>. ????? ?????????, ??? ? ???????? ?????????? ????? ??????? <guilabel>?????? ??? ????? Microsoft</guilabel>. ??????? <guibutton>OK</guibutton>, ? ? ???? ??? ????????? ?????????? ???????????????.</para> </listitem>
</orderedlist>

<para><indexterm><primary>???????? ????</primary></indexterm><indexterm><primary>?????? ??? ????? Novell</primary></indexterm><indexterm><primary>Novell</primary></indexterm><indexterm><primary>???? ? Windows</primary></indexterm> ? Windows 9x/Me ??????? ??????????? ?? ????????? ?????.  ???? ??? ???????? ???? - <quote>?????? ??? ????? Novell</quote>, ?? ??????? ? ???????? ????? ????? ??????????? ? ??????? Novell. ???? ??? ???????? ???? - <quote>???? ? Windows</quote>, ?? ??????? ????? ??????????? ? ????????? ?????? &smbmdash; ????????? ???????????? ????????? ???????????? ????????!</para>

<para><indexterm><primary>?????? ????? ? ?????</primary></indexterm> ?????? ?? ??????????, ??? ?????????? ???? "???? ? ???? Microsoft" ???????? <constant>[????????????, ??????, ?????]</constant> ?????? ??????? <constant>[????????????, ??????]</constant>. ??????? ??? ?????? ??????? Samba (??? ?????? ??????? ????????????? ??????, ?? ?????? ? ????, ??? ???????????? ????? ???????????????? ?????? ? ???? ??????, ? ?????? ?? ???? ????? ??????????? ??????? - ???? ??????? ????? ????? ?????? ???????????? ???), ??? ???????????? ? ??? ??????.</para>

<para>????? ???????? ???????? ?????? ?????? ? Windows 9x/Me ??????????? ??? ? ???, ??? <computeroutput>???? ???????????? ?? ??????????? ??????????? ??????</computeroutput> ? ???????, ?? ???? ?? <computeroutput>???????
??????? ?????? ??? ?????</computeroutput> ???????? <guibutton>??</guibutton>.</para>

<para>????? ????, ??? ?????? Windows 9x/Me ???????? "??????? ????" ?? ?????? ????? ??????????? ??????????? ?????????? ????????, ?????????? ? ????????? <smbconfoption name="logon path"/> ?? ??????? Samba, ? ?????????, ??? ???????? <filename>??????? ????</filename>, <filename>??????? ????</filename>, <filename>?????????</filename> ? <filename>??? ????</filename> ???? ???????.</para>

<para><indexterm><primary>cached locally</primary></indexterm><indexterm><primary>shortcuts</primary></indexterm><indexterm><primary>profile directory</primary></indexterm> ??? ???????? ????? ???????????? ????????, ? ??????????? ?? ??????? ????? ?????? ???????????? ?? ??????? (???? ?? ?? ?????????? ?? ??? ?????? ?????? ??? ??????). ?? ??????????, ??? ???? ???????????? ??????? ????? ??? ?????? ?? "??????? ?????", ?????? ????????? ?????????? ???????????? ??????? ? ?????????? ???????? ??????? ?? ????????? ???????, ??????? ????? ????? ?????? ? ????? ?? ??????? ??????.</para>

<para><indexterm><primary>????????? ???????</primary></indexterm><indexterm><primary>????????? ???????</primary></indexterm><indexterm><primary>????? ????????</primary></indexterm><indexterm><primary>??????? ???????</primary></indexterm> ???? ?? ??????? ????????/????? ?? ??????? Samba ?????? ??? ??????, ?? ?? ???????? ?????? ?? ?????? Windows 9x/Me ??? ????? ? ??????, ????????? ??????? ????? ???????? ?????????? ????????? ? ????????? ???????. ? ????????, ???? ?????? Windows 9x/Me ???????? ?? ???????, ????????? ???????? ?????????? UNIX ? ????? ???????? ??????????? ???????? ??????? ?? ??????? Samba.</para>

<para><indexterm><primary>????????? ??????? windows</primary></indexterm><indexterm><primary>???? ? ???????</primary></indexterm><indexterm><primary>??????? ?????????????</primary></indexterm><indexterm><primary>??? ??????? ?????</primary></indexterm><indexterm><primary>????????? ??????? windows</primary><secondary>???? ? ???????</secondary></indexterm> ???? ? ??? ???? ???????? ? ????????? ???????? ????????????, ?? ?????? ???????? ????????? ??? ???????? ?????, ???, ??? ???????? ????. ????? ???? ???????????? ?????? ? ??????? ? ????????? ???, ?? ??????? ????????? ? ???, ??? ?? <quote>????? ? ??????? ? ?????? ???</quote>.</para>


<orderedlist>
	<listitem><para>?????? ????? ? ??????? [????????????, ??????, ?????] ??????? <guibutton>escape</guibutton>.</para> </listitem>

	<listitem><para>????????? ????????? <command>regedit.exe</command> ? ?????????? ?:</para>

	<para>
	<filename>HKEY_LOCAL_MACHINE\Windows\CurrentVersion\ProfileList</filename>
	</para>

	<para>?? ?????????? ?????? ProfilePath ? ?????????? ??? ??????? ????????????. ???????? ??? ???? ?????????? ????? ????? (?????? ?????, <filename>c:\windows\profiles\username</filename>), ????? ??????? ???? <parameter>ProfilePath</parameter> ??????? ????????????.</para></listitem>

	<listitem><para>??????? ?? ????????? ???????.</para></listitem>

	<listitem><para>??????? .PWL-???? ????????????, ???????? ???????????? ??????, ? ???????? <filename>c:\windows</filename> (??? ???????), ? ??????? ???.</para></listitem>

	<listitem><para>??????? ?? ??????? Windows 9x/Me.</para></listitem>

	<listitem><para>????????? ?????????? ???? ? ??????? (??. <smbconfoption name="logon path"/>, ????????? ????) ? ??????? ???? <filename>user.DAT</filename> ??? <filename>user.MAN</filename> ????????????; ??? ????????????? ???????? ????????? ?????.</para></listitem>
</orderedlist>

<warning><para><indexterm><primary>ProfilePath</primary></indexterm> ????? ????????? ??????????? ????????, ?????????? ? <parameter>ProfilePath</parameter> (?????? ?????, ??? <filename>c:\windows\profiles\username</filename>), ???????? ????????? ???????, ???? ?? ? ????/??? ?????? ?????, ?????????? ?? ???/?? ??????? ????? ??? ??????? ????. ??????? ?????????? ???????? <parameter>ProfilePath</parameter> (???????? ????????? ?????, ???? ?????????? ????? ?? ???? ??????).</para>

<para>??? ???????? ? ???????? ?????????? (??????????? ?????????? ????? ??????-???-??????) <filename>user.DAT</filename> ? ???????? ? ????????, ??? ??, ??? ? ????????? ????????? <quote>??????? ????,</quote><quote>??? ????,</quote><quote>??????? ????,</quote> ? <quote>?????????</quote>.</para></warning>

<para><indexterm><primary>log level</primary></indexterm><indexterm><primary>??????????? ???????</primary></indexterm><indexterm><primary>ethereal</primary></indexterm><indexterm><primary>netmon.exe</primary></indexterm> ???? ?????? ?????? ?? ????????, ????????? ??????? ??????? (log levels) Samba ?? ????? ????? 3 ? 10 ?/??? ????????? ????????? ????????? ???????, ????????, ethereal ??? <command>netmon.exe</command>, ? ????? ????????? ?? ???????.</para>

<para><indexterm><primary>???????????? ???????</primary></indexterm><indexterm><primary>packet trace</primary></indexterm> ???? ? ??? ???? ?????? ? ??????? Windows NT4/200x, ?? ??????? ?????????? ???????????? ??????? ?/??? ????? ?????? netlogon (?????? ??? ????? ? ????) ?? ??????? Windows NT4/200x. ???????? ?????? ??????? ??? ????????? ??????? ?????????, ???????????? ? ???????? Windows NT4/200x, ? ?????????, ??? ?????????? ? ????????????? ?????????? Samba.</para>

</sect3>

<sect3>
<title>Windows NT4 Workstation</title>

<para>????? ???????????? ??????? ?????? ?? ??????? ??????? Windows NT, ????????? ??????? NTuser.dat. ?????? ????? ??????? ???????????? ??????? ????? ???????? <smbconfoption name="logon path"/>.</para>

<para>?????????? ????????, ??????? ?????? ???????? ? ??? ????????????? ? ????????? NT: <smbconfoption name="logon drive"/>. ??? ?????????? ?????????? ? <filename>H:</filename> ??? ????? ?????? ????, ? ???????????? ?????? ? ????? ?????????? <smbconfoption name="logon home"/>.</para>

<para><indexterm><primary>?????????? .PDS</primary></indexterm><indexterm><primary>???? ? ???????</primary></indexterm> ????????? ?????? ???????? NT4 ???????? ?? ????, ? ???????. ?????? NT ?? ???????? ????????? ? ???, ??? ????? ????????? ??????? ? ??????????? .PDS. ???????????? ??? ????? ?????? ????? ?????????? ?? ??????, ??????????? ??? ????, ????? ??????? ?????? ???? ? ??????? (? ????? ? ??????????? .PDS - ? ??? ??????, ????? ??? ????? ???????????).</para>

<para><indexterm><primary>NTuser.DAT</primary></indexterm> ? ???????? ? ???????? Windows NT4 ??????? ?????? ?????, ??? Windows 9x/Me. ??? ??????? <filename>Application Data</filename> ? ??????, ??? ??, ??? ? <filename>??????? ????</filename>, <filename>??? ????</filename>, <filename>??????? ????,</filename> and <filename>?????????</filename>. ??? ?? ???? ??????? ???????? ? ????? <filename>NTuser.DAT</filename>. ??????? .PDS ?? ?????? ??????, ? ??? ?????????? ? ????????? ????? ??????????.</para>

<para><indexterm><primary>NTuser.DAT</primary></indexterm><indexterm><primary>NTuser.MAN</primary></indexterm> ?? ?????? ???????????? <application>????????? ?????? ??????????</application> ??? ??????????? ?????????? ??????? ?? ????? Samba (???????? ?????? NT ?? ????????; ??? ????? ????? ??????? ?????????? ????? ? <application>????????? ?????? ??????????</application> ??? ???). ???? ?????? NT ????? ?????????, ??? ?????????????? <filename>NTuser.DAT</filename> ? <filename>NTuser.MAN</filename> ?????????? ??????? ? ????????????.</para>

<para>??????? ??????? ????? ????????. ???? ?????? ?????????? <filename>NTuser.DAT</filename> ??? - ??? ????????????? ??????? - <filename>NTuser.MAN</filename>.</para>

</sect3>

<sect3>
<title>Windows 2000/XP Professional</title>

<para>?? ?????? ??????? ????????????? ??????? ?? ?????????? ? ???????? ?? ??????? ??????? MS Windows ????????? ???????:</para>

<procedure>
	<step><para>??????? ??? <emphasis>?????????</emphasis> ????????????? ??????? ???????.</para></step>

	<step><para>???????? ?????? ??????? ?????? <guiicon>??? ?????????</guiicon> ? ???????? <guimenuitem>????????</guimenuitem>.</para></step>

	<step><para>???????? ??????? <guilabel>??????? ?????????????</guilabel>.</para></step>

	<step><para>???????? ???????, ??????? ?????? ????????????? (???????? ??? ???? ???).</para></step>

	<step><para>???????? ?????? <guibutton>??????????/</guibutton>.</para></step>

	<step><para>? ??????? <guilabel>????????? ?????????????</guilabel> ???????? <guibutton>????????</guibutton>.</para></step>

	<step><para>???????? ?? ??????? <guilabel>?????? ?</guilabel>, ? ??????? ???????? ??? ??????. ????? ?? ???????? ???, ????????? ?????? ??????. ???????? ?? ??????, ??? ???????? ??????? ?????? ???? ?????????.</para>

	<note><para>??? ????? ?????????? ????? ? ????, ???? ????????? ?????? ?????. ????????, ??????????? ??? <replaceable>?????</replaceable>\root, ?????? <replaceable>???_??????</replaceable></para></note> </step>

	<step><para>????? ??????? ????????? ????????????? ??????? ??? ????,  ???????? <quote>Everyone</quote>.</para></step>

	<step><para>???????? <guibutton>OK</guibutton>, ? ???? ?????? ?????????.</para></step>

	<step><para>?????? ???????? <guibutton>OK</guibutton>, ????? ??????? ??????? ? ????, ??????? ?? ???????.</para></step>
</procedure>

<para>??????. ?????? ? ??? ???? ???????, ??????? ????? ????????????? ? ?????????????? ??????????? <command>profiles</command> Samba.</para>

<note><para>? Windows NT/200x ????????????? ???????????? ???????? ???????? ????????????? MS Exchange ??? ???????? ???????? ??????, ? ??? ?? ???????? ? ???????. ??? ???????????? ??????? ???????? ????? ?? ??????????? ? ?????????????.</para></note>

<sect4>
<title>Windows XP Service Pack 1</title>
	<para>? Windows XP (???, ????? ????, ?????? ? Windows XP service pack 1) ???? ????? ???????? ????????????. ??? ????? ???? ????????? ????????? ????????? Active Directory. ???????? ??????????: <screen>
???????????? ??????????\???????????????? ???????\???????\??????? ?????????????\
          ?? ????????? ???????? ??????? ???????????? ????????
</screen></para>

	<para>??? ???? ?????????? ?? <constant>????????</constant>.</para>

	<para>????? ?? ????? ?????? Samba ?????? Active Directory? ???? ??, ?? ?? ?????? ? ??? ??????? ?????????? ??? ????????.</para>

	<para>???? ?? ?? ?????? ????????????? ????????? ???????? ? Samba, ?? ?? ?????? ?????????? ???????? ???????? ?? ?????? ??????. ???? ?????? ???????????, ?? ?????????? ???:</para>


<procedure>
	<step><para>?? ??????? ??????? XP ??????? ? ???????????????? ??????? ???????.</para></step>

	<step><para>???????? <guimenu>????</guimenu> -&gt; <guimenuitem>?????????</guimenuitem>.</para></step>
	<step><para>???????? <command>mmc</command>.</para></step>
	<step><para>???????? <guibutton>OK</guibutton>.</para></step>
	<step><para>?????? ????????? Microsoft Management Console (??????? ?????????? Microsoft).</para></step>
	<step><para>???????? ?? <guimenu>????</guimenu> -&gt; <guimenuitem>????????/??????? ????????</guimenuitem> -&gt; <guimenuitem>????????</guimenuitem>.</para></step> 
	<step><para>?????? ???????? <guiicon>????????? ????????</guiicon>.</para></step> 
	<step><para>???????? ?? ?????? <guibutton>?????????</guibutton> -&gt; <guibutton>???????</guibutton>.</para></step> 
	<step><para>???????? <guibutton>OK</guibutton>.</para></step>
	<step><para>? ???? <quote>?????? ???????</quote> ?????????? <guiicon>???????? ?????????? ??????????</guiicon> -&gt; <guiicon>???????????? ??????????</guiicon> -&gt; <guiicon>???????????????? ???????</guiicon> -&gt; <guiicon>???????</guiicon> -&gt; <guiicon>??????? ?????????????</guiicon>.</para></step>
	<step><para>?????? ???????? ?? <guilabel>?? ????????? ???????? ??????? ????????????? ???????</guilabel>.</para></step>
	<step><para>???????? <guilabel>????????</guilabel>.</para></step>
	<step><para>???????? <guibutton>OK</guibutton>.</para></step>
	<step><para>???????? ??????? ???????. ??? ?? ????????? ????????? ????????? (??? ???????? ???????? ???????, ? ?? ???????, ??????? ?? ????????).</para></step>
	<step><para>???????????????.</para></step>
</procedure>
</sect4>
</sect3>
</sect2>

<sect2>
<title>?????? ??????? ???????????????? ????????</title>

<para>?????????? ????????? ????????, ??????? ???????? ? ????, ??? ???????????? ????????? ????? ????????????? ??????? ?? ????????? ??? ??????, ???? ???? ??????????? ????????, ??????? ????? ??????? ????????? ??????? ??? ??????. ????? ??????????? ? ?????? ??????????, ???? ??????? ??????????? ??????. ?????????? <command>UPHClean</command> (User Profile Hive Cleanup) ????? ???? ??????????? ??? ?????? ? Windows NT4/2000/XP Professional ? Windows 2003.</para>

<para>????? UPHClean ????? ????????? ? ???-????? User Profile Hive Cleanup Service<footnote>http://www.microsoft.com/downloads/details.aspx?FamilyID=1B286E6D-8912-4E18-B570-42470E2F3582&amp;displaylang=en</footnote>.</para>

</sect2>

<sect2>
<title>????????????? ?????? ??????? ? ???????? ????????? Windows 9x/Me ? NT4/200x/XP</title>

<para><indexterm><primary>????????????? ????? ????????</primary></indexterm><indexterm><primary>?????????? ???????</primary></indexterm> ????????????? ?????? ??????? ??? ?????????? ?????? Windows ?? ?????????????. ??????? ???????? ????? - ?????????? ???????, ? ??????? ??? ??????? ?????? ???????? MS Windows ????????? ???????????, ??????? ????? ????????????????? ? ??????? ???????? ???????? MS Windows. ????????, ??? ???????? ???????? ??????? ?? ????????? ???????: ??? ?????? ?? ?????? ?????? MS Windows, ?????? ?????? ??????????? ??????? ????? ?????????? ??????????, ??????? ??????????? ????? ??????, ??????? ??? ????? ? ?????? ??????????, ???????????? ? ???????, ??? ????? ? ????? ????? ?????? MS Windows.</para>

<para>???? ?? ???-???? ?????? ???????????? ????? ???? ???? ? ??????? ???? ? Windows 9x/Me, ?? ?????? ??????? ????? ????? ??? ????????. ????????? &smb.conf;, ??????? ?????? ???? ??????????? ????????? -  <smbconfoption name="logon path"/> ? <smbconfoption name="logon home"/>.</para>

<para><indexterm><primary>user.DAT</primary></indexterm><indexterm><primary>NTuser.DAT</primary></indexterm> ???? ?? ?????????? ??? ?????????, ?? ?????????? ????????? ????? <filename>user.DAT</filename> ? <filename>NTuser.DAT</filename> ? ????? ???????? ? ?????????.</para>

</sect2>

<sect2>
<title>??????? ???????? ? ??????? Windows NT4/200x ?? Samba</title>

<para><indexterm><primary>????????????? ??????</primary></indexterm> ????? ?? ???????????? ??? ??????? ????? ????, ??????? ?? ??????, ??? ?????????? ???????? ?????????????. ?????????????, ?? ????? ?? ???????, ??? ??????? ???????? ?? ??????? Samba ??? ????? ?????? ??????? SMB, ?? ??????? ????, ???? ???? ?????? SMB ???????????? ????????????? ??????.</para>

<sect3 id="profilemigrn">
<title>??????????? ?????????? ????????? Windows NT4</title>

<para><indexterm><primary>resource kit</primary></indexterm> ? ?????????, ?????????? ?? resource kit ???????? ??????????? ??? MS Windows NT4/200x. ?????????? resource kit ????????? ??? ?????? ?????????.</para>

<para>??? ??????? ???????????:</para>

<procedure>
<title>????????? ???????? ????????</title>

	<step><para>?? ????? ??????????? ?????? NT4 ???????? ?????? ??????? ?? <guiicon>??? ?????????</guiicon>, ????? ???????? <guilabel>????????</guilabel>, ????? ???????? <guilabel>??????? ?????????????</guilabel>.</para></step>

	<step><para>???????? ??????? ????????????, ??????? ?????? ?????????, ? ???????? ?? ???.</para>

	<note><para>? ????????? ????????? <quote>???????</quote> ?? ?????? ?????. ?? ?????? ??????????? ???????, ????? ??????? ????????? ???????. ?? ?????? ???? ???????????? <parameter>???</parameter> ????? ?? ???????, ? ??????? ?? ?????????. ?????? ??? ??? ???? ???????, ?????? ??? ??? ????? Samba ?? ????????? ? ????????????? ?????????? ? ????? PDC NT4.</para></note></step>

	<step><para>???????? ?????? <guibutton>??????????/</guibutton>.</para></step>

	<step><para>? ??????? <guilabel>??????????? ??????? ?</guilabel> ???????? ??? ????? ????, ????????, <filename>c:\gde_to\chto_to</filename></para></step>

	<step><para>???????? ?? <guibutton>????????</guibutton> ? ?????????? ????  <guilabel>????????? ?????????????</guilabel>.</para></step>

	<step><para>???????? ?? ?????? <quote>???</quote>, ???????? ?? <guibutton>OK</guibutton>. ??? ??????? ?????????? ???? <quote>???????? ????????????</quote>.</para></step>

	<step><para>?????? ???????? <guibutton>OK</guibutton>.</para></step>
</procedure>

<para>?????????? ??? ??? ???? ????????, ??????? ?????????? ?????????.</para>

</sect3>

<sect3>
<title>??????? ?? ?????</title>


<para><indexterm><primary>SID</primary></indexterm><indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>info</tertiary></indexterm> ??? ?????????? ?????? SID ?????? ?????? NT4. ?? ?????? ??????????? ??? ????? <command>net rpc info</command>. ???????? <link linkend="NetCommand">??????? Net</link>, <link linkend="netmisc1">?????? ?????? ????????</link> ??? ??????? ??????????.</para>

</sect3>

<sect3>
<title>moveuser.exe</title>

<para><indexterm><primary>moveuser.exe</primary></indexterm> ? Windows 200x professional resource kit ???? <command>moveuser.exe</command>. <command>moveuser.exe</command> ???????? ???????????? ??????? ? ?????? ???????????? ?? ???????. ??? ????????? ?????? ??????? ?????? ?????? ??? ??? ????????????.</para>

<para>??? ??????? ?????? ?? ??????? Samba <command>profiles</command>.</para>

</sect3>

<sect3>
<title>???????? SID</title>

<para><indexterm><primary>SID</primary></indexterm><indexterm><primary>GetSID.exe</primary></indexterm> ?? ?????? ?????? SID ? ??????? ??????? <command>GetSID.exe</command> ?? Windows NT Server 4.0 Resource Kit.</para>

<para>Windows NT 4.0 ?????? ?????????? ? ????????? ???????? ? ??????? ?? ?????????? ????: <filename>HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\ProfileList</filename></para>

<para>? ??????? ProfileList ????? ??????????, ????????? ?? SID'?? ?????????????, ????????? ?? ???? ?????????. (????? ????? ?????????? ? ??????? ????????????, ??? ???????? ???????????? ??????? ?? ?????? ???????????, ?????????? SID ???????????? ???????? <command>GetSID.exe</command>.) ?????? ?????????? ???????????????? ???????????? ?? ??????? ????????? ????????, ????????? <parameter>ProfileImagePath</parameter>.</para>

</sect3>
</sect2>
</sect1>

<sect1>
<title>???????????? ???????</title>

<para><indexterm><primary>???????????? ???????</primary></indexterm> ???????????? ??????? - ???????, ??????? ?? ????? ???? ????????? ?????????????. ?? ????? ?????? ???????????? ????? ???????? ????????? ?????????; ?????? ??? ?????? ???????????? ?? ??????? ??? ????????? ????????? ????? ???????. ???? ?????????? ?? ????????? ???????????? ?????? ???????? ????????? ???????? ?????, ?? ??? ?????? ???? ??????? ??? ?????? ????????? ????????. ?????? <link linkend="PolicyMgmt">???????? ??????? ? ??????? ???????</link>.</para>

<note><para><indexterm><primary>?????? ????????? ??????????</primary></indexterm><indexterm><primary>?????? VFS</primary></indexterm><indexterm><primary>fake_perms</primary></indexterm>?? ??? ????? ???????? ??????? ? ???????? ??? ??? ?????????? ?? ?????? ???????? ??????-???-??????, ????????? ??? ????? ??????? ????????????? ??????? ???????????. ???? ?????????? ??????? ??????? ??????-???-?????? ? ???????? ??????? UNIX, ??? ????? ???????, ?? ? ???? ?????? ??? ????????? ????????? ?????? VFS <command>fake-permissions</command>, ????? ??????? ???????? MS Windows NT/200x/XP, ??? ? ???????????? ???? ?????????? ?? ?????? ? ???????. ????????  <link linkend="fakeperms">?????? VFS fake_perms</link>.</para></note>

<para><indexterm><primary>NTUser.MAN</primary></indexterm><indexterm><primary>NTUser.DAT</primary></indexterm> ??? MS Windows NT4/200x/XP ?????????, ?????????? ? <link linkend="profilemigrn">??????? ??????? ? ??????? Windows NT4/200x ?? Samba</link>, ????? ????? ?????????????? ??? ???????? ???????????? ????????. ????? ????????????? ????????? ??????? ? ????????????, ?????? ??????? ???? <filename>NTUser.DAT</filename> ? ????????????? ??????? ? ???????????? ??? ? <filename>NTUser.MAN</filename>.</para>

<para><indexterm><primary>User.MAN</primary></indexterm> ??? MS Windows 9x/Me ?????? ???? <filename>User.DAT</filename> ?????????? ????????????? ? <filename>User.MAN</filename>, ????? ???????? ? ?????????? ???????????? ???????.</para>

</sect1>

<sect1>
<title>???????? ? ?????????? ?????????? ?????????</title>

<para><indexterm><primary>????????? ???????</primary></indexterm><indexterm><primary>??????</primary></indexterm><indexterm><primary>?????????? ??? ???????? ????????</primary></indexterm><indexterm><primary>????? ??????? ? ???????</primary></indexterm> ??????? ????? ??????????? ??????? ?? ???????. ? ???? ????? ???? ???????? ??????, ????????? ?????? ???????????? ? ???????????? ????????? ? ????? ? ??? ?? ??????????? ? ??????????? ???????? ?????. MS Windows NT4/200x/XP ????????? ???????????? ????????? ???????. ????????? ??????? - ??? ??????, ??????? ??????? ????????? ? ?????????????? ?????????? (??????????) ????????????.  ????? ? ?????????????? ??????????? ??? ???????? ???????? (?????? ????) ??????? ??????????? ????? ??????? ?????? ?????????????, ??????? ????? ????? ?????? ? ?????????? ???????.</para>

<para><indexterm><primary>User Manager</primary></indexterm> ????????? ??? ????? ?????. ?????? ?????????? ?????????? ??????? ????????????? (? ?????????????? User Manager) ?? <quote>??-????????????????</quote> ??????, ???????????????? ??????? ??????????? ????? ??????.</para>

<note><para>?????? ????????? ? ?????????? ?????????. ???? ????????????, ???????? ? ??????, ????? ???? ?????? ???????, ??????????? ????? ????? (???????) ???? ????????.</para></note>

</sect1>

<sect1>
<title>??????? ?? ????????? ??? ????????????? Windows</title>

<para><indexterm><primary>??????? ?? ?????????</primary></indexterm><indexterm><primary>????? ???????</primary></indexterm> MS Windows 9x/Me ? NT4/200x/XP ????? ???????????? ??????? ?? ????????? ??? ???? ??? ?????????????, ??????? ?? ????? ????????????? ???????. ???????????? ??????? ? ????? ???????????? ???????? ?? ????????? ?? ??????? ??????? Windows ? ????, ????? ????? ??????? ?????? ?? ????, ?? ???????? ????????? ??????? ?? ?????????, ????? ?????????????? ??????? ?? ???, ??????? ??? ????????????? ??? ???????????. ??? ???? ???????????? ???????????????? ????????????.</para>

<sect2>
<title>MS Windows 9x/Me</title>

<para><indexterm><primary>???????? ????????? ???????</primary></indexterm><indexterm><primary>??????</primary></indexterm> ????? ???????? ??????? ?? ????????? ? Windows 9x/Me, ?? ?????? ???? ???????????? <application>???????? ????????? ??????? Windows 98</application>, ???? ???????? ?????? ????????.</para>

<para>????? ???????? ????????? ???????????????? ???????? ?? ????????? ? Windows 9x/Me, ????????? <application>System Policy Editor</application>, ????? ???????? <guimenu>????</guimenu> -&gt; <guimenuitem>??????? ??????</guimenuitem>. ????? ???????? ?????? <guiicon>????????? ?????????</guiicon>, ???????? ?? <guilabel>??????? Windows 98</guilabel>, ???????? <guilabel>??????? ?????????????</guilabel>, ? ???????? ?? ?????? ?????????. ?? ???????? ????????? ????????? ? ???????.</para>

<para><indexterm><primary>regedit.exe</primary></indexterm> ????? ???????? ?????? ????????, ????????? <application>???????? ???????</application> (<command>regedit.exe</command>) ? ???????? ????? <filename>HKEY_LOCAL_MACHINE\Network\Logon</filename>. ?????? ???????? ???? ???? DWORD ? ?????? <quote>User Profiles.</quote> ????? ???????? ??????? ?????????????, ?????????? ???? ???? ? 1; ????? ????????? - ? 0.</para>

<sect3>
<title>?????? ? ????????? Windows 9x/Me</title>

<para>??? ????? ???????????? ?? ?????? Windows 9x/Me???? ? ????????? ???????? <filename>HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\ProfileList</filename> ??????????? ?? ??????? ??????? ?????? ??? ????? ????????????.</para>

<para>???? ? ???????????? ???? ?????? ? ???? ????? ???????, Windows 9x/Me ????????? ??????? ???????? ???????????? ?????? ??????? ????????????. Windows 9x/Me ????? ????????? ???????? ??????? ???????????? (??? ?????? ????????? ???????, ???? ?????????????? ???? ????????) ?? ??????? ?? ??????? ??????? ????????????. ???? ??????? ?????????? ? ????? ??????, ????? ?????????????? ????? ????? ?? ????. ???? ??????? ???????????? ?????????? ?? ??????? ? ??????????? ?? ????????? ??????, ??????????? ? ???????????? ??????? ? ???????. ???? ??????? ???????????? ?????????? ?????? ?? ????????? ??????, ???????????? ??? ?????.</para>

<para>???? ??????? ???????????? ?? ?????? ?? ? ????? ?? ????, ??????? ???????????? ?? ????????? ? ?????? Windows 9x/Me ???????????? ? ?????????? ? ????? ?????, ????????? ??? ????? ????????????. ??? ?????? ????? ?????????, ??????? ?????? ????????????, ???????????? ? ????????? ??????? ????????????. ???? ? ???????????? ???? ???????????? ???????, ????????? ???????????? ? ??????? ???????????? ?? ???????.</para>

</sect3>
</sect2>

<sect2>
<title>MS Windows NT4 Workstation</title>

<para>?? MS Windows NT4 ??????? ???????????? ?? ????????? ????????? ? <filename>%SystemRoot%\Profiles</filename>, ??? ? ????????? ?? ????????? ???????????? ? <filename>C:\Windows NT\Profiles</filename>. ? ?????? ????????? ? ???? ???????? ????? ??? ????????: <filename>Administrator</filename>, <filename>All Users,</filename> ? <filename>Default User</filename>.</para>

<para>??????? <filename>All Users</filename> ???????? ????????? ????, ??????? ???????? ?????? ??? ???? ????????????? ???????. ??????? <filename>Default User</filename> ???????? ????????, ??????? ????????????? ??? ??????? ???????????? ? ??????????? ?? ?????????/????????? ????????? ???????.</para>

<para>????? ????? ???????????? ??????? ?????? ?? ?????? ? MS WIndows NT4, ????? ??????? ????????? ??:</para>

<itemizedlist>
	<listitem><para>????????? ??? ???? ?????????????</para></listitem>
	<listitem><para>???????? ???????????? ?? ????????? (???????? ???? <filename>NTUser.DAT</filename>).</para></listitem>
</itemizedlist>

<para><indexterm><primary>NTConfig.POL</primary></indexterm> ????? ???????????? ????????? ???? ? ???? ?? ?????? MS Windows NT4, ?????????? ?????????? ?????? ???????????? Microsoft, ??? ????????? ??????? ??????????? ????????? ????:</para>

<procedure>
	<step> <para>?????? ?????????? ?? ??????? ?????? ????????????, ?????????? ? ???????? ?????, ???????? ???????????? ??????? ???????? ????? ????????????. ???? ? ??????? ????? ???? ??? ?????? ????????? ??? ????? ????????????? ?? ??????? ????? ???????. ???? ? ?????, ????????? ????? ?? ??????? ?????? ????????????, ?????????? ???????, ?? ?? ?????????? ? <filename>%SystemRoot%\Profiles\%USERNAME%</filename>. ????? ???? ??????? ????????? ????????? ??????? <filename>All Users</filename>, ?????????????? ? <filename>%SystemRoot%\Profiles</filename>.</para> </step>

	<step> <para>???? ? ??????? ?????? ???????????? ?????? ???? ? ??????, ?? ? ????????? ????? ?? ?? ??????????, ?? ????????? ????? ??????? ? ???????? <filename>%SystemRoot%\Profiles\%USERNAME%</filename> ????? ?????? ??????? <filename>Default User</filename>.</para> </step>

	<step> <para><indexterm><primary>NTConfig.POL</primary></indexterm><indexterm><primary>NETLOGON</primary></indexterm><indexterm><primary>?????? ??????????????</primary></indexterm><indexterm><primary>?????? ?????</primary></indexterm><indexterm><primary>HKEY_CURRENT_USER</primary></indexterm> ???? ????? ?????? NETLOGON ?? ??????? ?????????????? (??????? ?????) ??????? ???? ??????? (<filename>NTConfig.POL</filename>), ?? ??? ?????????? ??????????? ? <filename>NTUser.DAT</filename>, ??????? ??????????? ? ????? ??????? <filename>HKEY_CURRENT_USER</filename>.</para> </step>

	<step> <para>??? ?????? ???????????? ?? ????, ???? ??????? ????????????, ?? ?? ???????????? ? ????? ???????????? ???????. ???? <filename>NTuser.DAT</filename> ???????? ????????? ?? ??????????? <filename>HKEY_CURRENT_USER</filename>. ????? ???????, ??? ????????? ????? ? ???? ???? ???? ?? ????? ??????? NETLOGON ??? ? ?? ?????????? <filename>NTConfig.POL</filename>, ???????? ??????????? <filename>NTConfig.POL</filename> ????? ??????????? ? ???????. ???? ?????? ???????? ??? ????????? (? ????????? - ???????????? - ????. ?????.).</para> </step>
</procedure>

<para>??????? MS Windows NT4 ????? ???? <emphasis>??????????</emphasis> ??? <emphasis>?????????????</emphasis>. ????????? ??????? ???????? ? <filename>%SystemRoot%\Profiles\%USERNAME%</filename>. ???????????? ??????? ????? ???????? ??? ?? ?? ??? ???, ???? ?? ????? ?????? ????????? ???? ???????: <screen>
HKEY_LOCAL_MACHINE\SYSTEM\Software\Microsoft\Windows NT\CurrentVersion\
winlogon\"DeleteRoamingCache"=dword:0000000
</screen> ? ???? ?????? ????????? ????? (? <filename>%SystemRoot%\Profiles\%USERNAME%</filename>) ????? ??????? ??? ?????.</para>

<para><indexterm><primary>regedt32</primary></indexterm> ? MS Windows NT4 ???????????? ?? ????????? ??? ????? ???????? ???? <filename>??? ?????????</filename> ????? ???? ?????????????? ?? ??????? ????? ?????? ???????????? ????????? ?????? ???????. ??? ????????? ????? ???? ??????? ? ?????????????? System Policy Editor (????????? ????????? ???????). ??? ?????? ????? ??????????? ?? ??? ???????? ???????????? ??????? ????????? ??? ????????? ???????, ????? ????? ??????????? ????????? ??? ?? ????????? ??????. ?????? ?????? ??????? ??? - ??????? ??????? ??????? ???????????? ?? ?????????, ?????, ????? ??? ?????? ????? ???????????? ? ???????, ????????? <command>regedt32</command> ??? ????????? ????????? ??????.</para>

<para>????? ???????, ??????? ?????? ?? ????????? ?????????, ?????????? ?????? ??????? ???????????? ?? ????????? ?? Windows NT4: <screen>
HKEY_CURRENT_USER
	\Software
		\Microsoft
			\Windows
				\CurrentVersion
					\Explorer
						\User Shell Folders
</screen><indexterm><primary>????????? ??????? Windows</primary><secondary>???????????? ??????? ?? ?????????</secondary></indexterm></para>

<para>????????????? ????? ??????? ???????? ?????? ????????????? ??????????? ????????? (? ????????? "?????" - ????. ?????.) ???????? ?????? ?? ????????? ???????? ? <link linkend="ProfileLocs">????????? ???????</link>.</para>

<table frame="all" id="ProfileLocs">
	<title>???????? ?? ????????? ?????? ? ????????????? ????? ????????</title>
	<tgroup cols="2">
		<colspec align="left"/>
		<colspec align="left"/>
	<thead>
		<row><entry>???</entry><entry>???????? ?? ?????????</entry></row>
	</thead>
	<tbody>
		<row><entry>AppData</entry><entry>%USERPROFILE%\Application Data</entry></row>
		<row><entry>??????? ????</entry><entry>%USERPROFILE%\Desktop</entry></row>
		<row><entry>?????????</entry><entry>%USERPROFILE%\Favorites</entry></row>
		<row><entry>??? ????</entry><entry>%USERPROFILE%\NetHood</entry></row>
		<row><entry>???????? ? ?????</entry><entry>%USERPROFILE%\PrintHood</entry></row>
		<row><entry>?????????</entry><entry>%USERPROFILE%\???? ????\?????????</entry></row>
		<row><entry>?????????</entry><entry>%USERPROFILE%\Recent</entry></row>
		<row><entry>?????????</entry><entry>%USERPROFILE%\SendTo</entry></row>
		<row><entry>???? ????</entry><entry>%USERPROFILE%\Start Menu</entry></row>
		<row><entry>????????????</entry><entry>%USERPROFILE%\Start Menu\Programs\Startup</entry></row>
	</tbody>
	</tgroup>
</table>

<para>???? ???????, ???????? ???????????? ????????? ???????? ???????: <screen>
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\
User Shell Folders
</screen></para>

<para>???????? ?????? ?? ????????? ???????? ? <link linkend="regkeys">????????? ???????? ?????? ??????? ???????? ???????</link>.</para>

<table frame="all" id="regkeys">
	<title>Defaults of Profile Settings Registry Keys</title>
	<tgroup cols="2">
		<colspec align="left"/>
		<colspec align="left"/>
	<tbody>
		<row><entry>????? ??????? ????</entry><entry>%SystemRoot%\Profiles\All Users\Desktop</entry></row>
		<row><entry>????? ?????????</entry><entry>%SystemRoot%\Profiles\All Users\Programs</entry></row>
		<row><entry>????? ???? ????</entry><entry>%SystemRoot%\Profiles\All Users\Start Menu</entry></row>
		<row><entry>????? ????????????</entry><entry>%SystemRoot%\Profiles\All Users\Start Menu\Programs\Startup</entry></row>
	</tbody>
	</tgroup>
</table>

</sect2>

<sect2>
<title>MS Windows 200x/XP</title>

<note><para><indexterm><primary>GPO</primary></indexterm><indexterm><primary>Windows XP Home Edition</primary></indexterm><indexterm><primary>ADS</primary></indexterm><indexterm><primary>???????????? ??????</primary></indexterm> MS Windows XP Home Edition ?????????? ??????? ?????????????, ?? ?? ????? ??????????? ? ???????????? ??????, ?? ????? ??????? ? ????? ???? NT/ADS ?, ????? ???????,  ????? ???????? ??????? ?????? ?? ????. ???????? ?? ??, ??? ? ????? ???? ???? ????????????, ??????? ??? ???????? MS Windows, ??????? ????? ??????????? ? ???????????? ??????, ?????? ? ???, ??? ??? ????????? ?????????????? ??????? ?????????? ??????? ?? ?????????, ? ???????????? ??? ????????????? ????? ??????? ????????? ???????? (Group Policy Objects - GPOs).</para></note>

<para><indexterm><primary>???????????? ?? ?????????</primary></indexterm> ????? ????? ???????????? ??????? ?????? ?? ?????? MS Windows 200x/XP, ??????? ?? ????????? ??????????? ?? <filename>C:\Documents and Settings\Default User</filename>. ????????????? ????? ?????????????? ??? ???????? ?????????? ????? ????????, ? MS Windows 200x/XP ? ???????? ????? ???????????? ???. ???? ?????? ????? ?? ????????????, ????????? ?? ????????? ??????????? ?????? ??????? ?? ????????? ?? ?????? ?????????? ??????? ??????? MS Windows 200x/XP.</para>

<para><indexterm><primary>NETLOGON</primary></indexterm> ????? MS Windows 200x/XP ????????? ? ????????? ???????????? ?????? ? ??????? ???????????? ?? ????????? ?? ??????, ?????? ????? ?????? ??????? ?? ????????? ? ????? ??????? NETLOGON ??????? ??????????????. ?? ????? MS Windows ??? <filename>%LOGONSERVER%\NETLOGON\Default User,</filename> ? ???? ??? ??????????, ??????? ????????? ??????? ?? ??????? ??????? ? <filename>C:\Documents and Settings\</filename> ??? ?????????????? ?????? ????? ? ???? Windows.</para>

<note> <para>???? ???? ??????????? ?? ???? Samba ? ????? ?????? &smb.conf;<smbconfsection name="[NETLOGON]"/>. ??????? ?????? ???? ?????? ??????????????? ? ???????? ???????? ?????? ???????, ? ?????? ?????????? <filename>Default User</filename>.</para> </note>

<para>???? ??????? ?? ????????? ?? ?????????? ? ???? ?????, ?? MS Windows 200x/XP ????? ???????????? ????????? ??????? ?? ?????????.</para>

<para>??? ?????? ???????????????? ??????? ???????? ????? ??????????? ? ????, ????????? ? ?????????? ???????, ?????????? ????? ????????????. ???? ?? ????? ???????? ????? ?????-???? ????????????? ???????? ?? ???? ??????? ??? ???????? ??????? (??? Samba ?????? ?????????????), ?? ??????? ???????????? ??????????? ?????? ?? ????????? ?????? ? <filename>C:\Documents and Settings\%USERNAME%</filename>.</para>

<para>???????? ???????? ????????? ?? ????????? ????? ??????? ??? ? ??????? ?????? ?? ???? ???????:</para>

<itemizedlist>
	<listitem> <para>???????? ????? ??????? ??????? ? ????????? ????? ??????? ?? ????????? ? ?????? ?????? ??????? NETLOGON. ??? ?? ?????????????, ????????? ??????? ???????????? ????????????.</para> </listitem>

	<listitem> <para>??????? ???? NTConfig.POL ? ????? NT4, ? ??????? ????? ??????? ??? ?????????, ? ??????????? ???? ???? ? ????? ?????? ??????? NETLOGON ?????? ? ????? ???????? ?? ?????????.</para> </listitem>

	<listitem> <para>???????? ?????? ????????? ????????, ??????? ????????????? ????????????? ??? ????? Active Directory,  ? ????????? ????? ??????? ?? ????????? ? ????? ?????? NETLOGON.</para> </listitem>
</itemizedlist>

<para>???? ???????, ??????? ???????????? ?? ????????? ?????????, ?????????? ?????? ??????? ???????????? ?? ????????? ? ?????????????? ???????? ? Windows 200x/XP:</para>

<para> <filename>HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\User Shell Folders\</filename> </para>

<para>???? ???? ??????? ???????? ?????? ????????????? ??????????? ?????????. ???????? ?? ????????? ???????? ? <link linkend="defregpthkeys">????????? ???????</link><indexterm><primary>????????? ??????? windows</primary><secondary>???????????? ??????? ?? ?????????</secondary></indexterm></para>


<table frame="all" id="defregpthkeys">
	<title>????????? ???????? ?????? ???????, ?????????? ???? ??????? Default User</title>
	<tgroup cols="2">
		<colspec align="left"/>
		<colspec align="left"/>
	<thead>
		<row><entry>???</entry><entry>???????? ?? ?????????</entry></row>
	</thead>
	<tbody>
		<row><entry>AppData</entry><entry>%USERPROFILE%\Application Data</entry></row>
		<row><entry>???</entry><entry>%USERPROFILE%\Local Settings\Temporary Internet Files</entry></row>
		<row><entry>Cookies</entry><entry>%USERPROFILE%\Cookies</entry></row>
		<row><entry>??????? ????</entry><entry>%USERPROFILE%\Desktop</entry></row>
		<row><entry>?????????</entry><entry>%USERPROFILE%\Favorites</entry></row>
		<row><entry>History</entry><entry>%USERPROFILE%\Local Settings\History</entry></row>
		<row><entry>Local AppData</entry><entry>%USERPROFILE%\Local Settings\Application Data</entry></row>
		<row><entry>Local Settings</entry><entry>%USERPROFILE%\Local Settings</entry></row>
		<row><entry>??? ???????</entry><entry>%USERPROFILE%\My Documents\My Pictures</entry></row>
		<row><entry>??? ????</entry><entry>%USERPROFILE%\NetHood</entry></row>
		<row><entry>Personal</entry><entry>%USERPROFILE%\??? ?????????</entry></row>
		<row><entry>???????? ? ?????</entry><entry>%USERPROFILE%\PrintHood</entry></row>
		<row><entry>?????????</entry><entry>%USERPROFILE%\???? ????\?????????</entry></row>
		<row><entry>?????????</entry><entry>%USERPROFILE%\Recent</entry></row>
		<row><entry>?????????</entry><entry>%USERPROFILE%\SendTo</entry></row>
		<row><entry>???? ????</entry><entry>%USERPROFILE%\Start Menu</entry></row>
		<row><entry>????????????</entry><entry>%USERPROFILE%\Start Menu\Programs\Startup</entry></row>
		<row><entry>Templates</entry><entry>%USERPROFILE%\Templates</entry></row>
	</tbody>
	</tgroup>
</table>

<para>?????????? ????? ?????? <quote>Default</quote>, ? ??????? ?? ??????????? ????????. ???? ??????? ????? ??? <constant>REG_SZ</constant>; ??? ????????? ????? ??? <constant>REG_EXPAND_SZ</constant>.</para>

<para>???? ???  ????? ???????? ? ?????????? ????? ?? ??????? ???????, ?? ??????????? ??????? ??????? ? ???????? ????????? ???????????? ???????? ?????????????. ??? ??????, ??? ??? ????????????? ?????? ???? PST Outlook'? ????? ???? ??? ?????? ????? ? ??????.</para>

<para>????? ?????????? ??? ? ??????? ????????????, ?? ????? ?? ???????????? ????????? ???????: <screen>
%LOGONSERVER%\%USERNAME%\Default Folders
</screen> ??? ????????? ????? ? ???????? ???????? ???????????? ? ????????, ????????? <filename>Default Folders</filename>. ?? ????? ????? ?? ????????????: <screen>
\\<replaceable>SambaServer</replaceable>\<replaceable>FolderShare</replaceable>\%USERNAME%
</screen></para>

<para>? ???? ?????? ????? ?? ????????? ???????? ?? ???????, ????????? <replaceable>SambaServer</replaceable> ? ????? ???????, ????????? <replaceable>FolderShare</replaceable> ? ????????, ????????? ?? ????? ???????????? MS Windows, ??????? ???????? ???????? Linux/UNIX.</para>

<para>??????????, ????????, ??? ???? ?? ??????? ????? ?????? ??? ??????? ?? ?????????, ?? <emphasis>??????</emphasis> ????????? ??????? ???????????? (?? ????????? ??? ???????????) ? ????.</para>

<para>??????? MS Windows 200x/XP ????? ???? <emphasis>??????????</emphasis> ??? <emphasis>?????????????</emphasis>. ???????????? ??????? ?????????? ???????? ?? ??? ???, ???? ?? ????? ?????? ???? ???????: <indexterm><primary>??????? ???????????? ???????</primary></indexterm></para>


<para> <programlisting> HKEY_LOCAL_MACHINE\SYSTEM\Software\Microsoft\Windows NT\CurrentVersion\
	winlogon\"DeleteRoamingCache"=dword:00000001</programlisting></para>

<para>? ???? ?????? ????????? ???????????? ????? ????? ??????? ??? ???????.</para> 
</sect2> 
</sect1>

<sect1> <title>????? ??????</title>

<para>????? ??????? ????????? ???????? ??????, ???????? ? ???????, ? ??????? ?????????? ? ?????? ???????? Samba.</para>

<sect2>
<title>????????? ???????????? ???????? ??? ?????????? ????????????? ??? ?????</title>

<para>? Samba-2.2.x ?? ????? ????????, ???????? ??? ????????? ????????? ???????????? ????????. ??? ????????? - ?????? ??????????. ???????? ?? ????????? - ???????????? ???????????? ???????, ? ???? ? ??? ?? ????????? - ???????? ??????? ????????????.</para>

<para>???? ????????? ?????????, ????? ?? ?????? ???????????? ???????????? ???????.</para>

<para>? Samba-3 ?? ?????? ????? ?????????? ????????? ???????? ? &smb.conf;, ? ?? ?????? ??????????? ?? ???????? ??? ??????? ???????????? ? ??????? Domain User Manager (??? ??, ??? ? MS Windows NT4/200x).</para>

<para>? ????? ?????? ?? ?????? ????????? ?????? ???? ??????? ??? ??????? ????????????. ???? ??????? ????? ????:</para>

<itemizedlist>
	<listitem><para>?????????? ??????? ??? ????? ????????????.</para></listitem>
	<listitem><para>???????????? ??????? (???, ??? ???????????? ?? ????? ????????).</para></listitem>
	<listitem><para>????????? ??????? (?? ????? ???? ?????? ???? ???????????? &smbmdash; ?? ???? ????????????).</para></listitem>
</itemizedlist>

</sect2>

<sect2> <title>????????????? ????????????? ???????????? ????????</title>

<para>???????????? ???????? ?????????: <quote> ? ?? ????, ????? ???????? ???????????? ???????. ? ????, ????? ? ????????????? ???? ?????? ????????? ???????. ? ????????? ? ???? ????????. ????????? ??? ??? ? ?????????? ???, ?????? ? ?????????, ?? ?? ????? ???????? ?????????. ??????????, ???????? ???. </quote></para>

<para>??? ??? ?????:</para>

<variablelist>
	<varlistentry>
		<term>????????? ???????</term> <listitem><para>??? ?? ???????? ? ?????? ???????, ??????? ??????? ?????????????? ???????? ????????? ???????? ????? ??????.</para></listitem>
	</varlistentry>

	<varlistentry>
		<term>???????????? ???????</term> <listitem><para>??? ????? ???????????? ? ???? ??????????????? ?????????? ??????? ?????????? ?? ??????? ???????, ???????? ????????? ???????. ???? ????????? ??????? ???????? (???????? ?? ????? ??????? ???????) ?? ??? ???, ???? ?? ????? ??????? ???? ???????, ??-?? ???????? ???? ??????? ????? ????????????? ?????? ??? ??????.</para></listitem>
	</varlistentry>
</variablelist>

<para>???????? ?????? ? ????????????? ?????????:</para>

<variablelist>
	<varlistentry>
		<term>?????? ???????????? ???????</term> <listitem><para>??? ?????? ???????? ?? ????? ??????? ? ????????? ?? ??????????? (??? ?????? ????????????? ?????????) ???????.</para>

		<para>??????? ??????? ???????? (??????) ????????? ????? ???????. ??? ???????????? ????? ????????????, ????? ??????? ?? ????? ???? ???????? ??? ????????? ????? ? ????.</para></listitem>
	</varlistentry>

	<varlistentry>
		<term>????????? ???????</term> <listitem><para>??? ??????????? ? ???????????? ??????? ????????.</para></listitem>
	</varlistentry>

	<varlistentry>
		<term>???????????? ???????</term> <listitem><para>???????????? ??????? ????? ???? ??????? ??? ????????????, ??? ??, ??? ? ??? ????? ??????, ?????????? ??????? ???????? ????????????. ???????????? ??????? ?? ????? ???? ???????? ???????? ??????????????. ?????? ????????????? ????? ???????? ??? ????????????? ???????????? ???????.</para></listitem>
	</varlistentry>
</variablelist>

<para>??????? Windows NT4/200x/XP ????? ??????????? ? ??????? ?? 130KB ?? ????? ????????. ????? PST Outlook ????? ???????? ?????? ??????? ? ????? ????? ? ??????? ????? ????????. ? ??????? (? ?????? ?????????????? ?????) ?????? ????????????? ??????? ? 2MB ???????? ???????? ???????? ???? - ??? ????????????? ? ????? ????????????. ? ???????????????????? ????????? ??? ??????????? ?????? ??????? ???????? ?? 2GB. ???????????? ???????? ??????????, ????? ???? ?? ??????? ??????? ???????? ????? ???, ?? ??? ???????? ????? ???????? (? ??????????).</para>

<para>???? ????? ?????????? - ????????, ??? ???????????? ??????? ? ??????? ?????????? ?? ???????????, ??? ??, ??? ? ??????? ??????????, ?????????? ????????????? ????.</para>

<para>????? Microsoft ?? ???????? PST - ???????? ???? ??????????? ????? ? ???? MS Exchange Server. ??? ??????? ????????????? ????? PST.</para>

<para>????????? ??????? ??????:</para>

<itemizedlist>
	<listitem><para>???? ?????? ?????? ???????????? ??????? ??????????????, ?? ????????? ????? ????????? ????????????.</para></listitem> <listitem><para>?????? ??????? ???????, ?? ??????? ?????? ????????????, ????? ???? ??????????? ???????; ??? ????? ?????? ??????????? ?? ?????? ? ??????.</para></listitem>
</itemizedlist>

<para>? ?????? ???????, ????????????? ???????????? ???????? ????????:</para>

<itemizedlist>
	<listitem><para>??????? ????????????? ????? ?????????????? ????????? "???????? ?????" ???? ?????????????.</para></listitem>
	<listitem><para>????????????? ???????????? ???????? ??????????? ????????? ????????? ??????? ?? ?????????? ?????.</para></listitem>
	<listitem><para>? ???????????? ??????????? ???????????? ???????? ?????? ??????????.</para></listitem>
</itemizedlist>

</sect2>

<sect2>
<title>????????? ??????? ?? ?????????</title>

<para><quote>????? ?????? ?????? ?? ?????????? ??????, ?? ???? ??????? ??? ????????. ???? ??? ??????? ????????? ???? ??????? ?? ?????????? </quote></para>

<para><indexterm><primary>??????? ?? ?????????</primary></indexterm> ??????? ?????? Samba ?????????? ????????? ??? ?????????? ??????. ??? ????? ??????? ?????????? ? &smb.conf;:</para>

<smbconfblock>
<smbconfoption name="security">????????????</smbconfoption>
<smbconfoption name="os level">32 (??? ?????)</smbconfoption>
<smbconfoption name="domain logons">??</smbconfoption>
</smbconfblock>

<para>?????? ???? ????? ?????? <smbconfsection name="[netlogon]"/>, ????????? ?? ?????? ??? ????. ??????? ???? - ???????? ???????? ?????, ????? ?????????????? ?????????? ? ????????? ? ???????? ???????. ????? ?????????? ??????????? ????????????? ???????????????? ???? ??????? ??????? ? ?????? ??????? ????? (??? ???? ??????? ????, ??????? ????? ???????).</para>

<note><para>????? ???????? ???????????? ???????????? ???????? ?? ?????????? ???? ??????? ??????? (????????? ?????????), ??????????? <application>Group Policy Editor</application>, ????? ??????? ???? <filename>NTConfig.POL</filename> ? ???????????????? ????????. ???? ???? ?????? ???? ?????????? ? ???????? ???????? ?????? ??????? <smbconfsection name="netlogon"/>.</para></note>

<para>??????? Windows ?????? ??????????? ? ??????. ?????? ??????? ????? ?? ?????????? ???? ? ????, ?????????????, ??? ?? ??????????????? ? ????????? ??????.</para>

<para>??? ???????????? ???????? ???????? ? &smb.conf;:</para>

<smbconfblock>
<smbconfoption name="logon path">\\%N\profiles\%U</smbconfoption>
<smbconfcomment>Default logon drive is Z:</smbconfcomment>
<smbconfoption name="logon drive">H:</smbconfoption>
<smbconfcomment>??? ???????, ????? ????? ?????? PROFILES ??? ???????? ?? ?????? ??? ????.</smbconfcomment>
</smbconfblock>

</sect2>

<sect2>
<title>??????? ???????????? ???????? ? ??????? ?????? ???? NT4.</title>

<para>????????? ???????????? ???????? ? ??????? ?????? ????????? ????? <command>USERENV.DLL</command>. ?????? Microsoft Knowledge Base articles <ulink url="http://support.microsoft.com/default.aspx?scid=kb;en-us;221833">221833</ulink> ? <ulink url="http://support.microsoft.com/default.aspx?scid=kb;en-us;154120">154120</ulink> ?????????, ??? ????????? ??? DLL ?????????? ??????? ?????.</para>

</sect2>
</sect1>
</chapter>
