<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE chapter PUBLIC "-//Samba-Team//DTD DocBook V4.2-Based Variant V1.0//EN" "http://www.samba.org/samba/DTD/samba-doc">
<chapter id="FastStart">
<chapterinfo>
	&author.jht;
</chapterinfo>

<title>??????? ?????: ????????? ?? ??????????</title>

<para>????? ?? ??????? ????????? ????????? ??? ????????? ? ???????????? Samba HOWTO, ???-?? ??????? ?????? ?? ????????? ???????????? &smbmdash; ?? ?????? ????????. ?????????? ????????, ??? ??? ?????? ??????? ??? ????, ????? ???????? ??????? ????????, ??????? ???????????? ???????? ?? ????? ?? ??????. ?????? ??? ? ?????? ?????????? ????? ????? ?????????. ??? ?????? ??? ? ???????????? ?????????? ????????? ???????? ? ????????? ?????, ??????? ???????? ?????? ??. ?? ????????, ??? ??? ????? ? ???? ?? ?????????. ??????? ???????????.</para>

<para>?????????? ? ???? ????? ????? ????? ???????????? ? ?????? <quote>Samba-3 by Example</quote>, ??????? ???? ???????? ????? ????, ??? ???????????? ?????? ???? ????? ???? ????? ?????????. <quote>Samba-3 by Example</quote> ???? ??????????? ???????? ????? ?? ??????????? ?? ????? ?????????????? ????????? ????? ?????? ????????. ?????????, ??? ?????? ?? ????????? ???????? ?????????? ??????? ?? ???????????. ? ????? ??????, ??????? ?????? ?????? ? ?????????? ???????? ????????????, ??? ????, ????? ??????, ??? ?? ????? ??????? ??? ??????? ??????? ???????????????, ??? ? ????????.</para>

<para>????, ?? ?????????????? ????? <quote>The Official Samba-3 HOWTO &amp; Reference Guide</quote> ???????????? ??????????? ?? ??????? ????????????. ????? <quote>Samba-3 by Example</quote> ????????????  ??????????? ??? ????????, ??????? ?????????, ??? ?????? ??????. ???? ?? ?????? ??????????? ???????? ????????? ????, ?????????? ? <ulink url="http://www.samba.org/samba/docs/Samba3-ByExample.pdf">Samba-3 by Example</ulink>.</para>

<sect1>
<title>??????????? ? ??????? ???????</title>

<para>??? ???????? ?????????? ?????????? ??????? Samba ????????? ? ????? ????????? ????????? . ? ???? ????? ?? ??????? ?? ???????? ? ????????, ?????????? ??? ???? ? ????????? ? ????? ????????, ????????? ??? ??????. ??????????, ????????, ??? ???????????? ??????????? ???????, ?????? ?????, ????? ????? ?????????????? ??????? ???????. ??? ?????????????? ??????? ??????????? ? ????????? ????? ????? ?????????.</para>

<para>???????, ?????????????? ?????, ???? ???????? ?? ???????? ????? ?????, ??????? ??????????? ??????? ????????. ???, ??????????? ? ???????? ????????????, ???? ??????, ????? ???????? ??????????, ? ????? ?????? ?? ??????????? ?????????????? ???? ???????????.</para>

</sect1>

<sect1>
<title>???????? ????????</title>

<para>? ?????? ?????? ????????? ???????? ?? ?????????? ?????? ????????????? ??????? ????????? ??????????. ???? ???????? ????????? ??????? ??? ?????? ??????? ??????? ? ????????? ??????. </para>

<para><link linkend="anon-ro"/> ????????? ??? ???????, ??????? ??? ?? ???? ??????????? ??? ??????? ??????? CD-ROM, ??? ??????? ?????????? ????????? ??? ????????????? ???????? ?????????. ??? ???????????? ????? ??????????? ? <link linkend="StandAloneServer"/>, <link linkend="RefDocServer"/>. ???? ???? ???????????? - ???????????? ??????????? ???? ??????-???-?????? ? ???????? ??? ????, ???? ??????.</para>

<para>?????? ?????? ?????????? ?????????? ???????????? ?????-???????, ?? ??????? ????? ???????? ?????, ??????? ?????????? ???????? ???????? ?? ????? ??????????. ????? ????? ??????? ??????? ?  <link linkend="StandAloneServer"/>, <link linkend="SimplePrintServer"/>.</para>

<para>? ????????? ??????? ?????? ?????????? ??????? ????- ? ?????-??????, ??????? ???????? ?????? ??? ?????????????, ?????????? ???????? ???????? ? ???????. ???? ???? ?????? ? ?????? ?????????? ????- ? ?????-?????? ??? ??????? ??????, ?? ?? ?????? ???? ????? ??????????, ??? ?????? ? ????????? ????????. ??????? ????? ???? ???????? ??? ????????? ?????????? ?????. ???? ?????? ?? ???????????? ??????????? ????? ? ???? ? ?? ????????? ?????????? ???????; ?????? ????? ?? ???????? ?????? ?????????? ? ???????? ?? ???? (NAS) ? ?????-????????.</para>

<para>? ????????? ??????? ??????????? ????? ??????? ???????, ??????? ???? ????????????? ? ???????????? ???? ?? ???? MS Windows, ???? ??????? ???????? ??. ??????? ??????? - ????????? ??????, ??? ??, ??? ? ??????????? ?????? ?? ???? Samba (PDC/BDC). ? ????????? ??????? ??????? ?????????????? ???? ? ?????????? ??????? .</para>

</sect1>

<sect1>
<title>??????? ???????</title>

<para>??????? ???????? ???????? ??? ???????????, ????? ????????? Samba. ??? ?? ?????????? ??????? ????????? ???????????? ???????, ??? ???? ??? ????? ????? ??????.</para>

<para>????? ??????????????, ??? Samba ??? ????????? ??????????, ???? ??????????? ??????? ?? ????????????? ???????????? ???????, ???? ??????? ??????????.</para>

	<sect2>
	<title>????????? ??????</title>

	<para><indexterm><primary>??? ???????</primary><secondary>?????????</secondary></indexterm> ????????? ?????? ???????????? ?? ?????, ??? ??????? ????, ??? ?? ?? ???????? ???????????? ??????, ?????????????, ?? ????????? ? ?????????? ???????.  ??? ????? ???? ??????? ?????? (??????? ?? ?????? ??? ??????? ??????), ??? ???????, ???????? ? ???????? ???????????? ??????.</para>

	<para>?? ???? ?????????? ???????? ??????????????? ??? ??????, ????? ????????? ??????? ? ??????? ????????????, ???????? ??? ??, ??? ????? ????????? ? ???????? ?????: ?? ???? ??? ????? ?????????? ?????????.</para>

		<sect3 id="anon-ro">
		<title>????????? ?????? ?????????? ??????-???-??????.</title>

		<para><indexterm><primary>??????-???-??????</primary><secondary>??????</secondary></indexterm> ???? ????? ???? ??????? - ??????? ?????????? ?????? ???????????? ????????? ??? ?????, ??????? ????????? ?? ????? ???????. ????? ?????? ????? ???? ??? ???????? ??? ???????? ??????, ??? ? CD-ROM??  ??? ??????? ???????-?????. </para>

		<itemizedlist>
			<listitem><para>???????????? ???????????? ??????? ? ???????? ??????? ????? <filename>/export</filename>.</para></listitem>

			<listitem><para>????? ??????? ????? ??????? ???????????? Jack Baumbach. ?????? ??? ??????? ?????? ????? <emphasis>jackb</emphasis>. ??? ?????? ????? <emphasis>m0r3pa1n</emphasis>&smbmdash; ???????, ??? ?????? ??? ???????; ?? ??????????? ???? ?????? ? ??????? ????? ?????? ??? ??? ???????? ????? ????????? ????? ????? ???.</para></listitem>
		</itemizedlist>

		<procedure>
		<title>????????? ?????????: ?????? ??????-???-??????</title>
			<step><para>???????? ???????????? ? ??????? (?????? ???????? ??????? ????????????): <screen>
&rootprompt;<userinput>useradd -c "Jack Baumbach" -m -g users -p m0r3pa1n jackb</userinput>
</screen></para></step>

			<step><para>???????? ??????? ? ?????????? ????? ???????? ? ???????: <screen>
&rootprompt;<userinput>mkdir /export</userinput>
&rootprompt;<userinput>chmod u+rwx,g+rx,o+rx /export</userinput>
&rootprompt;<userinput>chown jackb.users /export</userinput>
</screen></para></step>

			<step><para>?????????? ??? ?????, ??????? ????? ??????? ??????, ? ??????? <filename>/export</filename>.</para></step>

			<step><para>?????????? ???? ???????? Samba (<filename>/etc/samba/smb.conf</filename>) ???, ??? ???????? ? <link linkend="anon-example">????????? ??????? ??????-???-?????? ? ????????? ????????</link>.</para></step>

<example id="anon-example">
<title>????????? ??????? ??????-???-?????? ? ????????? ????????</title>
<smbconfblock>
<smbconfcomment>?????????? ?????????</smbconfcomment>
<smbconfsection name="[global]"/>
<smbconfoption name="workgroup">MIDEARTH</smbconfoption>
<smbconfoption name="netbios name">HOBBIT</smbconfoption>
<smbconfoption name="security">????? ??????</smbconfoption>

<smbconfsection name="[data]"/>
<smbconfoption name="comment">??????</smbconfoption>
<smbconfoption name="path">/export</smbconfoption>
<smbconfoption name="read only">??</smbconfoption>
<smbconfoption name="guest ok">??</smbconfoption>
</smbconfblock>
</example>

			<step><para>????????? ????????????, ???????? ?????</para></step>

			<step><para>????????? Samba, ????????? ??????, ?????????? ??? ????? ?????????. ??????, ??????? ??? ????? ???????, ??????? ?? ?????????. ?????????? ? <link linkend="startingSamba">????????? Samba</link> ??? ?????????? ??????????, ?????????? ??????? Samba.</para></step>

			<step><para>????????? ? ????? ??????? ??? ??????? ????? MS Windows ??????? ?????? <emphasis>MIDEARTH</emphasis>, ?????????? ??? ?????? <emphasis>ROBBINS</emphasis>, ??????????????? ?, ???????? ????????? (2 - 5) ?????, ???????? ????????? Windows. ?? ??????????? ??????? ?????????. ?????? ???? ????? ?????? HOBBIT. ????? ?? ???????? ?? ?????? ???? ??????, ??? ?????? ?????????, ????????? ????? ?????? <emphasis>data</emphasis>. ????? ?????? ?????? ?? ????? ?????? ???????, ?? ?????? ?????????, ????????? ?????, ????? ?????????? ? ??????? <filename>/export</filename>.</para></step>
		</procedure>

		<para>?????????? ???? (?????????? ?????????, ????????? ?? #), ???????? ?????? ??????????? ?????????? ?????.</para>

		</sect3>

		<sect3>
		<title>?????? ?????????? ? ????????? ???????? ? ???????????? ??????-??????</title>

		<para><indexterm><primary>?????????</primary><secondary>?????? ??????-??????</secondary></indexterm> ?? ?????? ????????????? ??? ???????????? ??? ??????????? ?? ????????? ? ?????????? ????????. ??????? ? ???, ??? ????? ?????? ?????? ?????????????? ?? ????? ???????????? jackb ? ??? ???????? ??????. ??? ???? ?????????, ??????? ?? ????? ??????? - ?????????? ???????? ???????????? <emphasis>jackb</emphasis> ? ???? <filename>smbpasswd</filename>. ??? ????? ?????????: <screen>
&rootprompt;<userinput>smbpasswd -a jackb</userinput>
New SMB password: <userinput>m0r3pa1n</userinput>
Retype new SMB password: <userinput>m0r3pa1n</userinput>
Added user jackb.
</screen> ?????????? ???????????? ? ???? <filename>smbpasswd</filename> ???????? ???? ?????? ???????????? ? ????? ??????? ?????????? ??? ????????????? ???????????? <emphasis>jackb</emphasis> ??????  <emphasis>User Unknown</emphasis> (??????????? ???????????? - ????.???.).</para>

		<para>?????????? ??????????? ???? &smb.conf; ??????? ? <link linkend="anon-rw"/>.</para>

<example id="anon-rw">
<title>?????????? smb.conf ??? ?????? ? ?????? ? ????????? ????????</title>
<smbconfblock>
<smbconfcomment>?????????? ?????????</smbconfcomment>
<smbconfsection name="[global]"/>
<smbconfoption name="workgroup">MIDEARTH</smbconfoption>
<smbconfoption name="netbios name">HOBBIT</smbconfoption>
<smbconfoption name="security">SHARE</smbconfoption>

<smbconfsection name="[data]"/>
<smbconfoption name="comment">??????</smbconfoption>
<smbconfoption name="path">/export</smbconfoption>
<smbconfoption name="force user">jackb</smbconfoption>
<smbconfoption name="force group">users</smbconfoption>
<smbconfoption name="read only">???</smbconfoption>
<smbconfoption name="guest ok">??</smbconfoption>
</smbconfblock>
</example>

		</sect3>

		<sect3>
		<title>C????? ?????? ? ????????? ???????? </title>

		<para><indexterm><primary>?????????</primary><secondary>?????-??????</secondary></indexterm> ?????-?????? ? ????????? ???????? ?????? ???? ?????:</para>

		<itemizedlist>
			<listitem><para>?? ????????? ???????? ?? ??? ???????? ?? ?????? ?????.</para></listitem>

			<listitem><para>?? ????????? ?????? ???????? ??????? (??? ?????? ? ?????? ?????? ?????????????, ?????????? ???????? ?????? ? ????????????? ????? ?????????).</para></listitem>
		</itemizedlist>

		<para>? ?????????? ?????-???????? ? ????????? ???????? ???????????? ????????? ???????? ????????? ??????????? ????????? ???????? ?? ??????? ??????? ? Windows. ? ???? ?????? ?????-?????? ????? ???????? ???, ????? ?????? ?????????? ??????? ?????????? ??????, ? ????????? ????????????? ???, ????? ?????????? ??????? ???????? ??? ????????? . ??????? ???????, ?????????? ?????? ??? ????? ??????????? ??? ???????????? ????? ??????, ???????????? ????????.</para>

		<para>? ???? ???????????? ?? ????? ??????????? ?????? ?????????? ????????? - ??? ?? ????? ?????????????? ???????? ?????????, ??????? ?? ????????? ?? ? ????????? ????????????. ???????????? ???? &smb.conf; - <link linkend="anon-print"/>.</para>

<example id="anon-print">
<title>Smb.conf ??? ??????? ?????? ? ????????? ???????? </title>
<smbconfblock>
<smbconfcomment>?????????? ?????????</smbconfcomment>
<smbconfsection name="[global]"/>
<smbconfoption name="workgroup">MIDEARTH</smbconfoption>
<smbconfoption name="netbios name">LUTHIEN</smbconfoption>
<smbconfoption name="security">????? ??????</smbconfoption>
<smbconfoption name="printcap name">cups</smbconfoption>
<smbconfoption name="disable spoolss">??</smbconfoption>
<smbconfoption name="show add printer wizard">???</smbconfoption>
<smbconfoption name="printing">cups</smbconfoption>

<smbconfsection name="[printers]"/>
<smbconfoption name="comment">??? ????????</smbconfoption>
<smbconfoption name="path">/var/spool/samba</smbconfoption>
<smbconfoption name="guest ok">??</smbconfoption>
<smbconfoption name="printable">??</smbconfoption>
<smbconfoption name="use client driver">??</smbconfoption>
<smbconfoption name="browseable">???</smbconfoption>
</smbconfblock>
</example>

		<para>???????????? ???? ?? ????????. ? ??? ?? ????????????? ?????-???? ??????? ??? ????????, ? ???, ???????, ?????? ??? ?????????? ???????. ?? ??? ??????????, ? ??? ????????. Samba ?????????? ????????? ?????? ??????, ?????????????? CUPS. ???? Samba ???? ?????????????? ? ??????? ? ???????????? CUPS, ??????????? ?????? ?? ????????? ????? CUPS. ???? ???????? printcap name ????? CUPS, ?? Samba ????? ???????????? ?????? ?????????? CUPS ??? ????, ????? ???????? ???????? ? ??? ?? ???? ???????? ??????. ???????? ????????????? ??????? ?????? ?????? ?????????? ????????<parameter>printing</parameter> ?????? ???? SYSV, ???? BSD, ?, ?????????????, ???????? ????????? <parameter>printcap name</parameter> ?????? ???? ????? ????-?? ???????, ?????? CUPS. ? ????? ?????? ??? ????? ???? ??????????? ?????? ????? ?????? ?????, ??????? ???????? ?????? ?????????, ??????? ?????????? ??????? ?????????? Windows-????????.</para>

		<note><para>???????????? Windows ?????? ?????????? ? ???? ????????? ???????, ? ????? ????????? ???????? ???????? ?????? "?? ??????????". ????? ?????? ?????? "?? ??????????" ????? ???? ????????? ?? ??????? ??????? ???? ??????.</para></note>

		<para>??????????????, ??? ??????? <filename>/var/spool/samba</filename> ????? ???? ??????????? ? ???????????? ? ???????????. ??? ????? ?????????? ????????? ????????? ????:</para>

		<itemizedlist>
			<listitem><para>?????????? ???????? ?????? ???? ????????????????? (root) ? ??? ??????:<screen>
&rootprompt;<userinput>chown root.root /var/spool/samba</userinput>
</screen></para></listitem>

			<listitem><para>?? ??????? ?????????? ?????????? ?????????? ?? ??????-?????? ? sticky-???, ???, ??? ????????: <screen>
&rootprompt;<userinput>chmod a+twrx /var/spool/samba</userinput>
</screen> Sticky-??? ??????????????? ??? ????, ????? ????????????, ?? ?????????? ??????????? ?????????? ????? ??????, ?? ?????? ??????????? ?????????? ??. ??? ???????????? ????? ???????? ? ????????????????.</para></listitem>
		</itemizedlist>


		<note><para><indexterm><primary>MIME</primary><secondary>raw</secondary></indexterm><indexterm><primary>raw printing</primary></indexterm> ?? ???????? ? ?????????? CUPS ?????????? ??????????? ?????????? ?????? ???????? ???????? ??? ????????????? ????????? ????????? ?????? CUPS. ???? ?????? ?????? ????? ?????????, ?????????? ????????? ?????????? ?????? ??????. ??? ?? ?????????? ???????? ??????????????? ?????????? mime ? ?????? <filename>/etc/mime.conv</filename> ? <filename>/etc/mime.types</filename>. ???????? ? <link linkend="cups-raw"/>.</para></note>

		</sect3>

		<sect3>

		<title>?????????? ?????- ? ????-?????? ? ???????????? ??????-??????.</title>

		<para>?????? ?? ??????????? ?? ??????? ??????? ? ???????, ??????? ????????? ????? ??????.</para>

		<para>?????? ?????? ??????? ??????????? ????????? ??????? ???????? ??????, ? ??????? ??????????????????? ???????????? (? ??????? ??????? ???????) ????? ??????? ?????, ??? ??, ??? ? ???????? ????????. ????? ?????? ???? ???????, ??????? ????? ???????? ? ????????????? ??? ????.</para>

		<para>? ???? ?????????????? ????????? (??? ????????? ???? ?????? ?? ??????????????? ??????? ????????) ??????????? ?????????? ??????? ?????, ??????? <emphasis>?????????? ?????????</emphasis>, ?? ?? ??????? ?????? ? ?????????????.</para>

		<para>???????????? ????? ????? Jack Baumbach, Mary Orville, and Amed Sehkah. ? ??????? ????? ?????? (?? ??????? ? ?????????? ????????). Mary ????? ??????????????? ???????? ? ?????????? ???? ?????? ?????? ???????.</para>

		<para>??? ???????????? ????? ???????? ?? <emphasis>???????????? ?????? ????????????</emphasis>, ?????????? ?? ?????????; ????? ?? ????????? ??????, ????????????? ? ???????, ??????????? ? Microsoft Windows, ???????? ? ????? <filename>/etc/samba/smbpasswd. &smb.conf;, smbpasswd, guest. </filename></para>


		<procedure>
		<title>????????? ??????????? ???????? ???????</title>
			<step><para><indexterm><primary>??????? ??????</primary></indexterm> ???????? ???? ????????????? ? ???????????? ???????: <screen>
&rootprompt;<userinput>useradd -c "Jack Baumbach" -m -g users -p m0r3pa1n jackb</userinput>
&rootprompt;<userinput>useradd -c "Mary Orville" -m -g users -p secret maryo</userinput>
&rootprompt;<userinput>useradd -c "Amed Sehkah" -m -g users -p secret ameds</userinput>
</screen></para></step>

			<step><para>????????? ???? Samba &smb.conf; ????, ??? ???????? ? <link linkend="OfficeServer"/>.</para></step>

<example id="OfficeServer">
<title>???? smb.conf ??? ??????????? ???????? ???????.</title>
<smbconfblock>
<smbconfcomment>?????????? ?????????</smbconfcomment>
<smbconfsection name="[global]"/>
<smbconfoption name="workgroup">MIDEARTH</smbconfoption>
<smbconfoption name="netbios name">OLORIN</smbconfoption>
<smbconfoption name="printcap name">cups</smbconfoption>
<smbconfoption name="disable spoolss">??</smbconfoption>
<smbconfoption name="show add printer wizard">???</smbconfoption>
<smbconfoption name="printing">cups</smbconfoption>

<smbconfsection name="[homes]"/>
<smbconfoption name="comment">???????? ????????</smbconfoption>
<smbconfoption name="valid users">%S</smbconfoption>
<smbconfoption name="read only">???</smbconfoption>
<smbconfoption name="browseable">???</smbconfoption>

<smbconfsection name="[public]"/>
<smbconfoption name="comment">??????</smbconfoption>
<smbconfoption name="path">/export</smbconfoption>
<smbconfoption name="force user">maryo</smbconfoption>
<smbconfoption name="force group">users</smbconfoption>
<smbconfoption name="read only">???</smbconfoption>

<smbconfsection name="[printers]"/>
<smbconfoption name="comment">??? ????????</smbconfoption>
<smbconfoption name="path">/var/spool/samba</smbconfoption>
<smbconfoption name="printer admin">root, maryo</smbconfoption>
<smbconfoption name="create mask">0600</smbconfoption>
<smbconfoption name="guest ok">??</smbconfoption>
<smbconfoption name="printable">??</smbconfoption>
<smbconfoption name="use client driver">??</smbconfoption>
<smbconfoption name="browseable">???</smbconfoption>
</smbconfblock>
</example>

			<step><para>??????????????? ????????? ???? ????? ????????????? Microsoft Windows : <screen>
&rootprompt;<userinput>smbpasswd -a root</userinput>
New SMB password: <userinput>bigsecret</userinput>
Reenter smb password: <userinput>bigsecret</userinput>
Added user root.

&rootprompt;<userinput>smbpasswd -a jackb</userinput>
New SMB password: <userinput>m0r3pa1n</userinput>
Retype new SMB password: <userinput>m0r3pa1n</userinput>
Added user jackb.

&rootprompt;<userinput>smbpasswd -a maryo</userinput>
New SMB password: <userinput>secret</userinput>
Reenter smb password: <userinput>secret</userinput>
Added user maryo.

&rootprompt;<userinput>smbpasswd -a ameds</userinput>
New SMB password: <userinput>mysecret</userinput>
Reenter smb password: <userinput>mysecret</userinput>
Added user ameds.
</screen></para></step>

			<step><para>?????????? ???????, ????????? ???-????????? CUPS.  ??????????????, ??? ??? ????????, ??????? ????? ?????? ??? ???????? Microsoft Windows, ????????? ??? ?????????? ?????? (??????????????) ??????.</para></step>

			<step><para>????????? Samba, ????????? ????????? ?????????? ????????. ????? ????, ??? ????? ??????? ???????, ???????? ???????: <indexterm><primary>smbd</primary></indexterm><indexterm><primary>nmbd</primary></indexterm><indexterm><primary>?????? samba</primary><secondary>smbd</secondary></indexterm><indexterm><primary>?????? samba</primary><secondary>nmbd</secondary></indexterm><screen>
&rootprompt;<userinput> nmbd; smbd;</userinput>
</screen> ??? ?????????? ????????????? ??????????? ??? ??????. ???? ?? ???????? ? ?????? ????????, ????? ???????? ???? <constant>-D</constant>, ???????? ?? ??????????? ? ?????? ??????.</para></step>

			<step><para>????????? ??????? <filename>/export</filename>: <screen>
&rootprompt;<userinput>mkdir /export</userinput>
&rootprompt;<userinput>chown maryo.users /export</userinput>
&rootprompt;<userinput>chmod u=rwx,g=rwx,o-rwx /export</userinput>
</screen></para></step>

			<step><para>?????????, ??? Samba ??????? ? ???????? ?????????: <screen>
&rootprompt;<userinput>smbclient -L localhost -U%</userinput>
Domain=[MIDEARTH] OS=[UNIX] Server=[Samba-3.0.20]

Sharename      Type      Comment
---------      ----      -------
public         Disk      Data
IPC$           IPC       IPC Service (Samba-3.0.20)
ADMIN$         IPC       IPC Service (Samba-3.0.20)
hplj4          Printer   hplj4

Server               Comment
---------            -------
OLORIN               Samba-3.0.20

Workgroup            Master
---------            -------
MIDEARTH             OLORIN
</screen> ????????? ????????? ?? ?????? ????????, ??? Samba ?? ????????: <screen>
&rootprompt; smbclient -L olorin -U%
Error connecting to 192.168.1.40 (Connection refused)
Connection to olorin failed
</screen></para></step>

			<step><para>?????????????? ? OLORIN ??? maryo: <screen>
&rootprompt;<userinput>smbclient //olorin/maryo -Umaryo%secret</userinput>
OS=[UNIX] Server=[Samba-3.0.20]
smb: \&gt; <userinput>dir</userinput>
.                              D        0  Sat Jun 21 10:58:16 2003
..                             D        0  Sat Jun 21 10:54:32 2003
Documents                      D        0  Fri Apr 25 13:23:58 2003
DOCWORK                        D        0  Sat Jun 14 15:40:34 2003
OpenOffice.org                 D        0  Fri Apr 25 13:55:16 2003
.bashrc                        H     1286  Fri Apr 25 13:23:58 2003
.netscape6                    DH        0  Fri Apr 25 13:55:13 2003
.mozilla                      DH        0  Wed Mar  5 11:50:50 2003
.kermrc                        H      164  Fri Apr 25 13:23:58 2003
.acrobat                      DH        0  Fri Apr 25 15:41:02 2003

		55817 blocks of size 524288. 34725 blocks available
smb: \&gt; <userinput>q</userinput>
</screen></para></step>
		</procedure>

			<para>?????? ?? ??? ?????? ???? ?????? ???????? ???? ?????????. ?????? ??????, ??? ????? ??????????? ??????? ? ?????????. ? ?????????? ????? ???? ????? ?? ???????? ??????????, ????????? ??? ????? ???? ?????????? ???????.</para>

		</sect3>

	</sect2>

	<sect2>
	<title>??????-???????? ??????</title>

	<para><indexterm><primary>??? ???????</primary><secondary>???????? ??????</secondary></indexterm> ? ???? ?????? ??? ????, ????? ?????????? ?? ???????????, ?? ???????????? ?????????? ????????? ??? ???????, ? ???????? ?? ?????? ????? ????????. ????, ?? ?????????, ???????????? - ??????????, ? ? ??? ???? ???? ??????? ?????. ??? ????? ?????? ???? ?????? ?????? ?? ???? ??????.</para>

	<para>???? ??????????? ??????? ?????????? ?????????????? ????? (ISG), ? ??????? ?? ???????????. ?????????? ???????? ??????? ??? ??????????? ??????? ????????; ????????????? HR ???????, ??? ??? ???????????? ISG, ?????? ??? ??? ??? ????? ????????? ? ??????? ?????????????. ????? ????, ??????????? ???????? ?????? ?????? ?????? ? ??????? ?? ????????? ???????? ??????? ? ??????? ???????? ??? ????? ??????. ??????????, ???????, ????????? ??????, ?????? ??? ?????? ???????? ??, ??? ?????. ??? ??? ?????????? ???????? ??????????? ???????? ??????.</para>

	<para>?? ?????????? ????????????? ?? ???????? ???????. ?????????? ????? ????? ????? ???????, ??????? ????? ???????????? ??? ???????????? ??????. ????? ???? ??????? ???????, ??????? ????? ???????????? ?????? ????, ??????? ????? ???????? ????. ??????? ????????? ?????, ????? ?????? ? ???????? ??? ????????? ?????????, ?, ?????????????, ?????????? ? ?????????? ????? ? ?? ?????. ?????????????, ??? ?????? ???? ??????? ???????.</para>

	<para>?????????? ????? ?????????? ????????????? ??????????, ??????????  <emphasis>SpytFull</emphasis>, ??????? ????? ??????????? ? ???????????? ??????? ??????????. ??? ??????????? ??????????? ????????????? ??? ??????? ?????? ? ?????? ???????, ?????????? ??? ?????????? ??????? ??????? ???????????, ? ??? ??????????? ? ?????? ???????, ????????????? ?? ????. ?????? ???????? ? SQL-???? ??? UNIX. ???? UNIX ??????????? ?? ????, ??????? ??? ?? ???? ????????.</para>

	<para>??????????? ??????????? ?????? (???????, ???????? - ????. ?????.) ????? ????? ????? ???????? ???????, ????? ??? ? ????????? ??????? ???????? ?????? ? ??????? ??? ????? ("??????????????" - ????. ?????.) ??????? ? ??????? ?????? ???? ???????? ??????-???-?????? ??? ????? ?????????????? ?????????, ???????? ????????. ????? ???????? ??????? ?????? ????? ????????? ?????????: ???? ??????? ??? ????? ????????? ??? ???????? ????? ?????????? ? ?????????, ?????? ??????? ??? ??????? ????? ???????, ?????? ??????? ????? ????? ?????? ?????? ?? ???? ????????. ???????????? ?????? ????? ?????? ???????? ?????? ??? ????? ??????, ????????? ? ???????, ? ??? ??????????, ?? ????????? ? ??????? ????????????.</para>
	
		<sect3>
		<title>?????? ????????????</title>
		
		<para>?????? <emphasis>valinor</emphasis> ????? ????????-?????? ?????? ????????. ? ??????????? ?????? ????? ?????? ????????? ??????. ??????? ?????? ????????????? ????? ?? ??????????? ??????, ??? ??, ??? ??????? ????????????? ? ????? ??????? ???????.</para>

		<procedure>
			<step><para>?? ?????????? ????????????? ? ??????? UNIX/Linux; ??? ??? ????? ??????????? ?? ???????????? ??????.</para></step>

			<step><para>????????? &smb.conf; ? ???????????? ? <link linkend="fast-member-server">???? smb.conf ???????-????????? ?????? (?????????? ?????????)</link> ? <link linkend="fast-memberserver-shares">???? smb.conf ???????-????????? ?????? (????? ??????? ? ??????)</link>.</para></step>

<example id="fast-member-server">
<title>???? smb.conf ???????-????????? ?????? (?????????? ?????????)</title>
<smbconfblock>
<smbconfcomment>?????????? ?????????</smbconfcomment>
<smbconfsection name="[global]"/>
<smbconfoption name="workgroup">MIDEARTH</smbconfoption>
<smbconfoption name="netbios name">VALINOR</smbconfoption>
<smbconfoption name="security">?????</smbconfoption>
<smbconfoption name="printcap name">cups</smbconfoption>
<smbconfoption name="disable spoolss">??</smbconfoption>
<smbconfoption name="show add printer wizard">???</smbconfoption>
<smbconfoption name="idmap uid">15000-20000</smbconfoption>
<smbconfoption name="idmap gid">15000-20000</smbconfoption>
<smbconfoption name="winbind use default domain">??</smbconfoption>
<smbconfoption name="printing">cups</smbconfoption>
</smbconfblock>
</example>

<example id="fast-memberserver-shares">
<title>???? smb.conf ???????-????????? ?????? (????? ??????? ? ??????)</title>
<smbconfblock>
<smbconfsection name="[homes]"/>
<smbconfoption name="comment">???????? ????????</smbconfoption>
<smbconfoption name="valid users">%S</smbconfoption>
<smbconfoption name="read only">???</smbconfoption>
<smbconfoption name="browseable">???</smbconfoption>

<smbconfsection name="[spytfull]"/>
<smbconfoption name="comment">?????? ??? ????????????? ??????????</smbconfoption>
<smbconfoption name="path">/export/spytfull</smbconfoption>
<smbconfoption name="valid users">@Accounts</smbconfoption>
<smbconfoption name="admin users">maryo</smbconfoption>
<smbconfoption name="read only">??</smbconfoption>

<smbconfsection name="[public]"/>
<smbconfoption name="comment">??????</smbconfoption>
<smbconfoption name="path">/export/public</smbconfoption>
<smbconfoption name="read only">???</smbconfoption>

<smbconfsection name="[printers]"/>
<smbconfoption name="comment">??? ????????</smbconfoption>
<smbconfoption name="path">/var/spool/samba</smbconfoption>
<smbconfoption name="printer admin">root, maryo</smbconfoption>
<smbconfoption name="create mask">0600</smbconfoption>
<smbconfoption name="guest ok">??</smbconfoption>
<smbconfoption name="printable">??</smbconfoption>
<smbconfoption name="use client driver">??</smbconfoption>
<smbconfoption name="browseable">???</smbconfoption>
</smbconfblock>
</example>

			<step><para><indexterm><primary>net</primary><secondary>rpc</secondary></indexterm> ?????????????? ? ??????. ???????: ?? ?????????? Samba ?? ??? ???, ???? ?? ???????? ?????! <screen>
&rootprompt;<userinput>net rpc join -Uroot%'bigsecret'</userinput>
Joined domain MIDEARTH.
</screen></para></step>

			<step><para>??? ?????????? ???? ????????? ?????????? ? ???, ??? ?? ????????? (?????????) ?????? <command>nscd</command> ?? ????? ???????, ??? ??????????? ?????? <command>winbind</command>.</para></step>

			<step><para>????????? Samba, ?????? ???????? ???????? ??? ????? ?????????. ???? ?? ?????? ??????? ??? ???????, ????????? ?? ???????????? root:<indexterm><primary>smbd</primary></indexterm><indexterm><primary>nmbd</primary></indexterm><indexterm><primary>winbindd</primary></indexterm><indexterm><primary>starting samba</primary><secondary>smbd</secondary></indexterm><indexterm><primary>starting samba</primary><secondary>nmbd</secondary></indexterm><indexterm><primary>starting samba</primary><secondary>winbindd</secondary></indexterm><screen>
&rootprompt;<userinput>nmbd; smbd; winbindd;</userinput>
</screen></para></step>

			<step><para>????????? ??????????? ???? ????????????? ?????? ???? (NSS) ???, ????? ????? ????????????? ? ????? ??????????? ????? winbind. ?????????????? ????????? ?????? ? <filename>/etc/nsswitch.conf</filename>: <programlisting>
passwd: files winbind
group:  files winbind
hosts:  files dns winbind
</programlisting></para></step>

			<step><para>????????? ?????? ??? ????????????? <command>wbinfo</command>: <screen>
&rootprompt;<userinput>wbinfo --set-auth-user=root%'bigsecret'</userinput>
</screen></para></step>

			<step><para>??????????????, ??? ??????? ? ?????? ???????????? ? ?????? ????? ???? ????????? ?????????, ???????? ?????????: <screen>
&rootprompt;<userinput>wbinfo -u</userinput>
MIDEARTH\maryo
MIDEARTH\jackb
MIDEARTH\ameds
...
MIDEARTH\root

&rootprompt;<userinput>wbinfo -g</userinput>
MIDEARTH\Domain Users
MIDEARTH\Domain Admins
MIDEARTH\Domain Guests
...
MIDEARTH\Accounts
</screen></para></step>

			<step><para>?????????, ??? ??????? <command>winbind</command> ????????. ????????? ????????????? ?????????? ?????????? ???? ????????????? ????? ????????? ??????? <command>getent</command>: <screen>
&rootprompt;<userinput>getent passwd maryo</userinput>
maryo:x:15000:15003:Mary Orville:/home/MIDEARTH/maryo:/bin/false
</screen></para></step>

			<step><para>????????? ????, ????????????, ??? ??? ??? ?????????, ??? ???????????: <screen>
&rootprompt;<userinput>touch /export/a_file</userinput>
&rootprompt;<userinput>chown maryo /export/a_file</userinput>
&rootprompt;<userinput>ls -al /export/a_file</userinput>
...
-rw-r--r--    1 maryo    users       11234 Jun 21 15:32 a_file
...

&rootprompt;<userinput>rm /export/a_file</userinput>
</screen></para></step>

			<step><para>????????? ? ???????? ?????????, ??? ??? ??????????? ????? ????????? ????????? ????????? ??? ????? ?????: <screen>
&rootprompt;<userinput>mkdir -p /export/{spytfull,public}</userinput>
&rootprompt;<userinput>chmod ug=rwxS,o=x /export/{spytfull,public}</userinput>
&rootprompt;<userinput>chown maryo.Accounts /export/{spytfull,public}</userinput>
</screen></para></step>
		</procedure>

		</sect3>

	</sect2>

	<sect2>
	<title>?????????? ??????</title>


	<para><indexterm><primary>??? ???????</primary><secondary>?????????? ??????</secondary></indexterm> ? ?????????? ????? ????? ???????? ???? ?????? ?? ????????? ?????????? ???????. ????? ??????? ??? ??????? - ??? ????????? ??????????. ?????????, ???? ???? - ??????? ???????, ?? ?????????? ???????. ?????????? ????? ????? ??????? ??????? ??????????? ??????? ???????????????? ? - ?????????????? - ?????????.</para>

	<para>??????????? ?????? ????? ???? ???????? ???????? ??????????? ? ?????????????? ????????? ???? tdbsam. ???? ??? ???????????? ????? ??? ????????? ??????, ?? ????? ???????????? ???????????????? (?? ????? ???????????????), ? ?? ???? ????? ??????? ? ????????? ?????? ?????????????????? ?????????? ???????.</para>

	<para>????????????? tdbsam ? ????????? ???? ?????????? ??????????, ??????? ?? ????? ??????, ??? ????????? ?????????? ?????? (PDC). ?? ???? ????? ?????? ????????????? ? ?????????????? ??? ??????????? ?????????????? ??? ????? ?????. ?? ????????? ???????? ???? ???????? ???????? ????????? Microsoft Windows; ??????????? ?????? ???????????? ?????? ?????? ??????????????.????? ??????? ???????? ???????? ???????? ? ??????? ????????? ??????:</para>

	<itemizedlist>	
		<listitem><para>???? ? ????? ????????? ??????? ??????????? ????????.</para></listitem>

		<listitem><para>?????? ? ?????? ?? ????????? ?????? ????????? ??????? ??????????? ???????? ? ??????? ????????? ?? ?????? ? ???????.</para></listitem>
	</itemizedlist>

	<para>?????? ????? ????????? ???? ?????????? ??????? ? ?????? ???????????????? - ????????????? Microsoft Active Directory ??? ????????? ???? LDAP. Samba-3 ???????????? ??? ??????????? ??? ???????? ??????. ? ???? PDC Samba-3 ?? ????? ?????????? ?????? ???????????? ????????????????, ?????????????? Active Directory. ??? ?? ?????, Samba-3 ????? ?????????? ?????????????? ??????? PDC/BDC ? ????????? ????? LDAP.</para>

	<para>????????? ???? tdbsam ?? ???????????? ??????????? ?????????? ??????????? ???? ??????, ???????? ??????? ???????? (?.?. ? Samba-3 ?? ?????????? ??????????? ????????? ??? ?????????? ???? ?????? ?????????? ??????? ??????? ???????????? [SAM]).</para>

	<note><para>???? ??? ????????? ????? ??? ???? ?????????? ??????, ?? ??????????? ????????? ???? tdbsam.</para></note>

		<sect3>
		<title>??????: ???? ??????????</title>

		<para>??????? ?????? ????? ??????????, ??????? ?? ???????????? ?????, ?????????? ??? ???????????? ????????????? ????????? ???? tdbsam.</para>

		<procedure>
			<step><para>?????????? ???????????? PDC ? ?????????????? ????????? ???? tdbsam ????????? ? <link linkend="fast-engoffice-global">???? smb.conf ??? ??????????? ????? (?????????? ?????????)</link> ?????? ?  <link linkend="fast-engoffice-shares">???? smb.conf ???  (shares and services)</link>: <indexterm><primary>pdbedit</primary></indexterm></para></step>

<example id="fast-engoffice-global">
<title>???? smb.conf ??????????? ????? (?????????? ?????????)</title>
<smbconfblock>
<smbconfsection name="[global]"/>
<smbconfoption name="workgroup">MIDEARTH</smbconfoption>
<smbconfoption name="netbios name">FRODO</smbconfoption>
<smbconfoption name="passdb backend">tdbsam</smbconfoption>
<smbconfoption name="printcap name">cups</smbconfoption>
<smbconfoption name="add user script">/usr/sbin/useradd -m %u</smbconfoption>
<smbconfoption name="delete user script">/usr/sbin/userdel -r %u</smbconfoption>
<smbconfoption name="add group script">/usr/sbin/groupadd %g</smbconfoption>
<smbconfoption name="delete group script">/usr/sbin/groupdel %g</smbconfoption>
<smbconfoption name="add user to group script">/usr/sbin/groupmod -A %u %g</smbconfoption>
<smbconfoption name="delete user from group script">/usr/sbin/groupmod -R %u %g</smbconfoption>
<smbconfoption name="add machine script">/usr/sbin/useradd -s /bin/false -d /var/lib/nobody %u</smbconfoption>
<smbconfcomment>???????: ????????????? ????????? ???????? ????? ?? ?????????.</smbconfcomment>
<smbconfcomment>?????????????? ???????? ????? ????????????? ????? ???? ??????????? ? ??????? ?????? ???????????? ? ??????? pdbedit.</smbconfcomment>
<smbconfoption name="logon script">scripts\logon.bat</smbconfoption>
<smbconfcomment>??? ????????????? ???? ? ??????? ?? ?????????. ?????????????? ???? ????????????? ????? ???? ??????????? ? ??????? pdbedit.</smbconfcomment>
<smbconfoption name="logon path">\\%L\Profiles\%U</smbconfoption>
<smbconfoption name="logon drive">H:</smbconfoption>
<smbconfoption name="logon home">\\%L\%U</smbconfoption>
<smbconfoption name="domain logons">??</smbconfoption>
<smbconfoption name="os level">35</smbconfoption>
<smbconfoption name="preferred master">??</smbconfoption>
<smbconfoption name="domain master">??</smbconfoption>
<smbconfoption name="idmap uid">15000-20000</smbconfoption>
<smbconfoption name="idmap gid">15000-20000</smbconfoption>
<smbconfoption name="printing">cups</smbconfoption>
</smbconfblock>
</example>

<example id="fast-engoffice-shares">
<title>???? smb.conf ??????????? ????? (????? ??????? ? ??????)</title>
<smbconfblock>
<smbconfsection name="[homes]"/>
<smbconfoption name="comment">???????? ????????</smbconfoption>
<smbconfoption name="valid users">%S</smbconfoption>
<smbconfoption name="read only">???</smbconfoption>
<smbconfoption name="browseable">???</smbconfoption>

<smbconfcomment>?????????????? ????? ?????? (?????? ???????? ?????????? ????? CUPS)</smbconfcomment>
<smbconfsection name="[printers]"/>
<smbconfoption name="comment">??? ????????</smbconfoption>
<smbconfoption name="path">/var/spool/samba</smbconfoption>
<smbconfoption name="printer admin">root, maryo</smbconfoption>
<smbconfoption name="create mask">0600</smbconfoption>
<smbconfoption name="guest ok">??</smbconfoption>
<smbconfoption name="printable">??</smbconfoption>
<smbconfoption name="browseable">???</smbconfoption>

<smbconfsection name="[print$]"/>
<smbconfoption name="comment">?????? ? ?????????? ????????</smbconfoption>
<smbconfoption name="path">/var/lib/samba/drivers</smbconfoption>
<smbconfoption name="write list">maryo, root</smbconfoption>
<smbconfoption name="printer admin">maryo, root</smbconfoption>

<smbconfcomment>????????? ??? ????????? ????? ? ?????</smbconfcomment>
<smbconfsection name="[netlogon]"/>
<smbconfoption name="comment">?????? ???????? ?????</smbconfoption>
<smbconfoption name="path">/var/lib/samba/netlogon</smbconfoption>
<smbconfoption name="admin users">root, maryo</smbconfoption>
<smbconfoption name="guest ok">??</smbconfoption>
<smbconfoption name="browseable">???</smbconfoption>

<smbconfcomment>??? ????, ????? ???????? ???????, ???????? ??????? ???????????? ? ?????? ?????</smbconfcomment>
<smbconfcomment>????????, ????????, mkdir -p /var/lib/samba/profiles/maryo</smbconfcomment>
<smbconfsection name="[Profiles]"/>
<smbconfoption name="comment">??????????? ?????? ??? ???????????? ????????</smbconfoption>
<smbconfoption name="path">/var/lib/samba/profiles</smbconfoption>
<smbconfoption name="read only">???</smbconfoption>
<smbconfoption name="profile acls">??</smbconfoption>

<smbconfcomment>?????? ????? ???????/???????? ????????? ????.</smbconfcomment>
</smbconfblock>
</example>

			<step><para>???????? ??????????? ??????? ?????? Unix, ????????? ??????????????? ??????? ???????????? ???????: <screen>
&rootprompt;<userinput>groupadd ntadmins</userinput>
&rootprompt;<userinput>groupadd designers</userinput>
&rootprompt;<userinput>groupadd engineers</userinput>
&rootprompt;<userinput>groupadd qateam</userinput>
</screen></para></step>

			<step><para>???????? ???????????????? ??????? ?????? ? ???????, ????????? ?????????? ??????? ???????????? ???????. ??????????????, ??? ???????? ???????? ????????????? ????? ???????. ???????? ????????????? ? ??????? ???, ??? ?????????? ??? ???????? ??????? ? ??????, ?????????, ????????? ? ??? ?????????? ??? ????????????? ????? Samba.</para></step>


			<step><para><indexterm><primary>net</primary><secondary>groupmap</secondary></indexterm><indexterm><primary>initGroups.sh</primary></indexterm> ????????? ???????????? ????? ???????? UNIX ? NT,  ???????? ???? ????????: (?? ????? ?? ??????? ???????? <filename>initGroups.sh</filename>): <screen>
#!/bin/bash
#### ????????? ??? ? ???????? ???????? ??????? ??? ?????????? ?????????????
			
# ??????? ????????? well known ?????? (?????? ?????????)
net groupmap add ntgroup="Domain Admins" unixgroup=ntadmins rid=512 type=d
net groupmap add ntgroup="Domain Users"  unixgroup=users rid=513 type=
net groupmap add ntgroup="Domain Guests" unixgroup=nobody rid=514 type=d

# ? ?????? ???? ??????????? ?????? ??????
net groupmap add ntgroup="Designers" unixgroup=designers type=d
net groupmap add ntgroup="Engineers" unixgroup=engineers type=d
net groupmap add ntgroup="QA Team"   unixgroup=qateam    type=d
</screen></para></step>

			<step><para>???????? ??????? <filename>scripts</filename> ??? ????????????? ? ????? ??????? <smbconfsection name="[NETLOGON]"/>: <screen>
&rootprompt;<userinput>mkdir -p /var/lib/samba/netlogon/scripts</userinput>
</screen> ????????? ???????? ?????, ??????? ????? ?????????????? (? ???? bat ??? cmd-?????????) ? ???? ???????.</para></step>
		</procedure>

		<para>???????????? ???? ???????????? ??????? ??????? PDC, ? ??????? ?? ???? ????????????? ??????????? ???????? ????? ??????? ? ????????.</para>

		</sect3>

		<sect3>
		<title>??????? ???????????</title>

		<para>? ???? ????? ?? ???????-?? ????????? ?? ???????? ?????? ????????? Samba 3, ??????? ?????????? ????????? ???? LDAP. ??????? ??????? ????? ?????? - ??????????? ????? ??? ????????, ??? ? ????????? (BDC) ??????????? ??????, ??? ??, ??? ? ?????????? ??????? ???????????????? ??? ???? ?????????????? ????.</para>

			<sect4>
			<title>????????? ?????????? ??????</title>

			<para>??? ?????? ??????????? ???????????? ??? ??????? PDC ??? Samba-3, ????????? ????????? ???? LDAP. ??????????????, ??? ???????????? ??????? ???? ????????? ?????????.</para>

			<para>??????? Idealx (??? ?????????????) ?????????? ??? ?????????? ??????????? ?? LDAP POSIX- ?/??? SambaSamAccounts. ???????  Idealx ????? ???? ??????? ? ????? <ulink url="http://www.idealx.org"> Idealx</ulink>. ?? ????? ????? ????? ? ??????? Samba. ??????? ????? ????????????? Linux, ??????, ????????????? ??????? Idealx ? ??????? <filename>/usr/share/doc/packages/sambaXXXXXX/examples/LDAP/smbldap-tools</filename>. ??????? Idealx ?????? <constant>smbldap-tools-0.9.1</constant> ?????????? ???????? ??????.</para>

			<procedure>
				<step><para>???????? ?? ?????????? Samba <filename>~/examples/LDAP/samba.schema</filename> ? ?????????? ??? ? ??????? <filename>/etc/openldap/schema/</filename>.</para></step>

				<step><para>??????????? ?????? LDAP. ???? ?????? ?????????? ??? OpenLDAP 2.1.x. ??? ???? <filename>/etc/openldap/slapd.conf</filename>. <indexterm><primary>/etc/openldap/slapd.conf</primary></indexterm><title>????????? ???? slapd.conf</title><screen>
# Note commented out lines have been removed
include         /etc/openldap/schema/core.schema
include         /etc/openldap/schema/cosine.schema
include         /etc/openldap/schema/inetorgperson.schema
include         /etc/openldap/schema/nis.schema
include         /etc/openldap/schema/samba.schema

pidfile         /var/run/slapd/slapd.pid
argsfile        /var/run/slapd/slapd.args

database        bdb
suffix          "dc=quenya,dc=org"
rootdn          "cn=Manager,dc=quenya,dc=org"
rootpw          {SSHA}06qDkonA8hk6W6SSnRzWj0/pBcU3m0/P
# The password for the above is 'nastyon3'

directory     /var/lib/ldap

index   objectClass     eq
index cn                      pres,sub,eq
index sn                      pres,sub,eq
index uid                     pres,sub,eq
index displayName             pres,sub,eq
index uidNumber               eq
index gidNumber               eq
index memberUid               eq
index   sambaSID              eq
index   sambaPrimaryGroupSID  eq
index   sambaDomainName       eq
index   default               sub
</screen></para></step>

				<step><para>???????? ????????? ???? <filename>initdb.ldif</filename>: <indexterm><primary>initdb.ldif</primary></indexterm><programlisting>
# ??????????? ??? ???????????? SambaXP
dn: dc=quenya,dc=org
objectclass: dcObject
objectclass: organization
dc: quenya
o: SambaXP Demo
description: ????-?????? LDAP SambaXP

# ???? ? ??????????? ??? ?????????? ?????????
dn: cn=Manager,dc=quenya,dc=org
objectclass: organizationalRole
cn: Manager
description: Directory Manager

# ????????????? ????????? ??? ?????
dn: ou=People, dc=quenya, dc=org
objectclass: top
objectclass: organizationalUnit
ou: People

# ????????????? ???? ?????????????? ??? People OU
dn: cn=admin, ou=People, dc=quenya, dc=org
cn: admin
objectclass: top
objectclass: organizationalRole
objectclass: simpleSecurityObject
userPassword: {SSHA}0jBHgQ1vp4EDX2rEMMfIudvRMJoGwjVb
# ??????, ????????? ???? -  'mordonL8'
</programlisting></para></step>

				<step><para>????????? ????????? ??????, ??????????? ????, ? ???? ?????? LDAP: <screen>
&rootprompt;<userinput>slapadd -v -l initdb.ldif</userinput>
</screen></para></step>

				<step><para>????????? ?????? LDAP, ????????? ??????? ??? ??????, ?????????? ??? ?????????, ?? ??????? ?? ??????????.</para></step>

				<step><para>?????????? ??????? Idealx ? ??????? <filename>/usr/local/sbin</filename>, ????? ????????? ???? smbldap_conf.pm ? ???????????? ? ????????????? ????? ???????.</para></step>

				<step><para>???? &smb.conf;, ??????? ???????? ? ???????? ??? ????????? ????, ????? ????? ? ??????? <link linkend="fast-ldap">smb.conf ??? PDC ? ????????? ????? LDAP</link>. ???????? ?????????????? ?????? ?? ?????????????.</para></step>

<example id="fast-ldap">
<title>smb.conf ??? PDC ? ????????? ????? LDAP</title>
<smbconfblock>
<smbconfcomment>?????????? ?????????</smbconfcomment>
<smbconfsection name="[global]"/>
<smbconfoption name="workgroup">MIDEARTH</smbconfoption>
<smbconfoption name="netbios name">FRODO</smbconfoption>
<smbconfoption name="passdb backend">ldapsam:ldap://localhost</smbconfoption>
<smbconfoption name="username map">/etc/samba/smbusers</smbconfoption>
<smbconfoption name="printcap name">cups</smbconfoption>
<smbconfoption name="add user script">/usr/local/sbin/smbldap-useradd -m '%u'</smbconfoption>
<smbconfoption name="delete user script">/usr/local/sbin/smbldap-userdel %u</smbconfoption>
<smbconfoption name="add group script">/usr/local/sbin/smbldap-groupadd -p '%g'</smbconfoption>
<smbconfoption name="delete group script">/usr/local/sbin/smbldap-groupdel '%g'</smbconfoption>
<smbconfoption name="add user to group script">/usr/local/sbin/smbldap-groupmod -m '%u' '%g'</smbconfoption>
<smbconfoption name="delete user from group script">/usr/local/sbin/smbldap-groupmod -x '%u' '%g'</smbconfoption>
<smbconfoption name="set primary group script">/usr/local/sbin/smbldap-usermod -g '%g' '%u'</smbconfoption>
<smbconfoption name="add machine script">/usr/local/sbin/smbldap-useradd -w '%u'</smbconfoption>
<smbconfoption name="logon script">scripts\logon.bat</smbconfoption>
<smbconfoption name="logon path">\\%L\Profiles\%U</smbconfoption>
<smbconfoption name="logon drive">H:</smbconfoption>
<smbconfoption name="logon home">\\%L\%U</smbconfoption>
<smbconfoption name="domain logons">??</smbconfoption>
<smbconfoption name="os level">35</smbconfoption>
<smbconfoption name="preferred master">??</smbconfoption>
<smbconfoption name="domain master">??</smbconfoption>
<smbconfoption name="ldap suffix">dc=quenya,dc=org</smbconfoption>
<smbconfoption name="ldap machine suffix">ou=People</smbconfoption>
<smbconfoption name="ldap user suffix">ou=People</smbconfoption>
<smbconfoption name="ldap group suffix">ou=People</smbconfoption>
<smbconfoption name="ldap idmap suffix">ou=People</smbconfoption>
<smbconfoption name="ldap admin dn">cn=Manager</smbconfoption>
<smbconfoption name="ldap ssl">???</smbconfoption>
<smbconfoption name="ldap passwd sync">??</smbconfoption>
<smbconfoption name="idmap uid">15000-20000</smbconfoption>
<smbconfoption name="idmap gid">15000-20000</smbconfoption>
<smbconfoption name="printing">cups</smbconfoption>
</smbconfblock>
</example>

				<step><para>???????? ?????? LDAP ? ????? <filename>secrets.tdb</filename>, ??? ????, ????? Samba ??? ????????? ???? ?????? LDAP:<screen>
&rootprompt;<userinput>smbpasswd -w mordonL8</userinput>
</screen></para></step>

				<step><para>??? ????????????? ???????? ????????????? ? ??????. ???????????? ? ??????, ??????????? ? ?????????????? ?????????????? Samba, ????? ????????????? ????????? ? ??????? LDAP ? ???????????? ???????, ??? ? ?????????????????.</para></step>

			</procedure>

			</sect4>

			<sect4>
			<title>????????? ?????????? ??????</title>

			<para><link linkend="fast-bdc"/> ?????????? ?????? ????????? BDC. ????????, ??? ???? &smb.conf; ?? ????????? ?? ???????smbldap-tools &smbmdash; ??? ?? ????????? ?? BDC. ???????? ?????????????? ?????? ??? ????? ???????? ? ????????? ?? ?????????????.</para>

			<procedure>
				<step><para>??????, ??????? ?? BDC ????? ???? ??????????? LDAP-?????? ??? ???. ???? BDC ?????? ???? ???????? LDAP, ???????? ????????????? &smb.conf; ??? ???????. ????????? ?? ????????? ? <link linkend="fast-bdc">smb.conf BDC ? ????????? LDAP</link> ?????????? ??????????? ?????? LDAP.</para></step>

<example id="fast-bdc">
<title>smb.conf ??? BDC ? ????????? ????????? ????? LDAP  </title>
<smbconfblock>
<smbconfcomment>?????????? ?????????</smbconfcomment>
<smbconfsection name="[global]"/>
<smbconfoption name="workgroup">MIDEARTH</smbconfoption>
<smbconfoption name="netbios name">GANDALF</smbconfoption>
<smbconfoption name="passdb backend">ldapsam:ldap://frodo.quenya.org</smbconfoption>
<smbconfoption name="username map">/etc/samba/smbusers</smbconfoption>
<smbconfoption name="printcap name">cups</smbconfoption>
<smbconfoption name="logon script">scripts\logon.bat</smbconfoption>
<smbconfoption name="logon path">\\%L\Profiles\%U</smbconfoption>
<smbconfoption name="logon drive">H:</smbconfoption>
<smbconfoption name="logon home">\\%L\%U</smbconfoption>
<smbconfoption name="domain logons">??</smbconfoption>
<smbconfoption name="os level">33</smbconfoption>
<smbconfoption name="preferred master">??</smbconfoption>
<smbconfoption name="domain master">???</smbconfoption>
<smbconfoption name="ldap suffix">dc=quenya,dc=org</smbconfoption>
<smbconfoption name="ldap machine suffix">ou=People</smbconfoption>
<smbconfoption name="ldap user suffix">ou=People</smbconfoption>
<smbconfoption name="ldap group suffix">ou=People</smbconfoption>
<smbconfoption name="ldap idmap suffix">ou=People</smbconfoption>
<smbconfoption name="ldap admin dn">cn=Manager</smbconfoption>
<smbconfoption name="ldap ssl">???</smbconfoption>
<smbconfoption name="ldap passwd sync">??</smbconfoption>
<smbconfoption name="idmap uid">15000-20000</smbconfoption>
<smbconfoption name="idmap gid">15000-20000</smbconfoption>
<smbconfoption name="printing">cups</smbconfoption>
</smbconfblock>
</example>

				<step><para>????????? ???????? NETLOGON ? PROFILES, ??? ??? PDC ? <link linkend="fast-bdc"/>.</para></step>
			</procedure>

			</sect4>

		</sect3>

	</sect2>

</sect1>

</chapter>
