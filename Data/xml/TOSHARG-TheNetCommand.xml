<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE chapter PUBLIC "-//Samba-Team//DTD DocBook V4.2-Based Variant V1.0//EN" "http://www.samba.org/samba/DTD/samba-doc">
<chapter id="NetCommand">
<chapterinfo>
	&author.jht;
	&author.vl;
	&author.gd;
	<pubdate>9 ??? 2005?.</pubdate>
</chapterinfo>

<title>????????? ? ??????? ??????????: ??????? Net</title>

<para><indexterm><primary>net</primary></indexterm><indexterm><primary>????????? ??????????</primary></indexterm><indexterm><primary>????????? ??????</primary></indexterm><indexterm><primary>?????????? ?? ?????????</primary></indexterm> ??????? <command>net</command> ???????? ????? ?? ????? ???????????? Samba-3,  ? ???????? ???????? ???????????? ??????????? ?????????? ??? ??????????? ???????? ?????????? ??????????, ??????????? ??? ????? ?????. ??????? <command>net</command> ??????????? ??????, ? ????????????? ??? ????????????? ?? ????????? ??????, ??? ?? ??? ? ? ??????????? ?????????? ??????????.</para>

<para><indexterm><primary>net</primary></indexterm><indexterm><primary>????? ???????????? ???????? ??????????????</primary></indexterm><indexterm><primary>smbgroupedit</primary></indexterm><indexterm><primary>rpcclient</primary></indexterm> ?????????? ?????????????? ? ?????????? ?????????? ??????? Microsoft Windows, ??????? ?? ?? ???, ??????? <command>net</command> ???????????? ? ????? ?????? ??????????, ??????? ???? ???????????? ?????? ?????? ???????????? ???????? ?????????????? Samba. ??????? Samba ??????????? ???????????, ?????, ??? <command>smbgroupedit</command> ? <command>rpcclient</command>, ?? ??????? ??-?????????? ???????? ??????????? ???? ????????????? ? <command>net</command>. ??????? <command>smbgroupedit</command> ???????  <command>net</command> ??????? ? ???? ???????, ? ?? ????? ??? ?? ??????? <command>rpcclient</command> ???? ?????????? ?????? ????????? ???????. ???, ??? ??????? ?????? ?????? ?? ??? ??????? ? ?? ????????????????, ?????????????? ???, ?????? ???????? ?? ??????? <command>net</command> ????? ??????? ?????????? ???-?? ???.</para>

<para>????????????? Samba-3 ?? ?????? ????????? ?????????? ??? ?????, ????????? ??? ???????? ? ?????????? ???? ????, ?????? ? ??????. ?? ?????????????: ??? ?????? ?????.</para>

	<sect1>
	<title>?????</title>

	<para><indexterm><primary>?????????</primary></indexterm><indexterm><primary>???????? ??????</primary></indexterm><indexterm><primary>PDC</primary></indexterm><indexterm><primary>BDC</primary></indexterm><indexterm><primary>??????-???????? ??????</primary></indexterm><indexterm><primary>??????????????</primary></indexterm> ??????, ??????? ??????? ?? ?????????? ??????? Samba-3, ???? ?? ?????????? ??? ????????? ?????? ??? ??????????? ?????? (PDC or BDC), ?????????? ? ????????????? ??????? ???????????????? ?????. ???????, ???????? ??????? ??????? ????????????? ? ????? ???????? ?????? ??? ??? ?????????? ???????, ??? ? ??? PDC. ? ?????? BDC ??? ???????-????????? ?????? (DMS), ??????? ?????? ????????????? ? ????? ?????? ?????????? ?? ??????????? ???? ?????????????? ??????.</para>

	<para><indexterm><primary>??? ???????</primary></indexterm><indexterm><primary>????????? ?????? UNIX</primary></indexterm><indexterm><primary>????????????</primary></indexterm><indexterm><primary>?????????? ?????? ??????</primary></indexterm><indexterm><primary>UID</primary></indexterm><indexterm><primary>GID</primary></indexterm><indexterm><primary>????? ???????</primary></indexterm><indexterm><primary>net</primary></indexterm> ?????????? ?? ???? ???????, ??????? ???????????????, ????????? ?????? UNIX ?????? ???? ?????????? ?? ??????? ?????? ?????????? ????? ?????? Windows. ???????????, ??????? ?????? ??? Samba ?????? ???????????? ?????? ? ???????? ??????? ????? ????????????? UNIX UID ? GID. ??? ??????, ??? ????????? ?????? ?????? ???? ?????????? ?? ?????????? ?????? ??????, ??? ??? ????????????? ??????, ??????? ???????? ??????? ?????????? ?????? ??????, ????? ???? ????????????? ????? ???????, ?????????? ?? UID'?? ? GID'??, ????????? ??? ???????, ?? ??????? ???????? Samba. ????? ??????????? ??????????? ? ?????????????? ??????? <command>net</command>.</para>

	<para><indexterm><primary>PDC</primary></indexterm><indexterm><primary>BDC</primary></indexterm><indexterm><primary>DMS</primary></indexterm><indexterm><primary>??????? ?????? ????????????</primary></indexterm><indexterm><primary>?????????????? ? ??????</primary></indexterm><indexterm><primary>??????? ?????? ???????</primary></indexterm><indexterm><primary>net</primary></indexterm> UNIX-???????, ?? ??????? ?????? Samba-3 ???????? ??? ???????? (PDC, BDC, ??? DMS) ?????? ????? ??????? ?????? ?????? ? ???? ?????? (??? ????????) ?????????????? ??????. ???????? ????? ??????? ?????? ???????????? (??? ???????) ????? ???????????? ???????? <command>net</command>.</para>

	<para><indexterm><primary>??????????? ????????????? ?????????</primary></indexterm><indexterm><primary>net</primary></indexterm><indexterm><primary>???????????????? ??????</primary></indexterm><indexterm><primary>?????????? ?????????????? </primary></indexterm><indexterm><primary>?????????? ????????</primary></indexterm><indexterm><primary>?????????? ?????? ?????????</primary></indexterm><indexterm><primary>?????????? ??????????</primary></indexterm><indexterm><primary>??????? ?????????</primary></indexterm><indexterm><primary>?????????? SID </primary></indexterm> ???????????? ??????????? ????????????? ????????? ??????????? ????? ????? ????????????? ??????? <command>net</command>, ???, ????? ????, ????????? ???????? ???????????????? ?????, ?????, ??? ?????????? ?????????????? ? ????????, ?????????? ?????? ????????? ? ??????????, ??????? ?????? ? ?????????, ?????????? ???????????????? ???????????? ? ?.?.</para>

	<para><indexterm><primary>net</primary></indexterm><indexterm><primary>man pages</primary></indexterm> ?????? ?????? ???? ???? ????? ???????: ??????? <command>net</command> ?????? ??????? ???? ?? ????? Samba-3. ?????????? ???? ???? ????? ??????????. ????????? ???? ????? - ????????? ?? ????????, ??????? ? ????? ????????? ??????? ?? ??? ?????, ????? ????? ?????? ??????? ???????? ??????? ????????? ????????? ?? ????????????? ? ????????? ??????? UNIX.</para>

	</sect1>
	
	<sect1>
	<title>???????????????? ?????? ? ??????</title>

	<para><indexterm><primary>net</primary></indexterm><indexterm><primary>ADS</primary></indexterm><indexterm><primary>Distributed Computing Environment</primary><see>DCE</see></indexterm><indexterm><primary>Remote Procedure Call</primary><see>RPC</see></indexterm> ??????? ???????? ??????? <command>net</command> ??????? ?????. ??? ???????????? ?? ?????????????, ?, ?????????????, ????????. ????????? ???????? ???? ?????? ?? ???????? ? ???????? Windows ?? ?????? Samba, emphasis ?? ????????????? ?????? ?????? Distributed Computing Environment Remote Procedure Call (DCE RPC). ??? ?????? ? ????????-?????????? ?????? Active Directory ??????????????? (? ????? ??????????) ???????????? ????? ?????? ADS. ??????? <command>net</command> ???????????? ??? ??????, ?? ?? ??? ???? ????????. ??? ??????????? ????????, ???? ????? ?? ??????, <command>net</command> ????????????? ????? ????????????? ????? ???????? <constant>ads</constant>, <constant>rpc</constant>, ? <constant>rap</constant>. ??????????, ?????????? ? ????????? ??????????? ?? ????? ?????? ??????? ???????????? ???? ???????.</para>

	</sect1>

	<sect1>
	<title>?????????? ???????? UNIX ? Windows </title>

	<para><indexterm><primary>Active Directory</primary></indexterm><indexterm><primary>net</primary><secondary>rpc</secondary></indexterm><indexterm><primary>net</primary><secondary>ads</secondary></indexterm><indexterm><primary>net</primary><secondary>rap</secondary></indexterm><indexterm><primary>RAP</primary></indexterm> ??? ????????? ?????, ??????? ????? ???? ????? ?????????? ?? ????????????? ????????? ???????? <command>net rpc</command>, ?????????????? Samba. ??????? ????? ?? ??? ?????????????? ??????? <command>net ads</command> ??? ????????????? ????????? ? Active Directory. ????? ?????? <command>net rap</command> ????? ?????????????? ??? ????????? ?? ???? ????????. ????????? RAP ???????????? IBM OS/2 ? ?????????? ??????? ????????? SMB.</para>

	<para><indexterm><primary>net</primary></indexterm><indexterm><primary>?????????? ??????????????</primary></indexterm><indexterm><primary>?????????? ????????</primary></indexterm> ??????? Samba <command>net</command> ????? ?????????? ????????????, ????? ????????? ??? ????? ???????????????? ?????? ?? ????????? ??????. ? ???? ??????? ??????????????? ?????? ?? ???????? ???????????? ?? ?????????? ?????????????? ? ????????.</para>

	<para><indexterm><primary>??????</primary></indexterm><indexterm><primary>????????</primary><secondary>??????</secondary></indexterm><indexterm><primary>?????????</primary><secondary>??????</secondary></indexterm><indexterm><primary>??????? ?????? ???????????? ??????</primary></indexterm> Samba-3 ?????????? ??? ??? ?????: <emphasis>?????? ??????</emphasis> ? <emphasis>????????? ??????</emphasis>. ?????? ?????? ????? ????????? ?????? ??????? ?????? ????????????? ??????. ????????? ?????? ????? ????????? ????????? ?????????????, ????????????? ?????? ? ?????? ??????.</para>

	<para>?????????? ????????? ?????? - ????????? ????????????? ?????????? ?? ?????? ? ?????? ??? ????????? ??????? ??????, ???????, ??? ??????? ?????? UNIX/Linux, ????? ??????????? ?? ????? ????????? ????????????? ????-??????? Windows.</para>

	<sect2>
	<title>??????????, ?????????????? ??? ???????? ??????? ??????? ?????</title>

	<para>Samba ????????????? Windows-???????? ???????? ?????? ? ?????? ??????. ??????? ???????? ???????, ??????? ??? ?????? ?????????? Windows-?????????, ?????? - ?? ????????????? - ???? ????????????? ? ????, ??????? ????????? ? ??????? ?????????? Windows. ?????? UNIX ???????????? ? ????????? ?? ???? ????? ??? ???????????? ??????? ???????????? ???????????? ??????? UNIX ? ?? ???????? ??????.    </para>

	<para>? Samba ???? ???????, ??????????? ??????? ?????? UNIX ???????????? ?? ?????????? ???????, ?????????? "???????? ??????" (??? Windows-??????). Samba ???????????? ??? ???? ????? Windows, ????????? ? ??????????. ? ?????????? ?????? ????? ??????? ? ???????? ?????????? ?????????? ????????????. ??????? ? ???? ??????? ???????????? ???????? ????????? UNIX, ?????? ??? ???? ???????????? UNIX ??????????? ? ?????? UNIX. ??????? ?????? ???????????? Windows ??????? ?? ?????? ????? SambaSAMAccount (?????????? ??????) ? ???????????????? ??????? ??????? UNIX. ?????????????, ???????????? UNIX ???????????? ? ???????????? Windows (?.?. ??? ????????????? ??????? ?????? ???????????? Windows ? ??????????????? ??????), ? ?????? UNIX, ? ??????? ??????????? ????????????, ???????????? ? ?????? Windows. ??????????? ? Windows-????????? ??????? ??????? ???????????? ????? ??????? ? Windows-?????? ??????????? ??????? ? ??????? UNIX.</para>

	<para>????????? ??????????, ? ??????? ??????? ?????????? ???????? Windows, ????????????? ????????? ????? ???????? ???????? ????? UNIX (? ?? ???????) ? ???????????????? ???????? Windows. ????? ????????, ??? ????? ?????? UNIX ????????????? ?????????? ? ?????? Windows ????? ????? ???????????? ??????????? ???????????. </para>

	<sect3>
	<title>?????????? ??? ???????? ????? ??????</title>

	<para>????? ???????? ???????? ??????? ?????? ?????? Windows ????? ??????????? ???????????? ??????, ??? ???????? ?????: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>group</tertiary></indexterm><indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>group list</tertiary></indexterm><screen>
&rootprompt; net rpc group list -Uroot%not24get
Password:
Domain Admins
Domain Users
Domain Guests
Print Operators
Backup Operators
Replicator
Domain Computers
Engineers
</screen></para>

<?latex \newpage ?>
	<para>??????? ?????? ?????? Windows ??? ????????? <quote>SupportEngrs</quote> ????? ???? ????????? ??????????? ????????? ??????: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>group add</tertiary></indexterm><screen>
&rootprompt; net rpc group add "SupportEngrs" -Uroot%not24get
</screen> ?????????? ???????? ? ?????????? ??????????? ????? ??????? ?????? ??????, ??? ???????? ????: <screen>
&rootprompt; net rpc group list -Uroot%not24get
Password:
Domain Admins
Domain Users
Domain Guests
Print Operators
Backup Operators
Replicator
Domain Computers
Engineers
SupportEngrs
</screen></para>

	<para><indexterm><primary>POSIX</primary></indexterm><indexterm><primary>smbldap-groupadd</primary></indexterm><indexterm><primary>getent</primary></indexterm> ????? ???????????????, ??? ??????? ?????? ?????? POSIX (????????? ?????? UNIX/Linux) ???? ??????? ??????? ????????????? ???????? <smbconfoption name="add group script">/opt/IDEALX/sbin/smbldap-groupadd -p "%g"</smbconfoption>: <screen>
&rootprompt; getent group
...
Domain Admins:x:512:root
Domain Users:x:513:jht,lct,ajt,met
Domain Guests:x:514:
Print Operators:x:550:
Backup Operators:x:551:
Replicator:x:552:
Domain Computers:x:553:
Engineers:x:1002:jht
SupportEngrs:x:1003:
</screen> ????? ???????????????, ??? ????????????? ??????? <command>net</command> ??? ?????????? ??????? ?????? ?????? ????????? ????????????????? ??????????? ????????? ?????? POSIX, ?? ?????? Windows: <indexterm><primary>net</primary><secondary>groupmap</secondary><tertiary>list</tertiary></indexterm><screen>
&rootprompt; net groupmap list
Domain Admins (S-1-5-21-72630-4128915-11681869-512) -&gt; Domain Admins
Domain Users (S-1-5-21-72630-4128915-11681869-513) -&gt; Domain Users
Domain Guests (S-1-5-21-72630-4128915-11681869-514) -&gt; Domain Guests
Print Operators (S-1-5-21-72630-4128915-11681869-550) -&gt; Print Operators
Backup Operators (S-1-5-21-72630-4128915-11681869-551) -&gt; Backup Operators
Replicator (S-1-5-21-72630-4128915-11681869-552) -&gt; Replicator
Domain Computers (S-1-5-21-72630-4128915-11681869-553) -&gt; Domain Computers
Engineers (S-1-5-21-72630-4128915-11681869-3005) -&gt; Engineers
SupportEngrs (S-1-5-21-72630-4128915-11681869-3007) -&gt; SupportEngrs
</screen></para>

	</sect3>

	<sect3>
	<title>??????????? ????? Windows ?? ?????? UNIX</title>

	<para><indexterm><primary>????????????</primary></indexterm><indexterm><primary>?????? Windows</primary></indexterm><indexterm><primary>????????? ??????</primary></indexterm><indexterm><primary>???????? ???????</primary></indexterm> ?????? Windows ?????? ???? ?????????? ? ????????? ?????? UNIX (POSIX), ??? ??? ???????? ??????? ? ???????? ??????? ????? ???? ??????????? ?????????? ? ?????????, ??????????? ??? ???????????? ???????, ?? ??????? ???????? ?????? Samba.</para>

	<para><indexterm><primary>???????? ???????</primary></indexterm><indexterm><primary>UID</primary></indexterm><indexterm><primary>GID</primary></indexterm><indexterm><primary>????????? UID</primary></indexterm> ???? ???????? ??????? ? ???????? ??????? (?????? ? ?????????) ?????? ???????? ??????? ??????? UNIX/Linux, ??????? ?????? Samba, ???????? ? ?????????????? UID/GID. Samba ??????? ???????? ?? ??????????? ??? ???????? ????????? ???????? ??????? UNIX. ????? ???????, ??????????, ????? ??? ??????? ???????? Windows, ??????? ????????? ?????? ? ???????? ???????, ????????????? ????????, ???????????? ???????????? Windows ?? ?????????? ??????? ?????? ?????? UNIX/Linux. ??????? ?????? ???????????? ????? ?????? ???????????? ?? ???????? ?????????  UID. ????????, ??? ??????? <command>net</command> ? ???? ?????? ?? ???????? ????? ??????? RPC, ?? ???????? ?????????? ? ????????? ????.</para>

	<para><indexterm><primary>??????????? ?? ?????????</primary></indexterm><indexterm><primary>Domain Admins</primary></indexterm><indexterm><primary>Domain Users</primary></indexterm><indexterm><primary>Domain Guests</primary></indexterm><indexterm><primary>?????? Windows</primary></indexterm><indexterm><primary>?????? UNIX</primary></indexterm><indexterm><primary>???????????</primary></indexterm> Samba ??????? ?? ??????????? ?? ????????? ??? ?????????? ????? <constant>Domain Admins, Domain Users</constant>, ? <constant>Domain Guests</constant>. ?????????????? ?????? ????? ???? ??????? ???, ??? ???????? ? ???????. ???? ??????, ????? ?????????? ?????????? ??????????? ??????? ?????? ?????? UNIX ? ?????? Windows. ??? ????????, ? ????????, ??????? ??????? ?????? ?????? Windows - ??? ??????????? ???????? ???????????.</para>

	<para><indexterm><primary>net</primary><secondary>groupmap</secondary><tertiary>modify</tertiary></indexterm><indexterm><primary>net</primary><secondary>groupmap</secondary><tertiary>add</tertiary></indexterm><indexterm><primary>net</primary><secondary>groupmap</secondary><tertiary>delete</tertiary></indexterm> ????????? ???????? ????????: <constant>add</constant>, <constant>modify</constant> ? <constant>delete</constant>. ?????? ?????? ???????? ??????? ?????.</para>

	<note><para>??????? ? Samba-3.0.23, ???????? ?????? Windows ?????? ???? ??????? ????? ???????. ?? ????????? ??? ?????? UNIX ????????????? ???? Windows ??? ????????? ?????? Windows.</para></note>

	<para>???????????? ?????? UNIX ????? ???? ?????????? ? ???????????? ?????? Windows, ??? ? ???? ???????: <screen>
&rootprompt; net groupmap modify ntgroup="Domain Users" unixgroup=users
</screen> ???????????? ?????? UNIX ????? ???? ?????????? ? ????? ?????? Windows, ??? ???????? ?????: <screen>
&rootprompt; net groupmap add ntgroup="EliteEngrs" unixgroup=Engineers type=d
</screen> ?????????????? ???? ??????????? - 'd' (?????????? ?????? ??????) ? 'l' (????????? ?????? ??????). ?????? Windows ????? ???? ???????, ? ????? ????? ?????? Windows ????? ???? ?????????? ? ?????? UNIX ??????????? ????????? ??????: <screen>
&rootprompt; net groupmap delete ntgroup=Engineers
&rootprompt; net groupmap add ntgroup=EngineDrivers unixgroup=Engineers type=d
</screen> ???????? ?????????? ? ???????? ????????? ?????? ?????????? ????????, ????????? ??? ?????? Windows, ??? ?????? ??????. ??? ???????? ??????? ?? ????????? ? ????????? ??????? UNIX, ??? ?????? - ??? ?? ???????, ?? ??????? ????????? ?????? UNIX. ??????????? ?????? UNIX ?? ?????? Windows ?????? ?????? UNIX ????????? ??? ?????? Windows, ??? ??? ?????? ? ?????? ?? ????????-?????????? ?????? - ??????? ???????? ? ???????? - ????? ???? ????????? ?????? ???????? ??????? ?? ?????? ??? ????? ?????? ????????????? ? ?????.</para>

	<para>????? ???? ??????? ??? ???? ????? Windows: <constant>???????? (??????????) </constant> ? <constant>?????????</constant>. ? ?????????? ???????? ????????? ?????? ????? ??? <constant>????????</constant> ??? ??????????. ????????? ??????? ??????? <constant>?????????</constant> ?????? Windows.<screen>
&rootprompt; net groupmap add ntgroup=Pixies unixgroup=pixies type=l
</screen> ?????????????? ???? ????? 'd' (?????????? ??????) ? 'l' (????????? ??????), ????????? ?????? ?????? ??????????????? ??? ?????????????? ??? ??????? Samba. ????????? ?????? ????? ?????????????? Samba ??? ????????? ????????? ????????????? ????????? ?????.</para>

	</sect3>

	<sect3>
	<title>???????? ????????? ??????? ??????</title>

	<para><indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>group delete</tertiary></indexterm> ????????? ??????? ?????? ????? ???? ??????? ??????????? ????????? ???????: <screen>
&rootprompt; net rpc group delete SupportEngineers -Uroot%not24get
</screen></para>

	<para>???????? ????????? ????????. ?? ?? ??????? ????? ???? ?????????, ??? ???????? ????.</para>

	</sect3>

	<sect3>
	<title>?????????????? ????????? ??????? ???????</title>

	<note><para>??? ??????? ?? ??????????????? ? ????????? ???????????; ??? ????????? ? ???????? ????, ?? ? ????????? ????? ?? ????????. ??????????? ?????? ?????????, ???????? ????????? ????, ??? ??? ?????? ????????. ???????? ? ??????? ?? ?????? ????????? ??????? ??? ????, ????? ???????, ????? ??? ????? ???? ??????????.</para></note>

	<para>?????? ?????????? ????????????? ??????? ?????? ??????. ??????? ?????????????? ?????, ??? ????? ????????? ?????????? ????????? ?????????, ???? ???? ??????? ?????? ????????????. ????????? ??????? ?????????????, ??? ?????? Windows <quote>SupportEngrs</quote> ????? ???? ????????????? ? <quote>CustomerSupport</quote>: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>group rename</tertiary></indexterm><screen>
&rootprompt; net rpc group rename SupportEngrs \
    CustomerSupport -Uroot%not24get
</screen></para>

	</sect3>

	</sect2>

	<sect2 id="grpmemshipchg">
	<title>?????????? ???????? ? ???????</title>

	<para>????? ????????? ??? ????????, ?????????? ??????? ? ???????. ??? (1) ?????????? ????????????? Windows ? ?????? Windows, (2) ???????? ????????????? Windows ?? ????? Windows, ? (3) ???????? ?????? ????????????? Windows, ??????? ?????? ? ?????? Windows.</para>

	<para>????? ????????????? ??????, ????? ????????? ??????? ? ??????? ?? ????? ??????? ?????? ?????????. <command>getent group</command> ??????? ?? ????? ??????? ? ??????? UNIX/Linux. ????????? ????? UNIX/Linux ????? ?????? ??? ????????? ?????? Windows, ???? ??? ???? ?????????? ? ?????????????? ??????? <command>net groupmap</command> (?????? <link linkend="groupmapping"/>). ????????? ?????? ??????? ? ??????? UNIX/Linux ??????????, ??? ???????????? <constant>ajt</constant> ???????? ?????????? ?????? <constant>Engineers</constant>. <screen>
&rootprompt; getent group
...
Domain Admins:x:512:root
Domain Users:x:513:jht,lct,ajt,met,vlendecke
Domain Guests:x:514:
Print Operators:x:550:
Backup Operators:x:551:
Replicator:x:552:
Domain Computers:x:553:
Engineers:x:1000:jht,ajt
</screen> ?????? UNIX/Linux ???? ?????????? ?? ?????? Windows, ??? ???????? ?????: <screen>
&rootprompt; net groupmap list
Domain Admins (S-1-5-21-72630-412605-116429-512) -&gt; Domain Admins
Domain Users (S-1-5-21-72630-412605-116429-513) -&gt; Domain Users
Domain Guests (S-1-5-21-72630-412605-116429-514) -&gt; Domain Guests
Print Operators (S-1-5-21-72630-412605-116429-550) -&gt; Print Operators
Backup Operators (S-1-5-21-72630-412605-116429-551) -&gt; Backup Operators
Replicator (S-1-5-21-72630-412605-116429-552) -&gt; Replicator
Domain Computers (S-1-5-21-72630-412605-116429-553) -&gt; Domain Computers
Engineers (S-1-5-21-72630-412605-116429-3001) -&gt; Engineers
</screen></para>

	<para>???????????, ??? ???????????? <constant>ajt</constant> ??? ???????? ?????? ?????? UNIX/Linux, ?, ????? ??????????? ?????, ?????? ?????? Windows, ????? ??????? ????? ???????? ??? ??????? ?????? ????????? ????????. ??? ?????????????????? ?????: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>group addmem</tertiary></indexterm><screen>
&rootprompt; net rpc group addmem "MIDEARTH\Engineers" ajt -Uroot%not24get
Could not add ajt to MIDEARTH\Engineers: NT_STATUS_MEMBER_IN_GROUP
</screen> ??? ??????????, ??? ??????????? ????? UNIX/Linux ? Windows ???????? ??????????? ? ??????????.</para>

	<para>????? ???????????? <constant>ajt</constant> ????? ???? ????????, ????????? ??????? <command>net rpc group</command>, ?????????? ?????? ??? ??????? ??????. ???????? ? ???????? ??? ???????????? ???????? ?????: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>group delmem</tertiary></indexterm><screen>
&rootprompt; net rpc group delmem "MIDEARTH\Engineers" ajt -Uroot%not24get
&rootprompt; getent group Engineers
Engineers:x:1000:jht
&rootprompt; net rpc group members Engineers -Uroot%not24get
MIDEARTH\jht
</screen> ? ???? ??????? ? ?? ?????? ??????? UNIX/Linux ?????? ????? ?? ???????? ????????? <constant>ajt</constant>. ?????? ???? ??????????, ??? ??? ???????? ? ??????? ? ?????? Windows.</para>

	<para>?????? ??????? ?????? ????? ??????????? ? ?????????????? ??????? <command>net rpc group</command>: <screen>
&rootprompt; net rpc group addmem "MIDEARTH\Engineers" ajt -Uroot%not24get
&rootprompt; getent group Engineers
Engineers:x:1000:jht,ajt
&rootprompt; net rpc group members Engineers -Uroot%not24get
MIDEARTH\jht
MIDEARTH\ajt
</screen></para>

	<para>? ???? ??????? ????????? ??????? ?????? ?????? Windows <constant>Domain Users</constant> ??????????? ?????????????? ??????? <command>net rpc group</command>. ????????, ??? ?????????? ?????? UNIX/Linux ???? ???????? ???????? ??????????? ????. ????????? (????????) ?????? Windows ???????? ?????:<indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>group members</tertiary></indexterm><screen>
&rootprompt; net rpc group members "Domain Users" -Uroot%not24get
MIDEARTH\jht
MIDEARTH\lct
MIDEARTH\ajt
MIDEARTH\met
MIDEARTH\vlendecke
</screen> ???? ????????-?????? ??????????, ??? ????? ????? Windows ??????????????? Samba (??? ? MS Windows) ??????????????????: <screen>
&rootprompt; net rpc group members "DomAiN USerS" -Uroot%not24get
MIDEARTH\jht
MIDEARTH\lct
MIDEARTH\ajt
MIDEARTH\met
MIDEARTH\vlendecke
</screen></para>

	<note><para>??????? ??????? ??? ?????? <constant>MIDEARTH\Domain Users</constant> ?????? ?????? <constant>Domain Users</constant> ?????????? ????????. ????????? ?? ????????? ??????? net rpc group - ?????????? ??????? ?? ????????? ??????. ?????? Windows ??????????????? ??? ????????? ??? ??????. ???? ?????????? ???????? ?????? ??????, ?? ??? ????? ???????  ?????????????? ????????? <constant>-S ???_???????</constant> ??? ??????? <command>net</command>.</para></note>

	</sect2>

	<sect2 id="nestedgrpmgmgt">
	<title>????????? ????????? ?????</title>

	<para>? Windows ???????? (? ?????? ? ? Samba) ????????? ????????? ??????, ??????? ????? ?????????? (???????? ? ????) ????????????? ?????? ? ?????????? ?????? ??????. ???????? ????????? ?????? <constant>demo</constant> ???????? ???: <screen>
&rootprompt; net rpc group add demo -L -S MORDON -Uroot%not24get
</screen> ????????????? -L ?????? "????????? ????????? ??????". ??????????? -S ???_???????, ????? ???????? ???????? ?? ?????? ???????. ??????????? ????????? -U ?????? ???? ????????????, ??????? ?????????? ????? ?? ????????? ??????, ? ??? ??????.</para>

	<para>?????????? ? ???????? ?????????? ????? ????? ???? ??????? ? ?????????????? ????????? <constant>addmem</constant> ? <constant>delmem</constant> ??????? <command>net rpc group</command>. ????????, ?????????? <quote>DOM\Domain Users</quote> ? ????????? ?????? <constant>demo</constant> ????? ??????? ???: <screen>
&rootprompt; net rpc group addmem demo "DOM\Domain Users" -Uroot%not24get
</screen></para>

	<para>????? ??????????? ?????????? ?????? ? ????????? ????????? ???????: <screen>
&rootprompt; net rpc group members demo -Uroot%not24get
DOM\Domain Users
DOM\Engineers
DOM\jamesf
DOM\jht
</screen></para>

	<para>????????? ?????? ? ????????? ????? ???? ???????, ??? ???????? ?????:<screen>
&rootprompt; net rpc group delmem demo "DOM\jht" -Uroot%not24get
</screen></para>

	<sect3>
	<title>?????????? ?????????? ???????? ?? ??????? ???????? ? ??????? Samba</title>

	<para>??????? ?????????????? Windows ????? ?????????? ? ??????? ???????? Samba, ??? ???? ???? ????? ?????????????? ?? ????? ??????????? ??????? ????????. ???????, ??? ?????? ????????,  ?? ??? ?????? ???????????? ??? ????????? ????? ?????????????. ??? ??? ??? ????? ??????? ? PDC ??? BDC Samba:<indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>group addmem</tertiary></indexterm><screen>
&rootprompt; net rpc group addmem "Administrators" "Domain Users" \
     -S WINPC032 -Uadministrator%secret
</screen></para>

	<para>??? ????? ???????? ? ????????, ?, ?????????????, ??? ????? ?????? ??? ????? ???????????? ?? ??????? ??????? Windows. ??? ??????? ??????, ???????????? ??? ??? ????? ???????.</para>

	<procedure>
	<title>?????????????? ?????????? ???????????? ? ?????? "??????? ????????????" ??????? ???????</title>

		<step><para>???????? ????????, ?????????? ? <link linkend="autopoweruserscript"/>, ?????????? ??? ? ???????? <filename>/etc/samba/scripts</filename>, ?????? <filename>autopoweruser.sh</filename>.<indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>group addmem</tertiary></indexterm><indexterm><primary>autopoweruser.sh</primary></indexterm><indexterm><primary>/etc/samba/scripts</primary></indexterm></para></step>

<example id="autopoweruserscript">
<title>???????? ??? ??????????????? ?????????? ????????????? ?????? ? ?????? "??????? ????????????" ??????? ???????</title>
<screen>
#!/bin/bash

/usr/bin/net rpc group addmem "Power Users" "DOMAIN_NAME\$1" \
                   -UAdministrator%secret -S $2

exit 0
</screen>
</example>

		<step><para>?????????? ?????????? ?? ????????, ????? ????????? ??? ??????????? ??? ????? ???????? ?????: <screen>
&rootprompt; chown root:root /etc/samba/autopoweruser.sh
&rootprompt; chmod 755 /etc/samba/autopoweruser.sh
</screen></para></step>

		<step><para>???????? ???? &smb.conf; ???, ????? ?????? <literal>NETLOGON</literal> ????????? ?????????, ?????????? ? <link linkend="magicnetlogon">???? smb.conf ? ???????? Netlogon</link>.</para></step>

<example id="magicnetlogon">
<title>????????? ?????? Netlogon</title>
<smbconfblock>
<smbconfsection name="[netlogon]"/>
<smbconfoption name="comment">????? ?????? Netlogon</smbconfoption>
<smbconfoption name="path">/var/lib/samba/netlogon</smbconfoption>
<smbconfoption name="root preexec">/etc/samba/scripts/autopoweruser.sh %U %m</smbconfoption>
<smbconfoption name="read only">??</smbconfoption>
<smbconfoption name="guest ok">??</smbconfoption>
</smbconfblock>
</example>

		<step><para>??????????????, ??? ??????? ?????? ?????????????? ?????? ??????? ??????? Windows ????? ??? ?? ??????, ??????? ?? ???????????? ? ????????, ?????????? ? <link linkend="magicnetlogon">????? smb.conf ??????? Netlogon</link></para></step>

</procedure>

	<para>???? ???????? ????? ???????? ?????? ???, ????? ???????????? ?????? ? ????. ?????????????, ?????? ???????????? ????? ????? ????? ?????????? ????????? ??????? ???????? Windows. ???????, ??? ????? ???? ??????? ? ?????????????? ??????, ? ???? ?????? ????????????? ???? ????????? ????????? ? ????????? ?????????. ???????? ??????????? ????????????? ????? ?????? ? ???, ??? ?? ??????????? - ??? ???????????? ????? ????? ??????????? ????? ?? ????? ??????? ???????.</para>

	</sect3>

	</sect2>

	</sect1>

	<sect1>
	<title>?????????? ?????????????? UNIX ? Windows </title>

	<para><indexterm><primary>??????? ?????? ????????????</primary></indexterm><indexterm><primary>??????? ?????? ???????????? UNIX/Linux</primary></indexterm><indexterm><primary>UID</primary></indexterm><indexterm><primary>??????? ?????? POSIX</primary></indexterm><indexterm><primary>????????</primary></indexterm><indexterm><primary>??????? ?????? ????????????? Windows</primary></indexterm><indexterm><primary>winbindd</primary></indexterm><indexterm><primary>?????????? ?? ??????? ??????</primary></indexterm> ?????? ??????? ?????? ???????????? ???? Windows ?????? ???? ????????????? ? ??????? ?????? ???????????? UNIX/Linux. ?? ????? ???? ???????????? ??????????, ??????? ????????? ?????? Samba ??? UNIX/Linux Samba - ??? UID. UID ???????? ???? ?? ????????? ??????? ?????? (POSIX) ??? ?? "????" (?????????) ??????? UID, ??????? ???????? ?????????? ??? ????????????? ? ????????????? ???????? ???????? ????????????. ? ?????? "????" UID ??? ??????????? ???????????? UID ????? ?????????????? <command>winbindd</command>.</para>

	<para>???????? ?? ??, ??? ??? ???????????? ????? ??? ?????????? ??????? <smbconfoption name="username map"/>, ??? ??????? ???????? ?????? ???????? ??????????? ???????????? Windows ?? ??????? ?????? UNIX, ??????? ?????? ???. ?????????? ? ????????? ??????? ?? ????? &smb.conf; ?? ?????????? ???????????, ?????????? ???? ???????. ??????????? ???? ????????????? ?? ????? ??????????? ?????????????? ??????? <command>net</command>.</para>

	<sect2 id="sbeuseraddn">
	<title>?????????? ??????? ???????</title>

	<para>????????? ?????????? ??????? ?????? ???????????? ???????? <command>net</command> (???????? ????????? ???????????) ???????? ?????:<screen>
net [&lt;?????&gt;] user ADD &lt;???&gt; [-c ?????????] [-F ?????_????????????] \
    [?????? ?????] [????]
</screen> ????????????? ?????? ???????????? ????? ???? ?????????? ???????? ?????????? ??????????:<screen>
net rpc password &lt;???_????????????&gt; [&lt;??????&gt;] -U???_??????????????%??????_??????????????
</screen></para>

	<para>???? ?????????????????? ?????????? ??????? ?????? ?? ?????? <constant>FRODO</constant>: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>user add</tertiary></indexterm><indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>user password</tertiary></indexterm><screen>
&rootprompt; net rpc user add jacko -S FRODO -Uroot%not24get
Added user jacko (???????? ???????????? jacko)
 </screen> ?????? ??????? ?????? ????? ?????????? ?????????? ????????? (????? ???????? ???? ? ?? ??): <screen>
&rootprompt; net rpc password jacko f4sth0rse -S FRODO -Uroot%not24get
&rootprompt; net rpc user password jacko f4sth0rse \
    -S FRODO -Uroot%not24get
</screen></para>

	</sect2>

	<sect2>
	<title>???????? ??????? ???????</title>

	<para>???????? ???????????????? ??????? ?????? ????? ???? ??????? ????????? ???????:<screen>
net [&lt;?????&gt;] user DELETE &lt;???&gt; [????. ?????.] [????]
</screen> ????????? ??????? ?????? ??????? ?????? ???????????? <constant>jacko</constant>: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>user delete</tertiary></indexterm><screen>
&rootprompt; net rpc user delete jacko -Uroot%not24get
Deleted user account
</screen></para>

	</sect2>

	<sect2>
	<title>?????????? ???????? ????????</title>

	<para>? ???????? ???????????? ??? ???????? ???????? ? ???????? ???????? ?????????????: ????????? ?????? ? ??????, ? ????? ??????? ????????? ????????????. ???????? ????????? ?????? ???????? ? <link linkend="sbeuseraddn"/>.</para>

	<para>??????????? ?????????? ?????? ????? Windows ????? ???? ??????. ????? ????????, ??? ????? ??????????? ????????? ??????, ????? ???????, ? ????? ??????? ??????????? ????????????:<indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>user info</tertiary></indexterm><screen>
&rootprompt; net rpc user info jacko -S SAURON -Uroot%not24get
net rpc user info jacko -S SAURON -Uroot%not24get
Domain Users
Domain Admins
Engineers
TorridGroup
BOP Shop
Emergency Services
</screen></para>

	<para>??? ?? ???????? ????????????? ???????????????? ??????? ??????: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>user rename</tertiary></indexterm>??????_???_???????????? ?????_???_????????????</para>

	</sect2>

	<sect2>
	<title>??????????? ?????????????</title>

	<para><indexterm><primary>??? ?????</primary></indexterm><indexterm><primary>/etc/samba/smbusers</primary></indexterm><indexterm><primary>??????????? ????? ????????????</primary></indexterm> ? ????????? ????????? ?????????? ???????? ??????? ????? ???????????? ??? ????? ? Windows ? ID ????? ?? ??????? Samba. ????? ??????? ??????????? ???? ?? ??????? Samba, ??????? ???????? ????? ???????????? Windows ???????????? ?? ?????? ??? ???????????? UNIX/Linux. ???? &smb.conf; ????? ?????? ???? ??????? ???, ????? ?????? <constant>[global]</constant> ????????? ????????: <screen>
username map = /etc/samba/smbusers
</screen> ?????????? ????? <filename>/etc/samba/smbusers</filename> ???????? ?????: <screen>
parsonsw: "William Parsons"
marygee: geeringm
</screen> ? ???? ??????? ??????? ?????? ???????????? Windows <quote>William Parsons</quote> ????? ?????????? ?? ???????????? UNIX <constant>parsonsw</constant>, ? ??????? ?????? ???????????? Windows <quote>geeringm</quote> ????? ?????????? ?? ???????????? UNIX <constant>marygee</constant>.</para>

	</sect2>

	</sect1>

	<sect1>
	<title>?????????? ??????? ? ???????????? ?????????????</title>

	<para><indexterm><primary>?????? ??????? ??????</primary></indexterm><indexterm><primary>????????? ??????????</primary></indexterm><indexterm><primary>????????? ?????? ?????????</primary></indexterm><indexterm><primary>????????? ????????</primary></indexterm><indexterm><primary>????????? ??????????????</primary></indexterm> ?? ???? ??????? Samba ?? 3.0.11 ???????????? ??????? ??????? ?? ??????? Samba, ??????? ????? ????????? ??????????????, ????????, ?????? ?????????, ????????? ? ?.?. ???? ??????? ?????? <constant>root</constant>. ??? ????????? ???????? ??? ????????? ????????????? ? ???? ?????? ?????????? ?????? ??-?? ????????????? ???????? ??????? ?????? ?? ????? ?????? ? ?????? ???????????? ??????? ?????? ??????? UNIX/Linux.</para>

	<para><indexterm><primary>???????? ???????????????? ??????????</primary></indexterm><indexterm><primary>??????? ????????????</primary></indexterm><indexterm><primary>????? ? ??????????</primary></indexterm><indexterm><primary>?????????? ????????????</primary></indexterm><indexterm><primary>?????? ?????????????</primary></indexterm> ????? ? Samba 3.0.11 ???????? ??????????? ??? ????????????? ?????????? ???????????????? ?????????? ??????? ????????????? ???? ??????? ?????????????. ???????? ???????????????? ?????????? ??????? ? <link linkend="rights"/>. ??????? ????????????? <command>net</command> ??? ?????????? ??????? ? ???????????? ????????????? ????????? ? ???? ?????.</para>

	<note><para>????? ???????????????? ????? ? ?????????? ????????? ?????????, ?????? ?? ????????? ??????? ?????? ???? Windows ??? ???????????? <constant>root</constant> (??? ?????? ??? ????????) ? UNIX UID=0. ????????? ???????????????? ????? ? ?????????? ????? ???? ????????? ????? ??????? ???????, ??????? ?????? ? ?????? <constant> Domain Admins</constant>. ????? ????? ??????????? ??? ????????????????, ??? ? ????????? ??????? ???????.</para></note>

	<para>?? ????????? ?? ????????? ?? ?????, ?? ??????????. ??? ??????????????? ????????, ?????????? ?????:<screen>
&rootprompt; net rpc rights list accounts -U root%not24get
BUILTIN\Print Operators
No privileges assigned

BUILTIN\Account Operators
No privileges assigned

BUILTIN\Backup Operators
No privileges assigned

BUILTIN\Server Operators
No privileges assigned

BUILTIN\Administrators
No privileges assigned

Everyone
No privileges assigned
</screen></para>

	<para>??????? <command>net</command> ????? ???????????? ??? ????????? ??????? ?????????????? ????????? ???? ? ?????????? ????????? ????????: <indexterm><primary>SeMachineAccountPrivilege</primary></indexterm><indexterm><primary>SePrintOperatorPrivilege</primary></indexterm><indexterm><primary>SeAddUsersPrivilege</primary></indexterm><indexterm><primary>SeRemoteShutdownPrivilege</primary></indexterm><indexterm><primary>SeDiskOperatorPrivilege</primary></indexterm><indexterm><primary>SeBackupPrivilege</primary></indexterm><indexterm><primary>SeRestorePrivilege</primary></indexterm><indexterm><primary>SeTakeOwnershipPrivilege</primary></indexterm><indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>rights list</tertiary></indexterm><screen>
&rootprompt; net rpc rights list -U root%not24get
SeMachineAccountPrivilege  Add machines to domain ?????????? ????? ? ??????
SePrintOperatorPrivilege  Manage printers ?????????? ??????????
SeAddUsersPrivilege  Add users and groups to the domain ?????????? ????????????? ? ????? ? ??????
SeRemoteShutdownPrivilege  Force shutdown from a remote system ????????? ?????????? ??????
SeDiskOperatorPrivilege  Manage disk shares ?????????? ????????? ?????? ????????? 
SeBackupPrivilege  Back up files and directories ????????? ??????????? ?????? ? ?????????
SeRestorePrivilege  Restore files and directories ?????????????? ?????? ? ?????????
SeTakeOwnershipPrivilege  Take ownership of files or other objects ????????? ??????? ? ??????? ?????????
</screen> ?????????? ??????? ?????? ?????????? ?????????? ??? ????, ????? ????????? ???????? ??????? Windows NT ??? ??????? ? ?????. ?????????? ????????? ????????? ??????????, ????? ????????? ???????????? ????????? ???????? ???????? ??????? ????? ???????? ? ???????? ???????? ??????? ?????? ? ?????????, ?? ????????????? ????????????.</para>

	<para>? ???? ??????? ??? ????? ????????? ?????? <constant>Domain Admins</constant>. ??? ???????? ??????? ?????, ????????? ?? ?????? ???? ?????? ?????? ??????? ?????????????. ??? ?????????? ?????????? ???? ? ??????????: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>rights grant</tertiary></indexterm><screen>
&rootprompt; net rpc rights grant "MIDEARTH\Domain Admins" \
    SeMachineAccountPrivilege SePrintOperatorPrivilege \
    SeAddUsersPrivilege SeRemoteShutdownPrivilege \
    SeDiskOperatorPrivilege  -U root%not24get
Successfully granted rights.
</screen> ????? ????????? ???????????? <constant>jht</constant> ???????? ??????????, ??????????? ??? ???????????? ????? ??????????????????: <screen>
&rootprompt; net rpc rights grant "MIDEARTH\jht" \
    SeMachineAccountPrivilege SePrintOperatorPrivilege \
    SeAddUsersPrivilege SeDiskOperatorPrivilege \
    -U root%not24get
Successfully granted rights.
</screen></para>

	<para>????????? ????? ??????????? ???????? ?????? ??? ????????? ?????????: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>rights list accounts</tertiary></indexterm><screen>
&rootprompt; net rpc rights list accounts -U root%not24get
MIDEARTH\jht
SeMachineAccountPrivilege
SePrintOperatorPrivilege
SeAddUsersPrivilege
SeDiskOperatorPrivilege

BUILTIN\Print Operators
No privileges assigned

BUILTIN\Account Operators
No privileges assigned

BUILTIN\Backup Operators
No privileges assigned

BUILTIN\Server Operators
No privileges assigned

BUILTIN\Administrators
No privileges assigned

Everyone
No privileges assigned

MIDEARTH\Domain Admins
SeMachineAccountPrivilege
SePrintOperatorPrivilege
SeAddUsersPrivilege
SeRemoteShutdownPrivilege
SeDiskOperatorPrivilege
</screen></para>

	</sect1>

	<sect1>
	<title>?????????? ??????????? ???????</title>

	<para>? ????????, ?????????? ??? ???? ????????????? ?????????: ?????? - ????? ????????????? ?????? ? ??? ??????????? (???????? ?????????), ?????? - ????? ???????? (?????????? ???????????? ?????????????? ???????????). ??? ??????? Samba, ??????? ????????? ? ???????????? ??????, ????????? ? ??????? ?????? ??????? ???????????? ??????, ??? ??, ??? ? ??????? ??????? Windows NT/200x/XP.</para>

	<sect2>
	<title>?????????? ???????? ???????? ???????</title>

	<para>??????? net ?????? ???? &smb.conf; ??? ????????? ????? ??????????? ????????. ????? ???????, ????????? ??????? "?????", ? ?????? ?????? ??????????????, ?? ?????  &smb.conf;.</para>

	<para>????????????? ??????? ?????? ??????? ? ?????? ????? ???? ????????? ???, ??? ???????? ? ???????: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>testjoin</tertiary></indexterm><screen>
&rootprompt; net rpc testjoin
Join to 'MIDEARTH' is OK
</screen> ???? ??????? ?????? ????????? ?????? ???????????, ???? ??????? ?????? ?????? ?? ?????, ????? ??????????? ????????? ?????????: <screen>
net rpc testjoin -S DOLPHIN
Join to domain 'WORLDOCEAN' is not valid
</screen></para>

	<para>????????????? ??????? ??? ????????????? ??????? Samba ? ?????? Windows ADS ???????? ?????: <indexterm><primary>net</primary><secondary>ads</secondary><tertiary>testjoin</tertiary></indexterm><screen>
&rootprompt; net ads testjoin
Using short domain name -- TAKEAWAY
Joined 'LEMONADE' to realm 'TAKEAWAY.BIZ'
</screen> ? ??????, ???? ????????????? ????????? ADS ?? ???? ???????????, ??? ?? ?????-?? ??????? ?????????, ????? ????????? ????????? ????????? ?? ??????: <screen>
&rootprompt; net ads testjoin -UAdministrator%secret
Join to domain is not valid
</screen></para>

	<para>???? ????????????????? ??????? ???????? ??????? ?????? ?????? ? ??????? ?????? ??? ??????? Samba, ?? ??????? ??????????? ???????: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>join</tertiary></indexterm><screen>
&rootprompt; net rpc join -S FRODO -Uroot%not24get
Joined domain MIDEARTH.
</screen> ????????????? ??????? Samba ? ?????? Samba ???????? ? ???????? ??????? ?????? ??????????. ???? ??????? ?????? ?????: <screen>
&rootprompt; pdbedit -Lw merlin\$
merlin$:1009:9B4489D6B90461FD6A3EC3AB96147E16:\
176D8C554E99914BDF3407DEA2231D80:[S          ]:LCT-42891919:
</screen> ????? S ? ?????????? ??????? ????????, ??? ??? ??????? ?????? ??????? (PDC/BDC). ????????? ? ?????? ????? ???????????? ? ??? ??????? ???????, ? ???? ?????? S ????? ???????? ?? W (workstation). ??? ????? ????? ????????? ????????? ???????: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>join member</tertiary></indexterm><screen>
&rootprompt; net rpc join member -S FRODO -Uroot%not24get
Joined domain MIDEARTH.
</screen> ????????, ??? ???????? ????????? ?????? <constant>member</constant> ???????? ??? ????????????? ? ?????? ?? ???????????. ?? ????????? ??? ????????? ?? ???????????? ????? &smb.conf;. ??? ????, ????? ???? ??????? ????????????? PDC ??? BDC, ? ????????? ?????? ????? ??????? ???????? <constant>[PDC | BDC]</constant>. ????????: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>join bdc</tertiary></indexterm><screen>
&rootprompt; net rpc join bdc -S FRODO -Uroot%not24get
Joined domain MIDEARTH.
</screen> ????? ????? ????????? Samba ???????? ??? ????????????? ? ?????? ?? ???????? ? ????? &smb.conf;.</para>

	<para>??????? ??? ????????????? ??????? Samba ? ?????? Windows ADS ???????? ???: <indexterm><primary>net</primary><secondary>ads</secondary><tertiary>join</tertiary></indexterm><screen>
&rootprompt; net ads join -UAdministrator%not24get
Using short domain name -- GDANSK
Joined 'FRANDIMITZ' to realm 'GDANSK.ABMAS.BIZ'
</screen></para>

	<para>?? ?????????? ??????????? ????? ??? ???????? ??????? ?????? ?????????? ?? ?????? NT4. ????? ????????? ? Windows, ?????????? ? ??????, ????????? ?? ????, ??????? ?????? ????????? ?????? ?? ????????? ?????????????. ??????? ?????? ?????????? ?????????? ?????? ????? ???????, ????????? ????? ??????? ??????????. ???? ??????????, ??????? ?????? ?????????? ????? ?????? ????????? ???????? <command>net</command>:<indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>user delete</tertiary></indexterm><screen>
&rootprompt; net rpc user delete HERRING\$ -Uroot%not24get
Deleted user account.
</screen> ???????? ???????? ??????, ??? ??????? ?????? ??????????? ????? ????? ??, ??? ? ??????? ?????? ?????????????, ?????? ? ??????????? ?????? "$" ?? ?????. ???????? ?????????? ???????? ???????? ????????????? ??????? ?????? ????????????? ? ??????????? ? ?????? ??????.</para>

	<para>?????? Samba-3, ?????????? ?????????? ?????? Windows ADS ??? ?????? ?? ?????? ????? ????????? ????????? ???????: <indexterm><primary>net</primary><secondary>ads</secondary><tertiary>leave</tertiary></indexterm><screen>
&rootprompt; net ads leave
</screen></para>

	<para>????????? ??????????, ?????????? ?????? ADS, ????? ???? ???????? ????????-?????????? ?????? Samba ??????????? ????????? ???????: <indexterm><primary>net</primary><secondary>ads</secondary><tertiary>status</tertiary></indexterm><screen>
&rootprompt; net ads status
</screen> ????? ?????????? ?????????????. ??????????, ?????????? ? ????? <quote>Samba-3 by Example</quote>, ????? 7 ??? ????????? ??????????, ?????????? ?? ?????????????. ??? ????? ????? ???? ???????? ? ???????? ??? ??????????? ????? ?? ?????? <ulink url="http://www.samba.org/samba/docs/Samba3-ByExample.pdf">Samba-3 by Example</ulink>.</para>

	</sect2>

	<sect2>
	<title>??????????? ???????</title>

	<para>??????????? ????????????? ????????? ?????????? ????????? ????????, ????????? ???????? ???????????? ?????? ?????? ????? ???????? ????? ??????? ? ?????????? ? ?????? ??????.</para>

	<para>????? ????????, ????? ????????? ??????? ?????????, ????????? ????? ???????: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>trustdom list</tertiary></indexterm><screen>
&rootprompt; net rpc trustdom list -Uroot%not24get
Trusted domains list:

none

Trusting domains list:

none
</screen> ?????? ??? ???????????? ???????; ????????? ???? ???????? ???.</para>

	<para>?????????? ??????? ??????? ?????? ??????? ? ????????? ??????. ?????????? ?????? ?? ?????? ?????? ????? ??????? ????????????? ?????????? ? ???? ??????? ???????. ??? ??????, ??? ??????? ?????? ?????????? ?????? ? ???????? ?????????? ??????. ??? ????? ???????? ????????? ????????? ??????? ?????? ????????????? ?????????:<indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>trustdom add</tertiary></indexterm><screen>
&rootprompt; net rpc trustdom add DAMNATION f00db4r -Uroot%not24get
</screen> ??? ??????? ?????? ????? ???? ??????????? ???????? <command>pdbedit</command>, ??? ???????? ?????: <screen>
&rootprompt; pdbedit -Lw DAMNATION\$
DAMNATION$:1016:9AC1F121DF897688AAD3B435B51404EE: \
7F845808B91BB9F7FEF44B247D9DC9A6:[I         ]:LCT-428934B1:
</screen> ??????? ?????? ????????????? ????????? ?????? ????? ????? I ?????? ?????????? ??????.</para>

	<para>???? ?????????? ??????????? ? ?????????? ???????, ????????? ??????? ?????????? ? ???????: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>trustdom list</tertiary></indexterm><screen>
 &rootprompt; net rpc trustdom list -Uroot%not24get
Trusted domains list:

none

Trusting domains list:

DAMNATION           S-1-5-21-1385457007-882775198-1210191635
</screen> ????????????? ??????? ??????????? ???????; ??????? ???????????? ????????? ???????: <screen>
net rpc trustdom list -Uroot%not24get
Trusted domains list:

DAMNATION           S-1-5-21-1385457007-882775198-1210191635

Trusting domains list:

DAMNATION           domain controller is not responding
</screen></para>

	<para>???? ? ????????? ?????? ???? ??????? ??????? ?????? ???????, Samba ????? ?????????? ??????? (??????????? ?) ????????? ??????? ???????. ? ???????? ????????? ????????????? ??????? ? ???????? ?????????? ??????. ??? ??????? ????????? ????? ???? ?????????????? ? ?????????? ???????: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>trustdom establish</tertiary></indexterm><screen>
&rootprompt; net rpc trustdom establish DAMNATION
Password: xxxxxxx	== f00db4r
Could not connect to server TRANSGRESSION
Trust to domain DAMNATION established
</screen> ?????? ???????? ???????? ?????????????? ???????, ?????????????? ??????: <screen>
&rootprompt; net rpc trustdom list -Uroot%not24get
Trusted domains list:

DAMNATION           S-1-5-21-1385457007-882775198-1210191635

Trusting domains list:

DAMNATION           S-1-5-21-1385457007-882775198-1210191635
</screen></para>

	<para>?????? ?????????? ?????? ????????? ????????????? ??????? ? ?????????? ??????. ????????????? ?????????? ????? ???? ????????, ??? ???????? ?????: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>trustdom revoke</tertiary></indexterm><screen>
&rootprompt; net rpc trustdom revoke DAMNATION -Uroot%not24get
</screen> ?????? ?????????? ?????? ????????????? ?????????? ?????? ??????? ? ???????? ?????????? ??????. ??? ??????? ???????, ?????????? ?????: <screen>
&rootprompt; net rpc trustdom del DAMNATION -Uroot%not24get
</screen></para>

	</sect2>

	</sect1>

	<sect1>
	<title>?????????? ???????????????? ???????????? (SID'???)</title>

	<para><indexterm><primary>????????????? ????????????</primary></indexterm><indexterm><primary>SID</primary></indexterm><indexterm><primary>??????? ?????????????</primary></indexterm><indexterm><primary>user encoded</primary></indexterm><indexterm><primary>SID ??????</primary></indexterm> ???????? ????????????? ????????????, ??????? ???????????? ????? ???????? ?????????? WIndows - ????????????? ???????????? Windows (SID). ??? ??????? ?????? Windows (??????? ? ??????? ???????), ???????????? ? ?????? ???????????? ?? ????? SID. ??? ??????? ????????????? ????? ???????????? SID'?? ???????????? ? ??????, ??????? ?????????? ?????????? SID'? ??????, ? ???????? ??????????? ????????????.</para>

	<para><indexterm><primary>SID ??????</primary></indexterm><indexterm><primary>SID ??????</primary></indexterm><indexterm><primary>SID</primary></indexterm><indexterm><primary>????????? ????</primary></indexterm> ??-?????????? ????? - ??????? SID ?????? ?/??? ?????? ? ????? ??? ????? ??????????????. ??????? ?????? ??? ????? ????? ?????????? ??? ?????? (??????? ??????) ????? ??????? ?? ????? ????????? SID. ????? SID ? ??? ??? ??????, ???????????? ??? - ???? ????????. ???????????? - ????????? ???? ?????????????? ???????????????? ???????? ?, ????????, ?????????? ??????????? ???? ????? ? ??????.</para>

	<para>?????-??????? ?? ???????? ????????? ????????? SID ? ?????. ??????? ???? - ????????? ??? ? ??? ?? ???????, ??? ? ???? &smb.conf;. ??? ??? ????? ?????? ??? ???????: <indexterm><primary>net</primary><secondary>getlocalsid</secondary></indexterm><screen>
&rootprompt; net getlocalsid &gt; /etc/samba/my-sid
</screen> ????????????, ?????? ???? ?????????? ????? ?????????? SID'?. ?? PDC/BDC ??? ???????? ????? SID'?? ??????. </para>

	<para>????????? ??????? ??????????, ??? ?? ?????????? ????????? ? ???? <filename>???-sid</filename>: <screen>
&rootprompt; net getlocalsid
SID for domain MERLIN is: S-1-5-21-726309263-4128913605-1168186429
</screen></para>

	<para>???? ?????-???? ??????????? ???????????? SID, ??????? ??? ???????? ? ????? <filename>my-sid</filename>, ?????? ?????????? SID (?????? ????????, ??????? ?????????? ? <constant>S-1-5-21</constant>) ? ????????? ??????, ?????????? ?????:<indexterm><primary>net</primary><secondary>setlocalsid</secondary></indexterm><screen>
&rootprompt; net setlocalsid S-1-5-21-1385457007-882775198-1210191635
</screen> ?????????????? ?????????? SID ???????? ??????? ?????????, ?????? ????????? ????????? ????? ????? ???? ??????? ?????????.</para>

	<para>????????? ???????? ?????????? ?????? ??? ?????, ??????? ????????????? ??? PDC ??? BDC. ???????-????????? ?????? ? ???????-??????? ??????? ?????? ????? ???? ??????????? SID, ????? ????????????? ????? ???????? ???????????? ????. ??? ?????? ????????????? SID'? BDC ? SID'?? PDC (??? ????? ???????????? ?? ????????? ???????? ?????? NT4): <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>getsid</tertiary></indexterm><screen>
&rootprompt; net rpc getsid -S FRODO -Uroot%not24get
Storing SID S-1-5-21-726309263-4128913605-1168186429 \
    for Domain MIDEARTH in secrets.tdb
</screen> ?????? ?? ????????? ????????? ??????-???? (-S FRODO) ??? ?????? ??????? ?????? ????????????? (-Uroot%not24get).</para>

	</sect1>
	
	<sect1>
	<title>?????????? ?????? ?????????</title>

	<para>?????????? ?????? ????????? ???????? ??????????? ?? ???? ????????? ? ??????? ?? ???????</para>

	<itemizedlist>
		<listitem><para>????????/?????????/???????? ????? ????????</para></listitem>
		<listitem><para>?????????/????????? ??????? ???????? ??????? (ACL) ?? ????? ????????</para></listitem>
		<listitem><para>??????????? ????? ???????? ? ?????? ??????? ?? ??????</para></listitem>
		<listitem><para>????????? ??????????, ???????????? ? ????? ???????</para></listitem>
	</itemizedlist>

	<para>?????? ?? ??? ??????????? ????? ?????? ?????????, ????????? ?? ????????? ????????????? ??????? <command>net</command>. ???????? ??? ???? ??????? ??????????? ? ????????? ?????? ????? ?????????.</para>

	<sect2>
	<title>????????, ????????? ? ???????? ????? ????????</title>

	<para>????? ?????? ????? ???? ???????? ?????????????? ???????????? ??????? <command>net rpc share</command>. ??????-???? ????? ???? ??? ?????????, ??? ? ????????? - ??????????? ?????? -S. ?????????? ????????, ??? ?????????? ? ???????? ???????? ? ?????????????? ????? ??????????? ??????? ?? ??????????? ???????????????? ????????????? ????????. ???????????? ????????, ??????? ?????????? <command>smbd</command>, ?????????? <smbconfoption name="add share command"/>, <smbconfoption name="delete share command"/> ? <smbconfoption name="change share command"/>. ????? ?????????-???????? ???????????? ? ??????? ? ???????? ????? Samba ? ???????? <filename>~samba/examples/scripts</filename>.</para>

	<para>????????? ???? ????????????? ????????????? ???????????? ?? ?????????? ?????? ????????? ??????? <command>net</command>. ??????? ??????????? ????? ?????? <constant>Bulge</constant>. ? ???????? ??????? ??? ??????? <filename>/data</filename>. ???????, ??????? ????? ????????? ??? ?????????? ????? ?????? ???????, ???????? ?????: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>share add</tertiary></indexterm><screen>
&rootprompt; net rpc share add Bulge=/data -S MERLIN -Uroot%not24get
</screen> ???????? ???????? ?????? ?????????, ?, ???????? ??????? <command>net rpc share</command> ??? ?????????, ????? ???????? ?????? ????????? ????? ????????, ??? ???????? ?????: <screen>
&rootprompt; net rpc share -S MERLIN -Uroot%not24get
profdata
archive
Bulge   &lt;--- ???? ??? ????????
print$
netlogon
profiles
IPC$
kyocera
ADMIN$
</screen></para>

	<para>????? ??????????, ????? ????? ?????? ????? ???? ???????, ????????? ????????? ??????. ????????? ??? ???????? ??????? ????? ??????????? ????? ??????:<indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>share delete</tertiary></indexterm><screen>
&rootprompt; net rpc share delete Bulge -S MERLIN -Uroot%not24get
</screen> ??????? ????????, ??????????? ????, ??????????, ??? ????? ????? ??? ??????: <screen>
&rootprompt; net rpc share -S MERLIN -Uroot%not24get
profdata
archive
print$
netlogon
profiles
IPC$
ADMIN$
kyocera
</screen></para>

	</sect2>

	<sect2>
	<title>???????? ? ????????? ??????? ???????? ??????? ????? ???????? (ACL)</title>

	<para>? ????????? ????? ??????? <command>net</command> ?? ????? ???? ???????????? ??? ?????????? ???????? ???????? ??????? ????? ???????? Samba. ?? ????? MS Windows ??? ?????????? ???????????? ?????? ???????.</para>

	<para>?? ????? ???????? Samba ????? ????????????? ?????? ???????? ??????? (ACL) ? ?????????????? ???? SRVTOOLS NT4 Domain Server Manager, ???? ? ?????????????? ??????? MMC "?????????? ???????????". ?? ???? ?? ???? ???????? ?? ??????????? ?????. ?????? ????? ???????? <link linkend="AccessControls"/>.</para>

	</sect2>

	<sect2>
	<title>????? ???????, ??????? ? ??????? ??????.</title>

	<para><indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>vampire</tertiary></indexterm> ????? ??????? ????? ???? ?????????? ??? ??, ??? ? ??????? ?????? ?????????????, ??????????? ? ?????. ??? ?? ????? ????????? ?????? ???????? ??????? (ACL'?), ??? ??, ??? ? ????????? ???????????? ?? ????? ???????? ????????. ??? ???????? ??????? ??????? ?? ?????? Windows NT4 (??? ????? ????????) ?? ?????? Samba ???????????? ??????? <command>net rpc vampire</command>. ???? ??????? ????????? ?????? ? ????????? ???????????? ??????? ??????, ? ???????? ??????????? ??????????? ??? ???????? ????? ???????? ? ??????.</para>

	<para>??????? <command>net rpc share</command>  ????? ?????????????? ??? ???????? ????? ????????, ?????????, ?????? ? ?????? ???????? ?????? ? ??????? Windows ?? ?????? Samba.</para>

	<para>????? ?????? ????????? ?????? ????????? ??????????? ?????? ???????????? ????-???????? Windows. ????????, ??? ???????? ????-???????, ?????? ???????? ??????? (ACL?) ? ???????? ????????? DOS ? ??????? Windows ????? ???? ???????? ? ??????? ????????, ? ????? ????????, ??????????? ? ?????????? ????, ?? ??????? Samba ????? ?????????? ????????.</para>

	<para>??????? ???????? ????? ???? ???????? ?????? ?????, ????? ?????? Samba ??? ????????? ????????. ??????? ?????? ????????????? ? ????? ?????? ???????????? ?? ??????? ???????? ????? ???????? ? ???????, ?????? ? ?????????. ??????? ?????? ? ???????? ????????? ????????? ? ????????????? ??????? ??? SMB, ??? ? MS DCE RPC. ????????????? ??????? ???????, ??????? ??????????? ??????? - ???????????? ? ????????? ????? ??????????? ????????????? ??????? Samba ? ???????? "???????? ??????????", ??????? ?????? ?? ??????? ?????? ?? ?????? ??????? ? ???????. ????????, ???? ?????? Samba ?????????? MESSER, ? ???????? ?????? Windows NT4 ?????????? PEPPY, ? ??????? ?????? Samba - GONZALES, ?????? MESSER ????? ?????????????? ??? ??????? ?? ??????? ???? ??????  (?????? ? ????? ????????) ? PEPPY ?? gonzales. ???? ?? ??????? ??????? ??????, ?? ????????? ??????????? ????????? ?????? (????? "??????? ???????? ??????" ??????? net).</para>

	<para>????? ???????? ??????? ????????? ? ?????? ????????? ????????? ????????? ??????? (??? ??????), ??? ??, ??? ? ?????????, ?? ??????? ?????????? ??????? ???????.</para>

	<para>?????????? ??? ????????? ??????????? ???????? ????????:</para>

	<orderedlist>
		<listitem><para>??????? <command>net</command> ??????????, ????? ????????? ??????? ?????? ???????????? ???????????? ? ?? ??????-?????????, ? ?? ??????-?????????? ????????.</para></listitem>

		<listitem><para>????????? ???????? ????? ???? ?????????? ?? ????????? ??? ???????????. ???, ? ?????????, ????????? ??? ???????? ??????? ?????? Windows 2003 ?? Samba.</para></listitem>
	</orderedlist>

	<sect3>
	<title>??????? ?????? ???????</title>

	<para>??????? <command>net rpc share migrate</command> ????????? ??????? ??????? ????? ? ?????????. ?????? ???????? ?????????, ??????? ?????????? ????? ???????? ?????? ??? ?????? ??????. ????????????? ????? ?????? ???????? ??????? ?????? ????????, ????????? ??????? ???????? ???? ? ???????? ? ???????? ???????, ?????????????? ???????? ? ??????? ????????? ????????????, ??????? ????????? ?????? ?? ?????? ? ??????. ???? ?? ?????? ?????, ??????????? ????????? ?? ????????? - ???????? ????? ????? ????????, ????? ????????? ? ??????????? ???????? ??? ?????????????.</para>

	<para>????? ??????? ????????? "?? ????" ? ???? ???????? ????????. ?????????? <command>smbd</command> ?????? ???, ??????? ???????????? ??????? ??? ?????????? ????????, ?????????? ?????????? &smb.conf; <parameter>add share command</parameter>.</para>

	<para>? ???????? <filename>$SAMBA_SOURCES/examples/scripts</filename> ?????????? ?????? ??????????? ???????? ??? <parameter>add share command</parameter>. ?????????? ????????, ??? ??????? ??????, ??????? ???????????? ??? ?????????? ????????, ?????? ????? ??????????? ?????????? ??????? ? ???????? ???????, ? ????? ????? ?? ???????? ????? ???????? ? ????????? ??????? ???????? ??????? ?? ???. ??? ????? ?????????????? ?????????? ???????: <parameter>SeAddUsersPrivilege</parameter> ? <parameter>SeDiskOperatorPrivilege</parameter>. ?? ?????????? ???????????, ?????????? ???? ? ??????????, ??????????, ?????????? ? <link linkend="rights"/>.</para>

	<para>????????? ??????? ???????? ????? ??????? ??????? ?????: <screen>
net rpc share MIGRATE SHARES &lt;???_???????&gt; -S &lt;????????&gt;
        [--destination=??????????] [--exclude=???_???????1,???_???????2] [-v]
</screen> ???? ???????? &lt;???_???????&gt; ??????, ????? ?????????? ??? ????? ???????. ???????????? ??????? ?????? ????????? ????? ???????? ?? ???????, ? ??????? ??????????? ???????, ????? ???? ????????? ?????????????? <parameter>--exclude</parameter>. ????????: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>share migrate</tertiary></indexterm><screen>
&rootprompt; net rpc share migrate shares ?????????\
         -S win2k -U administrator%secret"
</screen> ??? ????????? ????? ?????? <constant>?????????</constant> ? ??????? <constant>win2k</constant> ?? ?????? Samba ? ?????????????? ??????????, ??????? ??????? ? ??????? ??????? <constant>administrator</constant> ? ??????? <constant>secret</constant>. ??????? ??????, ??????? ????????????, ?????? ???? ????? ? ??? ?? ?? ??????? - ????????? ???????? ? ?? ??? ????. ????????????? <command>net rpc vampire</command> ?? ??????? ???????? ????? ???????? ????????? ???????????? ??????? ??????? ?? ????? ????????. ???? ?? ?????????????????, ??????? ????? ??????? ????? ??????? ???????? ????? ???????? - ???????? ????, ??? ??????????? ??????? ?????? (?? ??????? Samba) ????? ??????????? ????? ? ??????????. ??? ????? ??????? ???, ??? ???????? ?????: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>right list accounts</tertiary></indexterm><screen>
&rootprompt; net rpc right list accounts -Uroot%not24get
</screen> ????, ???????????? ?? ??? ??? ???? ????????? ?????? ??????? ????? ????????. ???????? ? ?????????? ????????? ?? ??????????? ? ???? ????????, ??????????? ?? ??? ???.</para>

	</sect3>

	<sect3>
	<title>??????? ?????? ? ?????</title>

	<para>???, ????????? ?? ???? ?????, ???? ??????? ? ???????? ????????????? ? ???????? ????????? ? ?????? ? ???????. ??? ?????? ????? ????????????? ???????? ???????????? ???????, ? ????????? ??????????? ?????????? ?????? ?????, ????? ????? ???????????? ????? ? ???????. ????????? ???? ????????????? ???????, ??????? ????? ???????????? ??? ???????? ?????? ? ??????? ? ?????????????? ??????? <command>net</command>.</para>

	<para>???????? ?????? ? ?????? ??????? ?? ?????? ?????? ???? ??????? ??? ??????????????? MS Windows, ????????? ??????? Windows NT ? 200x ?? ?????? ????? ??????????? ???????????. ??????? <command>xcopy</command> Windows NT ?? ???????? ????????? ?????? ???????? ???????, ??? ???????? ?????? ?? Windows 200x. Microsoft ????????????? ???????, ??????? ????? ??????????? ACL (????????? ????????????), ?????????? <command>scopy</command>, ?? ??? ??????????????? ?????? ??? ????? Windows NT ??? 200X Server Resource Kit. </para>

	<para>?????????? ????????? ????????????, ??? ??????????, ??? ? ????????????, ??????? ????? ???????????? ??? ??????????? ?????? ? ????????? ??????? Windows ? ?????? ??????????? ????????? ????????????. ???? ?? ?????? ?????????? ???????????? ?????????? <command>robocopy</command>.</para>

	<para>??????? <command>net</command> ????? ???? ???????????? ??? ??????????? ?????? ? ????????? ? ?????? ??????????? ??????? ???????? ???????, ??? ?? ??? ? DOS-????????? ??????. ????????, ??? ????????? ??????? ???????? ??????? ????? ????? ?????? ?????, ????? ???????-???????? ????? ???????? ? ??? ?? ????????? ????????????, ??? ? ???????-????????. ??? ????????? ? ? ????????-?????????? ??????, ? ? ???????????? ??????, ??????? ?????????? ? ?????????? ????????????? (? ????????? -"vampired" - ????. ?????.) ??????. ?? ???????? ?????? ? ????????? ?????? ???????????? ??? ????? ???????.</para>

	<para>????????? ?????? ???????? ??????? ?????: <screen>
net rpc share MIGRATE FILES &lt;???_???????&gt; -S &lt;????????&gt;
    [--destination=??????????] [--exclude=??????1,??????2]
    [--acls] [--attrs] [--timestamps] [-v]
</screen> ???? ???????? &lt;???_???????&gt; ??????, ????? ?????????? ??? ???????. ???????????? ??????? ?????? ???????? ???????-????????? ????? ???? ????????? ?????????????? ????????? <parameter>--exclude</parameter>.</para>

	<para>???? ?????????? ????????? ??? ACL ??????, ?????????? ???????? ? ????????????? ????????? ?????? ????????????? <parameter>--acls</parameter>. ???????????? ????? ??????? ?????? ????? ???? ????????? ????????? ????????????? <parameter>--timestamps</parameter>, ? ???????? ???????? DOS (?.?. ???????, ???????? ? ?.?.) ????? ????????? ????????? ????????? <parameter>--attrs</parameter>.</para>

	<note><para>??????????? ????????? ?????? ???????? ??????? ??????? ?? ??????????????? ????????? ??? ???, ??? ??, ??? ? ?? ????? ????????? ???????? ??????? ?? ???????? ???????. ??????? ? ?????? ??????? Windows ?? ?????? ????????? ???????? ??? ????????? ??????. ??-?? ????????? ??????????? ACL Windows ? ??????? ????????? ACL Posix ???????? ???????? ??????? ACL Windows ?? ?????? Samba.</para></note>

	<para>?????? ???????? ???????, ?????????? ? ?????????? ?? ??????? Samba, ?????? ?????, ?? ????? ??????????????? ???????? ????????. Windows ???????????? ?????, ???????? ??????? ?????? ??????. ?????? ????????? ???????? ?????? ?? ?????????????? ??? UNIX/Linux. ?????? ? ???????? ????? ?????? ????? ????????, ????????? ???????? &smb.conf; file <smbconfoption name="force unknown acl user">yes</smbconfoption>. ??? ??????????? ????????????? ??????????? ?????, ???????? ??????? ?????? ??????, ? ?????????? ?????, ???????? ??????? ????????????, ?? ??????? Samba.</para>

	<para>?????? ???????? ???? ?????? ? ?????? <constant>nt4box</constant> ?? ?????? Samba, ? ???????? ??????????? ???????, ???????? ????:<indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>share migrate files</tertiary></indexterm><screen>
&rootprompt; net rpc share migrate files -S nt4box --acls \
    --attrs -U administrator%secret
</screen></para>

	<para>??? ??????? ????????? ??? ????? ? ???????? ?? ???? ???????? ????? ???????? ?? ??????? Windows ?? ????? <constant>nt4box</constant> ?? ?????? Samba, ? ???????? ??????? ???????. ?????, ??????????? ??????? ???????? ??????, ????? ???????????? ??????? ?????? ???????????? ?? ????? <constant>administrator</constant>.</para>

	</sect3>
	
	<sect3>
	<title>??????? ??????? ACL ?????? ???????</title>
	<para>???? ??????????? ????? ????? ?????? ???????? ??????? ?????? ???????, ??????? ?? ???????? ??? (???? ??? ??????????????) ??????????? ????? ????? ? ???????? ?? ??? ????? ???????. ????? ???????, ??????? ??????? ???????? ??????? ?????? ??????? ??? ??????? ? ????????? ???????: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>share migrate security</tertiary></indexterm><screen>
&rootprompt; net rpc share migrate security -S nt4box -U administrator%secret
</screen></para>

	<para>??? ??????? ?????? ????????? ?????? ??????? ??????? ?????? ??????? ?????????? nt4box ?? ???? ????????? ?????? samba-system. </para>
	</sect3>

	<sect3>
	<title>????????????? ??????? ????? ???????? ? ??????</title>

	<para>????? ??????, ?????????? ?????, ????? ???? ?????????? ???? ??????????. ??????? ??????????? ??????????? ????????, ????? ??? ????? ?????, ? ? ????? ?????? ???????? ???????: <screen>
net rpc share MIGRATE ALL &lt;???_???????&gt; -S &lt;????????&gt;
    [--exclude=share1, share2] [--acls] [--attrs] [--timestamps] [-v]
</screen></para>

	<para>?????? ?????????????? ???????? ??????? ?????:<indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>share migrate all</tertiary></indexterm><screen>
&rootprompt; net rpc share migrate all -S w2k3server -U administrator%secret
</screen> ??? ?????????? ?????? ????? ??????? <parameter>w2k3server</parameter>.</para>

	</sect3>

	</sect2>

	<sect2>
	<title>??????? ?????????</title>

	<para>????????? ?????? ???????, ??? ??, ??? ? ??????? ? ????? ??????? ?????????, ????? ????? ?? ?????????????? ????; ???????? ???? ????? ?????? ?? ???????? ?????????? ?? ?????, ????? ??? ??????? "??? ????", ?? ????????? ?????, ???????, ???????? ??? ?????? ? ?????? ??????? ?? ???? ????, ??? ?????? ???????? ? ??????????.</para>

	<para>??????????? ? ?????? ?????? ????????? ? ??????????? ?? ??????? ?????, ? ????? ???? ????? ??????? ???? ???????. ???? ??????????? ????? ??????, ?????? ??????? ??? ?????????? ????????? ?????? - ????????????? ????? ? ???? ?????? ???????? ?????? ????????. ? ??????  ???????, ??? ??????? ????, ???????????? ?????? ??????????? ????? ? ????????? ??????? ??????, ?????? ?? ??????? ???????? ?????????? ?????????? ???????????? ??????, ??????????? ???????? ???? ???????? ????????? ???????? ?????????????. ????????? ?????? ?????????????? ??????? ???? ??????  ?????? ????? ??????? ? ???. ????? ????? ?????????? ????? ???????, ??????? ???????????? ? ????????? ?????, ??? ?????? ?? ????? ????????? ?????? ????????. ????? ???????? ????? ????? ??????? ??????, ??????? ???????? ?? ????? ????????? ? ????????????? ????????. ????? ????, ??? ????? ??????? ?????????? ?????? ?????????? ??????????? ??????????? ???????? ??????? ?? ?? ????????? &smbmdash; ??? ??????????? ?? ????, ????????? ?????? ??? ???? ???????.</para>

	<para>??????? ???????????? ??????????? ?????? ????????? ? ???? ?????????:</para>

	<itemizedlist>
		<listitem><para>????????? ???????? ??????. </para></listitem>

		<listitem><para>????????? ????????? ???????? (??? ??????? ?????? ? ???????? Windows).</para></listitem>

		<listitem><para>????????? ???????? ??????. </para></listitem>

		<listitem><para>?????????? ???????? ????????????.</para></listitem>

		<listitem><para>????????? ???????? ????????.</para></listitem>
	</itemizedlist>

	<para>??????? <command>net</command> Samba ????????? ?????? ??????? ????????? ? ?????? ??????? ?????? Windows ?? ??????. ????? ???? ?????????? ???????????? ??? ???????? ????????? ?? ?????? Samba <command>smbd</command>, ??????????, ??????? ???????? ??????? ??????? ?? ???????? ??????????? ???????? ?????? ??????? ???????????? ??????? ??? ???????? ??????????? ?????????. ????? ??????????? ??????????? ????????????? ????????, ??????? ????? ???? ?????? ? ????????? ????? &smb.conf; <smbconfoption id="add printer script"/>. ???? ???????? ????? ??? ???????? ????????. ?????????? ????????-?????? ????? ???? ??????? ? ????????<filename>$SAMBA_SOURCES/examples/scripts</filename>. ????????, ??? ???? ???????? ?????? ???? ????????, ????? ????????? ? ????????? ???????????? ??????? ? ???????????? ?? ??????????? ??? ???????? ??????? ??????.</para>

	<para>?????? ?? ??????????? (???????? - ????. ?????.), ????????????? ????, ????? ???? ???????? ???????? ??? ??? ????? ?????????????? ????????. ?????? ??????? ?????????????? ???????????? ???????? ? ????????? ???????? ???, ????? ????? ???????????? ???????? - ? ?????????, ???? ???-?? ?????? ?? ???. ????? ?????? ?????? ????????? ?????? ????????.</para>

	<para>????? ??????? ??????? ????????? ? ??????? ?????? Windows (NT4 ??? 200x).  ????????? ?????????? ??????? ?????? ?????? ?????? ? ??????????? ???????? ??????: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>printer migrate printers</tertiary></indexterm><screen>
net rpc printer MIGRATE PRINTERS [printer] [misc. options] [targets]
</screen> ???????? ?????? ????? ???? ?????????? ? ??????? ?????? Windows ?? ?????? Samba ? ?????????????? ????????? ?????????? ????????? ??????: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>printer migrate drivers</tertiary></indexterm><screen>
net rpc printer MIGRATE DRIVERS [printer] [misc. options] [targets]
</screen> ????? ???????? ????? ???? ?????????? ????????? ?????????: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>printer migrate forms</tertiary></indexterm><screen>
net rpc printer MIGRATE FORMS [printer] [misc. options] [targets]
</screen> ????????? ???????????? ???????? (?????? ???????? ???????) ????? ????????? ? ??????? Windows ?? ?????? Samba ?????????????? ????????? ???????: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>printer migrate security</tertiary></indexterm><screen>
net rpc printer MIGRATE SECURITY [printer] [misc. options] [targets]
</screen> ????????? ???????? ???????? ? ???? ????? ????, ??? ?????? ?????? ? ?? ??????????. ?? ????? ????????? ? ??????? ?????? Windows ?? ?????? Samba ????????? ????????: <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>printer migrate settings</tertiary></indexterm><screen>
net rpc printer MIGRATE SETTINGS [printer] [misc. options] [targets]
</screen></para>

	<para>??????? ?????????, ??????? ????????????? ????? ??????????, ????? ???? ???????? ????? ???????? ?? ??????? ?? ???????????: <screen>
net rpc printer MIGRATE ALL [???????] [??????_?????] [????_?????????]
</screen></para>

	</sect2>

	</sect1>

	<sect1>
	<title>???????? ???????? ??????</title>

	<para>???????? ??????????? ????????? ????? ??????? <command>net file</command>, ??????? ????????????? ??????????? ??? ???????? ???????? ?????? ? ??????? ??????? ??????? ???? RAP, ???? RPC. ??????????, ?????????? ? ????????? ??????????? ??? ?????????? ?????????? ?? ?????????????.</para>

	</sect1>

	<sect1>
	<title>?????????? ???????? ? ????????????</title>

	<para>????????? ?????????? ???????? ??????? <command>net session</command> ?????????? ?????? ????? RAP ??? ????????? ?????? ?????????? ? ???????? Samba, ??? ???????? ?????: <indexterm><primary>net</primary><secondary>rap</secondary><tertiary>session</tertiary></indexterm><screen>
&rootprompt; net rap session -S MERLIN -Uroot%not24get
Computer             User name            Client Type        Opens Idle time
------------------------------------------------------------------------------
\\merlin             root                 Unknown Client         0 00:00:00
\\marvel             jht                  Unknown Client         0 00:00:00
\\maggot             jht                  Unknown Client         0 00:00:00
\\marvel             jht                  Unknown Client         0 00:00:00
</screen></para>

	<para>?????? ????? ???? ??????? ??????????? ???????, ??? ???????? ?????: <screen>
&rootprompt; net rap session close marvel -Uroot%not24get
</screen></para>

	</sect1>

	<sect1>
	<title>???????? ? ADS</title>

	<para>????? Samba-3 ???????????? ? ????????? MS Windows ADS, ????? ???????? Samba ?? ????? ???????? ??? ?????????, ???? ??? ?? ???????????? ? ?????? ADS. ??????????, ?????????? ?????????????? ?????????, ????? ???? ???????? ? ??????? ADS ??????????? ??????? <command>net ads print info</command> ?? ????????? ???????????: <indexterm><primary>net</primary><secondary>ads</secondary><tertiary>printer info</tertiary></indexterm><screen>
net ads printer info &lt;???_????????&gt; &lt;???_???????&gt; -Uadministrator%secret
</screen> ???? ?????? ????? ???????? ???????????? ????????? (*), ??????????? ????? ?????? ?????????.</para>

	<para>????? ???????????? (??????? ?????????) ??????? ? ADS, ????????? ????????? ???????: <indexterm><primary>net</primary><secondary>ads</secondary><tertiary>printer publish</tertiary></indexterm><screen>
net ads printer publish &lt;printer_name&gt; -Uadministrator%secret
</screen> ??? ?????????? ??????? ?????????? ??????? Samba ? ADS.</para>

	<para>???????? ???????? Samba ?? ADS ??????????? ??????????? ????????? ???????: <indexterm><primary>net</primary><secondary>ads</secondary><tertiary>printer remove</tertiary></indexterm><screen>
net ads printer remove &lt;???_????????&gt; -Uadministrator%??????
</screen></para>

	<para>????? ?????????? ???????? ?? ????? ?????? ADS, ????? ????????? ????? ????? (??????):  <indexterm><primary>net</primary><secondary>ads</secondary><tertiary>printer search</tertiary></indexterm><screen>
net ads printer search &lt;printer_name&gt; -Uadministrator%secret
</screen></para>

	</sect1>

	<sect1>
	<title>??????????? ? ????? Samba</title>

	<para>??????????, ?????????? ? ????????? ??????????? ??????? <command>net</command> ?? ???????????, ?????????? ?????????? ?????.</para>

	</sect1>

	<sect1>
	<title>?????????? ????????????? IDMAP UID/SID</title>

	<para>??????????? IDMAP UID--&gt;SID ? SID--&gt;UID, ??????????? <command>winbindd</command>, ????? ???? ????????? ? ????????? ????. ????????? ???? ????? ??????????????? ???????, ???????? ?? ??, ??? ???????????? ????????????? ?????? ??? ?????? ? ??? ??????, ???? ?? ????? ??????, ??? ???????.</para>

	<para>????????? ???????? ????? IDMAP ????? ???? ????????????? (??? ?????????????). ???? ??? ????????, ? ??????? ??? ????? ???? ??????????: ?) ???????????? ???? IDMAP ?????????, ?) ?????????? ?????????? ????????????????? ?????? ?????????? ???????????.</para>

	<para>??? ???????? ????? IDMAP Winbind ?????? ???? ????????. ????? ??????????????? ?? ???????????? ????? ????????? <command>winbindd</command> ? ??????? ?????? ???? <filename>winbindd_idmap.tdb</filename>.</para>

	<sect2>
	<title>??????? ???? ????? ???? ?????? IDMAP</title>

	<para>???? ?????? IDMAP ????? ???? ????????? ? ????????? ????, ??? ???????? ?????: <screen>
net idmap dump &lt;full_path_and_tdb_filename&gt; &gt; dumpfile.txt
</screen> ???? ? ?????????? ?????? Samba ????? .tdb ???????? ? ???????? <filename>/var/lib/samba</filename>, ?? ????????? ??????? ??????? ???? ? ??????: <screen>
net idmap dump /var/lib/samba/winbindd_idmap.tdb &gt; idmap_dump.txt
</screen></para>

	</sect2>

	<sect2>
	<title>??????????????? ???? ????? ???? ?????? IDMAP</title>

	<para>???? ????? IDMAP ????? ???? ???????????? ????????? ????????: <screen>
net idmap restore &lt;??????_????_?_???_?????_tdb&gt; &lt; dumpfile.txt
</screen> ???? ????? .tdb ??????? ?????????? Samba ???????? ? ???????? <filename>/var/lib/samba</filename>, ????????? ??????? ????? ???????????? ??? ?????????????? ?????? ? ???? tdb: <screen>
net idmap restore /var/lib/samba/winbindd_idmap.tdb &lt; idmap_dump.txt
</screen></para>

	</sect2>

	</sect1>

	<sect1 id="netmisc1">
	<title>?????? ????????? ????????</title>

	<para>????????? ??????? ???????? ???????? ??? ????????? ??????? ??????????, ?????????? ?????? Samba. ??? ??????? ?? ???????? ? ???????? ????????? Windows XP Professional. <indexterm><primary>net</primary><secondary>rpc</secondary><tertiary>info</tertiary></indexterm><screen>
&rootprompt; net rpc info
Domain Name: RAPIDFLY
Domain SID: S-1-5-21-399034208-633907489-3292421255
Sequence number: 1116312355
Num users: 720
Num domain groups: 27
Num local groups: 6
</screen></para>

	<para>??? ???? ???????? ?????????? - ????? <command>net time</command>. ???? ?????????? ????? ???? ??????????? ??? ??????? ???????? ??????? ?? ??????? ???????, ??? ???????? ?????: <indexterm><primary>net</primary><secondary>time</secondary></indexterm><screen>
&rootprompt; net time -S SAURON
??? ??? 17 00:50:43 2005
</screen> ? ??? ??????, ???? ?????????? ???????? ?????????? ?????????? ? ??????? ??????? UNIX <command>/bin/time</command>, ??????? ???? - ???????? ????? ? ???????? ??????? ? ???????, ??????? ????? ??? ????????. ????? ????? ??????????, ????????: <indexterm><primary>net</primary><secondary>time</secondary><tertiary>system</tertiary></indexterm><screen>
&rootprompt; net time system -S FRODO
051700532005.16
</screen> The time can be set on a target server by executing: <indexterm><primary>net</primary><secondary>time</secondary><tertiary>set</tertiary></indexterm><screen>
&rootprompt; net time set -S MAGGOT -U Administrator%not24get
Tue May 17 00:55:30 MDT 2005
</screen> It is possible to obtain the time zone of a server by executing the following command against it: <indexterm><primary>net</primary><secondary>time</secondary><tertiary>zone</tertiary></indexterm><screen>
&rootprompt; net time zone -S SAURON
-0600
</screen></para>

	</sect1>

</chapter>
