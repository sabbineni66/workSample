<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE chapter PUBLIC "-//Samba-Team//DTD DocBook V4.2-Based Variant V1.0//EN" "http://www.samba.org/samba/DTD/samba-doc">
<chapter id="DNSDHCP">
<chapterinfo>
	&author.jht;
</chapterinfo>

<title>??????????? ?? ????????? DNS ? DHCP</title>

<sect1>
<title>??????????? ? ??????? ???????</title>

<para><indexterm><primary>Dynamic Host Configuration Protocol</primary><see>DHCP</see></indexterm><indexterm><primary>Domain Name System</primary><see>DNS</see></indexterm> ? ???? UNIX ?????? ?????????? ????? ???? ?????, ??-?? ??????? ????????? ??????? ?? ??????, ??????? ??-?? ??????? ???????? ???? (DNS) ? ????????? ???????????? ????????? ?????? (DHCP). ?? ??? ??????, ???????????? ?? ??? ?????? ?????????? ??????? ?????????? DNS ? DHCP, ?????.</para>

<para>?? ????? ? ??????????? ????, ??? ?????? ????????????? ?????????????? ?????????? ????? ??????????? ? ???????. ???????????? Microsoft Windows, ? ?????????, ???????, ??? ????? ???????? ??????? ? ??????? ????, ? <quote>????? ??? ??????????</quote>.</para>

<para><indexterm><primary>ADS</primary></indexterm> ? UNIX-??????????????? ???? ????????????. ????????? ?????????? ??????? ? ???? Microsoft Windows ? ?????? ?????? ???????? ? ?????? ????????? ? ????? ?????? ????????????. ??????? ????????? Microsoft Windows ????????? ??????? ???????? ??????????? ???????????????? ? ????. Windows 2000 Active Directory ???????????? ?????? ? ???????????? ???? DNS, ??? ????? ??????????? ??????????????? UNIX. ????? ?????????? ? ????? ???!</para>


<para><indexterm><primary>ISC</primary><secondary>DNS</secondary></indexterm><indexterm><primary>ISC</primary><secondary>DHCP</secondary></indexterm><indexterm><primary>Dynamic DNS</primary><see>DDNS</see></indexterm> ???? ???? ????? - ?????????????????? ????????? ???????? Internet Software Consortium (ISC) DNS ? DHCP, ?????????????? ???????????? ???????, ??????????? ?? ?????? ????????????? ? ????????? Microsoft Windows 2000 Server.</para>

<para>??? ????? ?? ????????????? ?????? ?????, ??? ?????????? ?????? ?????? ????????? ??? ???????? DNS ? DHCP. ?????????????? ??????? ????????????? ???????? ????????, ?????????????? ???-???? ??? ? ???? ?????????.</para>

<para><indexterm><primary>DNS</primary></indexterm><indexterm><primary>DHCP</primary></indexterm><indexterm><primary>BIND9.NET</primary></indexterm> ??? ????? ????? ??????? ?? ????????????? ???????? ????????? ? ?? ?????????? ?? ??, ????? ???? ?????????? ???????????? ?? DNS ? DHCP, ????????? ??? ????? ?????? ?? ????????? ???? ?????? ? ???? ???? ????????? ? ?????. ???, ??? ????? ????? ????????????????? ??????????? ????????? ?? DNS ??? DHCP, ?????? ???????? ???-???? ISC ?? ?????? <ulink noescape="1" url="http://www.isc.org"> http://www.isc.org</ulink>. ???, ???? ????? ??????? ?????, ????? ???? ????????? ?????????? ?? DNS ?? O'Reilly, ?????? ???-???? <ulink url="http://www.oreilly.com/catalog/dns/index.htm">O'Reilly</ulink>, ? ???-???? <ulink url="http://www.bind9.net/books-dhcp">BIND9.NET</ulink> ??? ????????? ??????????. ??? ??? ?????:</para>

<orderedlist>
	<listitem><para>DNS and BIND, By Cricket Liu, Paul Albitz, ISBN: 1-56592-010-4</para></listitem>
	<listitem><para>DNS &amp; Bind Cookbook, By Cricket Liu, ISBN: 0-596-00410-9</para></listitem>
	<listitem><para>The DHCP Handbook (2nd Edition), By: Ralph Droms, Ted Lemon, ISBN 0-672-32327-3</para></listitem>
</orderedlist>

</sect1>

<sect1>
<title>?????? ????????????</title>

<para><indexterm><primary>WINS</primary></indexterm><indexterm><primary>DNS</primary></indexterm> DNS ??? ????????? ?????? ?? ??, ??? ???? ??? ?????. ??????????? ??? ?????????????? ??????? (????? ??????) ??????????? ? ???? ?????? IP ????? DNS. ???? Windows ????? ????????? ???????? ?????????? DNS, ??, ? ?????????, DNS ????????. <indexterm><primary>WINS</primary></indexterm> ???????????? DNS, Windows Internet Name Service (WINS - ?????? ????????-???? Windows) &smbmdash; ???????????? ??????? ????? ?? ???? ?????????? NetBIOS ?????? TCP/IP &smbmdash; ????????????????? ???????? ? ?????????????????, ??? ??, ??? ???????, ?? ????????????? ???????????? ????, ??????? ????? ????????????? ?? ???? ????? ??????? ? ????????? ??-?????.</para>

<para><indexterm><primary>RFC 1001</primary></indexterm><indexterm><primary>RFC 1002</primary></indexterm> WINS ???????? ??????????? ?????? ???? NetBIOS (NBNS), ????????? ? RFC1001/1002, ?? Microsoft. ??? ????????? ???????? NetBIOS (????????, ?????????? ? Microsoft Windows) ?????????????? ???????????? ??? ??????????, ??????? ?????? ????????????? ??? ????????????, ?????? ? IP-??????, ??????? ??? ????? ??????. ??????????? WINS ??????????-??????? ???? ????? ????????? ????? ????? ? IP-??????.</para>

<para>The demand for an alternative to the limitations of NetBIOS networking finally drove Microsoft to use DNS and Active Directory. Microsoft's new implementation attempts to use DNS in a manner similar to the way that WINS is used for NetBIOS networking. Both WINS and Microsoft DNS rely on dynamic name registration.</para> 

<para>??????? Microsoft Windows ????? ????????? ???????????? ??????????? ???? ?? ??????? DNS ??? ????????. ??? ????????????, ? ?????? ????????????? DHCP ??? ?????????? IP-??????? ??????? ????????, ???????? ??????????? ???? ?????? ? ?? IP-??????? DHCP-???????? ????? ????? ????????????? ???????? ?????? IP-??????. ? ????? ??????, Microsoft DNS-?????? ????? ????????? ????? ????? Microsoft WINS.</para>

<para>????????? ???????????? ????????????? ???????, ???????????? ?????? ???????????? DNS, ? ??????? ?????? DHCP, ??????? ????????????? ???????????? DNS.</para>

	<sect2>
	<title>???????????? DNS</title>

	<para><indexterm><primary>DNS</primary><secondary>????????????</secondary></indexterm> ?????? ???????????? DNS ???????? ??? ??????? ???? ? ???????????? IP-??????? 192.168.1.0/24. ?????? ??????? ??????? ????? ??????????? ? RFC1918.</para>


	<para><indexterm><primary>BIND</primary></indexterm> ??????????????, ??? ??? ???? ????? ??????????? ?? ?????????? ?????????. ????????? ????? ???????? ? ISC BIND ?????? 9. BIND - Berkeley Internet Name Daemon (????? ????????-???? ??????).</para>

	<para>??????? ???? ???????? <filename>/etc/named.conf</filename> ?????????? ???????????? ???? ???????????? ? ?????????? ?????? ????????. ???????????? ? ??? ????? ????? ??????? ? ????????? ????????, ??????? ???????? ?????? ??????????? ???????. <programlisting>
# Quenya.Org ???? ?????????

acl mynet {
	192.168.1.0/24;
	127.0.0.1;
};

options {

	directory "/var/named";
	listen-on-v6 { any; };
	notify no;
	forward first;
	forwarders {
		192.168.1.1;
		};
	auth-nxdomain yes;
	multiple-cnames yes;
	listen-on {
		mynet;
		};
};

# ????????? ??? ??????????? ??? ?? ????????? ?? ? ????? ???????????.
# ?????? ?????????? localhost, ?????? - 
# ???????? ????? ??? localhost. ????????? ????  "." ???????? 
# ???????????? ???????? ???????? ????.

zone "localhost" in {
	type master;
	file "localhost.zone";
};

zone "0.0.127.in-addr.arpa" in {
	type master;
	file "127.0.0.zone";
};

zone "." in {
	type hint;
	file "root.hint";
};

# ?? ?????? ???????? ?????????? ?????? ??? ??? ????? ??????????? ??????? ????.

zone "quenya.org" {
	type master;
	file "/var/named/quenya.org.hosts";
	allow-query {
		mynet;
		};
	allow-transfer {
		mynet;
		};
	allow-update {
		mynet;
		};
	};

zone "1.168.192.in-addr.arpa" {
	type master;
	file "/var/named/192.168.1.0.rev";
	allow-query {
		mynet;
	};
	allow-transfer {
		mynet;
	};
	allow-update {
		mynet;
	};
};
</programlisting></para>

	<para>????????? ????? ??????????? ? ???????? <filename>/var/named</filename>. ??? ???? <filename>/var/named/localhost.zone</filename>: <programlisting>
$TTL 1W
@               IN SOA  @   root (
				42              ; ???????? ????? (d. adams)
				2D              ; ??????????
				4H              ; ?????? ???????
				6W              ; ???? ????????
				1W )            ; ???????

		IN NS           @
		IN A            127.0.0.1
	</programlisting></para>

	<para>???? <filename>/var/named/127.0.0.zone</filename>: <programlisting>
$TTL 1W
@               IN SOA          localhost.  root.localhost. (
				42              ; ???????? (d. adams)
				2D              ; ??????????
				4H              ; ??????
				6W              ; ???? ????????
				1W )            ; ???????

				IN NS           localhost.
1               IN PTR          localhost.
</programlisting></para>

	<para>???? <filename>/var/named/quenya.org.host</filename>: <programlisting>
$ORIGIN .
$TTL 38400      ; 10 ????? 40 ?????
quenya.org      IN SOA  marvel.quenya.org. root.quenya.org. (
				2003021832 ; ????????
				10800      ; ?????????? (3 ????)
				3600       ; ?????? (1 ???)
				604800     ; ???? ???????? (1 ??????)
				38400      ; ??????? (10 ????? 40 ?????)
				)
			NS      marvel.quenya.org.
			MX      10 mail.quenya.org.
$ORIGIN quenya.org.
frodo                   A       192.168.1.1
marvel                  A       192.168.1.2
;
mail                    CNAME   marvel
www                     CNAME   marvel
</programlisting></para>

<para>???? <filename>/var/named/192.168.1.0.rev</filename>: <programlisting>
$ORIGIN .
$TTL 38400      ; 10 ????? 40 ?????
1.168.192.in-addr.arpa  IN SOA  marvel.quenya.org. root.quenya.org. (
				2003021824 ; ????????
				10800      ; ?????????? (3 ????)
				3600       ; ?????? (1 ???)
				604800     ; ???? ???????? (1 ??????)
				38400      ; ??????? (10 ????? 40 ?????)
				)
			NS      marvel.quenya.org.
$ORIGIN 1.168.192.in-addr.arpa.
1                       PTR     frodo.quenya.org.
2                       PTR     marvel.quenya.org.
</programlisting></para>

	<para><indexterm><primary>BIND</primary></indexterm><indexterm><primary>????? ???????????? ???????????</primary></indexterm> ????? ????????, ?????????? ?????, ???? ??????????? ?? ????????? ?????????? ???????. ??? ??????????? ?????????????????? ?????? ???? ??????. ? ?????????? ? ???? ?????? BIND ?????? 9 ??????? ??? ??????? ????? ???????????? ??????????? ???? ? ??????????? <filename>.jnl</filename>. ?? ???????????? ? ?? ????????? ? ????? ??????? ???????? ??? ? ?????????? ??????? <filename>.jnl</filename>.</para>

	</sect2>

	<sect2 id="DHCP">
	<title>?????? DHCP</title>

	<para>????????? ???? ???????????? ? ???????? ISC DHCP ?????? 3. ???? ?????????? ? <filename>/etc/dhcpd.conf</filename>:</para>

	<para>
	<programlisting>
ddns-updates on;
ddns-domainname "quenya.org";
option ntp-servers 192.168.1.2;
ddns-update-style ad-hoc;
allow unknown-clients;
default-lease-time 86400;
max-lease-time 172800;

option domain-name "quenya.org";
option domain-name-servers 192.168.1.2;
option netbios-name-servers 192.168.1.2;
option netbios-dd-server 192.168.1.2;
option netbios-node-type 8;

subnet 192.168.1.0 netmask 255.255.255.0 {
	range dynamic-bootp 192.168.1.60 192.168.1.254;
	option subnet-mask 255.255.255.0;
	option routers 192.168.1.2;
	allow unknown-clients;
}
</programlisting>
	</para>

	<para>? ???? ??????? IP-?????? ????? 192.168.1.1 ? 192.168.1.59 ??????????????? ??? ????????????? (????? ?????????? <constant>???????????</constant>) IP-???????. ?????? ????? 192.168.1.60 ? 192.168.1.254 ???????????? ??? ????????????? ?????????????.</para>

	</sect2>

</sect1>
</chapter>
